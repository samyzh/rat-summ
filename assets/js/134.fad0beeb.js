(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{1838:function(s,a,e){"use strict";e.r(a);var n=e(14),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"npm命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm命令"}},[s._v("#")]),s._v(" npm命令")]),s._v(" "),n("h3",{attrs:{id:"常用命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[s._v("#")]),s._v(" 常用命令")]),s._v(" "),n("ul",[n("li",[s._v("npm  install/uninstall/")]),s._v(" "),n("li",[s._v("npm list -g --depth 0. 查看全局安装过的包")])]),s._v(" "),n("h3",{attrs:{id:"简写"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#简写"}},[s._v("#")]),s._v(" 简写")]),s._v(" "),n("ul",[n("li",[s._v("安装     install   i")]),s._v(" "),n("li",[s._v("测试     test    t")]),s._v(" "),n("li",[s._v("帮助     --help   -h")]),s._v(" "),n("li",[s._v("全局     -global   -g")]),s._v(" "),n("li",[s._v("保存依赖   --save   -S")]),s._v(" "),n("li",[s._v("保存为开发依赖 --save-dev -D")])]),s._v(" "),n("blockquote",[n("ul",[n("li",[s._v("在 package.json 文件里面提现出来的区别就是，使用 --save-dev 安装的 插件，被写入到 devDependencies 对象里面去，而使用 --save 安装的插件，责被写入到 dependencies 对象里面去。")]),s._v(" "),n("li",[s._v("devDependencies  里面的插件只用于开发环境，不用于生产环境，而 dependencies  是需要发布到生产环境的。")])])]),s._v(" "),n("h4",{attrs:{id:"npm-init参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-init参数"}},[s._v("#")]),s._v(" npm init参数")]),s._v(" "),n("ul",[n("li",[s._v("init --yes   init -y")]),s._v(" "),n("li",[s._v("init --force  init -f")])]),s._v(" "),n("h4",{attrs:{id:"npm-install-参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-install-参数"}},[s._v("#")]),s._v(" npm install 参数")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("npm i module_name  -S  = >  npm install module_name --save     dependencies 对象")])]),s._v(" "),n("li",[n("p",[s._v("npm i module_name  -D  => npm install module_name --save-dev  devDependencies 对象")])]),s._v(" "),n("li",[n("p",[s._v("npm i module_name  -g  全局安装")])])]),s._v(" "),n("h3",{attrs:{id:"安装包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装包"}},[s._v("#")]),s._v(" 安装包")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" lodash "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sinopia发现本地没有 lodash包,就会从 官方镜像下载")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" --loglevel info "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" lodash  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置loglevel 可查看下载包时的详细请求信息")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"安装源设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装源设置"}},[s._v("#")]),s._v(" 安装源设置")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" --registry https://registry.npm.taobao.org "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" lodash "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 临时使用淘宝源")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" registry https://registry.npm.taobao.org "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全局配置切换到淘宝源")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" registry http://www.npmjs.org "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全局配置切换到官方源")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" info lodash "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#检测是否切换到了淘宝源")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"npm-i命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-i命令"}},[s._v("#")]),s._v(" npm i命令")]),s._v(" "),n("p",[n("strong",[s._v("查阅资料得知，自npm 5.0版本发布以来，npm i的规则发生了三次变化。")])]),s._v(" "),n("p",[n("strong",[s._v("1、npm 5.0.x 版本，不管package.json怎么变，npm i 时都会根据lock文件下载")])]),s._v(" "),n("p",[s._v("package-lock.json file not updated after package.json file is changed · Issue #16866 · npm/npm")]),s._v(" "),n("p",[s._v("这个 issue 控诉了这个问题，明明手动改了package.json，为啥不给我升级包！然后就导致了5.1.0的问题...")]),s._v(" "),n("p",[n("strong",[s._v("2、5.1.0版本后 npm install 会无视lock文件 去下载最新的npm")])]),s._v(" "),n("p",[s._v("然后有人提了这个issue why is package-lock being ignored? · Issue #17979 · npm/npm")]),s._v(" "),n("p",[s._v("控诉这个问题，最后演变成5.4.2版本后的规则。")]),s._v(" "),n("p",[n("strong",[s._v("3、5.4.2版本后 why is package-lock being ignored? · Issue #17979 · npm/npm")])]),s._v(" "),n("p",[s._v("大致意思是，如果改了package.json，且package.json和lock文件不同，那么执行"),n("code",[s._v("npm i")]),s._v("时npm会根据package中的版本号以及语义含义去下载最新的包，并更新至lock。")]),s._v(" "),n("p",[s._v("如果两者是同一状态，那么执行"),n("code",[s._v("npm i")]),s._v("都会根据lock下载，不会理会package实际包的版本是否有新。")]),s._v(" "),n("h2",{attrs:{id:"npm-配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-配置"}},[s._v("#")]),s._v(" npm 配置")]),s._v(" "),n("p",[n("code",[s._v("npm")]),s._v("的配置操作可以帮助我们预先设定好"),n("code",[s._v("npm")]),s._v("对项目的行为动作，也可以让我们预先定义好一些配置项以供项目中使用。所以了解"),n("code",[s._v("npm")]),s._v("的配置机制也是很有必要。")]),s._v(" "),n("h3",{attrs:{id:"优先级"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#优先级"}},[s._v("#")]),s._v(" 优先级")]),s._v(" "),n("p",[n("code",[s._v("npm")]),s._v("可以从不同的来源获取其配置值，按优先级从高到低的顺序排序：")]),s._v(" "),n("h4",{attrs:{id:"命令行"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#命令行"}},[s._v("#")]),s._v(" 命令行")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run serve --params"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("执行上述命令时，会将配置项"),n("code",[s._v("params")]),s._v("的值设为"),n("code",[s._v("123")]),s._v("，通过"),n("code",[s._v("process.env.npm_config_params")]),s._v("可以访问其配置值。这个时候的"),n("code",[s._v("params")]),s._v("配置值将覆盖所有其他来源存在的"),n("code",[s._v("params")]),s._v("配置值。")]),s._v(" "),n("h4",{attrs:{id:"env-环境变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#env-环境变量"}},[s._v("#")]),s._v(" env 环境变量")]),s._v(" "),n("p",[s._v("如果"),n("code",[s._v("env")]),s._v("环境变量中存在以"),n("code",[s._v("npm_config_")]),s._v("为前缀的环境变量，则会被识别为"),n("code",[s._v("npm")]),s._v("的配置属性。比如在"),n("code",[s._v("env")]),s._v("环境变量中设置"),n("code",[s._v("npm_config_package_lock")]),s._v("变量：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("npm_config_package_lock")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false // 修改的是内存中的变量，只对当前终端有效\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("这时候执行"),n("code",[s._v("npm install")]),s._v("，"),n("code",[s._v("npm")]),s._v("会从环境变量中读取到这个配置项，从而不会生成"),n("code",[s._v("package-lock.json")]),s._v("文件。")]),s._v(" "),n("blockquote",[n("p",[s._v("查看某个环境变量："),n("code",[s._v("echo $NODE_ENV")]),s._v("\n删除某个环境变量："),n("code",[s._v("unset NODE_ENV")])])]),s._v(" "),n("h4",{attrs:{id:"npmrc-文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npmrc-文件"}},[s._v("#")]),s._v(" npmrc 文件")]),s._v(" "),n("p",[s._v("通过修改 "),n("a",{attrs:{href:"https://docs.npmjs.com/files/npmrc",target:"_blank",rel:"noopener noreferrer"}},[s._v("npmrc"),n("OutboundLink")],1),s._v(" 文件可以直接修改配置。系统中存在多个"),n("code",[s._v("npmrc")]),s._v("文件，这些"),n("code",[s._v("npmrc")]),s._v("文件被访问的优先级从高到低的顺序为：")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("项目级的"),n("code",[s._v(".npmrc")]),s._v("文件")]),s._v(" "),n("p",[s._v("只作用在本项目下。在其他项目中，这些配置不生效。通过创建这个"),n("code",[s._v(".npmrc")]),s._v("文件可以统一团队的"),n("code",[s._v("npm")]),s._v("配置规范。")])]),s._v(" "),n("li",[n("p",[s._v("用户级的"),n("code",[s._v(".npmrc")]),s._v("文件")]),s._v(" "),n("p",[n("code",[s._v("mac")]),s._v("下的地址为"),n("code",[s._v("~/.npmrc")]),s._v("。（"),n("code",[s._v("npm config get userconfig")]),s._v("可以看到存放的路径）")])]),s._v(" "),n("li",[n("p",[s._v("全局级的"),n("code",[s._v("npmrc")]),s._v("文件")]),s._v(" "),n("p",[n("code",[s._v("mac")]),s._v("下的地址为"),n("code",[s._v("$PREFIX/etc/npmrc")]),s._v("。（"),n("code",[s._v("npm config get globalconfig")]),s._v("可以看到存放的路径）")])]),s._v(" "),n("li",[n("p",[n("code",[s._v("npm")]),s._v("内置的"),n("code",[s._v("npmrc")]),s._v("文件")]),s._v(" "),n("p",[s._v("这是一个不可更改的内置配置文件，为了维护者以标准和一致的方式覆盖默认配置。"),n("code",[s._v("mac")]),s._v("下的地址为"),n("code",[s._v("/path/to/npm/npmrc")]),s._v("。")])])]),s._v(" "),n("blockquote",[n("h4",{attrs:{id:"npmrc参照-npm-ini-格式编写。"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npmrc参照-npm-ini-格式编写。"}},[s._v("#")]),s._v(" .npmrc参照 npm/ini 格式编写。")])]),s._v(" "),n("h4",{attrs:{id:"默认配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#默认配置"}},[s._v("#")]),s._v(" 默认配置")]),s._v(" "),n("p",[s._v("通过"),n("code",[s._v("npm config ls -l")]),s._v("查看"),n("code",[s._v("npm")]),s._v("内部的默认配置参数。如果命令行、环境变量、所有配置文件都没有配置参数，则使用默认参数值。")]),s._v(" "),n("h3",{attrs:{id:"npm-config-指令【推荐】"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-config-指令【推荐】"}},[s._v("#")]),s._v(" npm config 指令【推荐】")]),s._v(" "),n("p",[n("code",[s._v("npm")]),s._v("提供了几个 "),n("a",{attrs:{href:"https://docs.npmjs.com/cli/config",target:"_blank",rel:"noopener noreferrer"}},[s._v("npm config"),n("OutboundLink")],1),s._v(" 指令来进行用户级和全局级配置：")]),s._v(" "),n("h4",{attrs:{id:"set"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#set"}},[s._v("#")]),s._v(" set")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("key"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-g"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("--global"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" registry "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("url"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定下载 npm 包的来源，默认为 https://registry.npmjs.org/ ，可以指定私有源")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" prefix "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# prefix 参数指定全局安装的根目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置 prefix 参数后，当再对包进行全局安装时，包会被安装到如下位置：")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Mac 系统：{prefix}/lib/node_modules")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Windows 系统：{prefix}/node_modules")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 把可执行文件链接到如下位置：")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Mac 系统：{prefix}/bin")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Windows 系统：{prefix}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("使用"),n("code",[s._v("-g|--global")]),s._v("标志修改或新增全局级配置，不使用的话修改或者新增用户级配置（相应级别的"),n("code",[s._v(".npmrc")]),s._v("文件会更新）。")]),s._v(" "),n("p",[s._v("如果"),n("code",[s._v("key")]),s._v("不存在，则会新增到配置中。如果省略"),n("code",[s._v("value")]),s._v("，则"),n("code",[s._v("key")]),s._v("会被设置成"),n("code",[s._v("true")]),s._v("。")]),s._v(" "),n("p",[s._v("还可以覆盖"),n("code",[s._v("package.json")]),s._v("中"),n("code",[s._v("config")]),s._v("字段的值：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#package.json")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"foo"')]),s._v(",\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"config"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"port"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8080"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"scripts"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"start"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node server.js"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# server.js")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#console.log(process.env.npm_package_config_port)")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" foo:port "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8000")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打印8000")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h4",{attrs:{id:"get"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#get"}},[s._v("#")]),s._v(" get")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config get "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("key"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config get prefix  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取 npm 的全局安装路径")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("按照配置优先级，获取指定配置项的值。")]),s._v(" "),n("h4",{attrs:{id:"delete"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#delete"}},[s._v("#")]),s._v(" delete")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config delete "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("key"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("code",[s._v("npm")]),s._v("官网上说可以删除所有配置文件中指定的配置项，但经实验无法删除项目级的"),n("code",[s._v(".npmrc")]),s._v("文件里指定的配置项。")]),s._v(" "),n("h4",{attrs:{id:"list"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#list"}},[s._v("#")]),s._v(" list")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config list "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-l"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--json"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("加上"),n("code",[s._v("-l")]),s._v("或者"),n("code",[s._v("--json")]),s._v("查看所有的配置项，包括默认的配置项。不加的话，不能查看默认的配置项。")]),s._v(" "),n("h4",{attrs:{id:"edit"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#edit"}},[s._v("#")]),s._v(" edit")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config edit "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-g"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("--global"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("在编辑器中打开配置文件。使用"),n("code",[s._v("-g|--global")]),s._v("标志编辑全局级配置和默认配置，不使用的话编辑用户级配置和默认配置。")]),s._v(" "),n("blockquote",[n("p",[s._v("参考 "),n("a",{attrs:{href:"https://docs.npmjs.com/misc/config",target:"_blank",rel:"noopener noreferrer"}},[s._v("npm config"),n("OutboundLink")],1),s._v(" 来获取更多的默认配置。")])]),s._v(" "),n("h2",{attrs:{id:"npx命令行开发方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npx命令行开发方式"}},[s._v("#")]),s._v(" npx命令行开发方式")]),s._v(" "),n("p",[s._v("npm 从5.2版开始，增加了 npx 命令，react-native也在0.61版本文档中推荐使用npx来创建项目。")]),s._v(" "),n("h4",{attrs:{id:"作用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#作用"}},[s._v("#")]),s._v(" 作用")]),s._v(" "),n("ul",[n("li",[s._v("运行的时候，会到node_modules/.bin路径和环境变量$PATH里面，检查命令是否存在。")]),s._v(" "),n("li",[s._v("npx 还能避免全局安装的模块，npx 将包下载到一个临时目录，使用以后再删除。比如我们想启动一个web服务，只需在根目录下npx http-server。")]),s._v(" "),n("li",[s._v("可以指定某个版本的 Node 运行脚本。某些场景下，这个方法用来切换 Node 版本，要比 nvm 那样的版本管理器方便一些。")]),s._v(" "),n("li",[s._v("npx 还可以执行 GitHub 上面的模块源码。")])]),s._v(" "),n("h2",{attrs:{id:"npm-工程管理【推荐】"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-工程管理【推荐】"}},[s._v("#")]),s._v(" npm 工程管理【推荐】")]),s._v(" "),n("h3",{attrs:{id:"项目版本号管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#项目版本号管理"}},[s._v("#")]),s._v(" 项目版本号管理")]),s._v(" "),n("p",[n("code",[s._v("package.json")]),s._v("中的"),n("code",[s._v("version")]),s._v("字段代表的是该项目的版本号。每当项目发布新版本时，需要将"),n("code",[s._v("version")]),s._v("字段进行相应的更新以便后期维护。虽然可以手动的修改"),n("code",[s._v("vsersion")]),s._v("字段，但是为了整个发布过程的自动化，尽量使用 "),n("a",{attrs:{href:"https://docs.npmjs.com/cli/version",target:"_blank",rel:"noopener noreferrer"}},[s._v("npm version"),n("OutboundLink")],1),s._v(" 指令来自动更新"),n("code",[s._v("version")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" version "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("v"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),s._v(".3  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示设置版本号为 1.2.3 ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" version major  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 大版本号加 1，其余版本号归 0")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" version minor  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 小版本号加 1，修订号归 0")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" version patch  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修订号加 1")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("blockquote",[n("p",[s._v("显示的设置版本号时，版本号必须符合"),n("code",[s._v("semver")]),s._v("规范，允许在版本号前加上个"),n("code",[s._v("v")]),s._v("标识。")])]),s._v(" "),n("p",[s._v("如果不想让此次更新正式发布，还可以创建预发布版本：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前版本号为 1.2.3")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" version prepatch  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 版本号变为 1.2.4-0，也就是 1.2.4 版本的第一个预发布版本")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" version preminor  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 版本号变为 1.3.0-0，也就是 1.3.0 版本的第一个预发布版本")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" version premajor  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 版本号变为 2.0.0-0，也就是 2.0.0 版本的第一个预发布版本")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" version prerelease  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 版本号变为 2.0.0-1，也就是使预发布版本号加一")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[n("strong",[s._v("在"),n("code",[s._v("git")]),s._v("环境中，执行"),n("code",[s._v("npm version")]),s._v("修改完版本号以后，还会默认执行"),n("code",[s._v("git add")]),s._v("->"),n("code",[s._v("git commit")]),s._v("->"),n("code",[s._v("git tag")]),s._v("操作")]),s._v("：")]),s._v(" "),n("p",[n("img",{attrs:{src:e(590),alt:"img"}})]),s._v(" "),n("p",[s._v("其中"),n("code",[s._v("commit message")]),s._v("默认是自动修改完的版本号，可以通过添加"),n("code",[s._v("-m/--message")]),s._v("选项来自定义"),n("code",[s._v("commit message")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" version xxx -m "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"upgrade to %s for reasons"')]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# %s 会自动替换为新版本号")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("比如执行"),n("code",[s._v('npm version minor -m "feat(version): upgrade to %s for reasons"')]),s._v("后：")]),s._v(" "),n("p",[n("img",{attrs:{src:e(591),alt:"img"}})]),s._v(" "),n("p",[s._v("如果"),n("code",[s._v("git")]),s._v("工作区还有未提交的修改，"),n("code",[s._v("npm version")]),s._v("将会执行失败，可以加上"),n("code",[s._v("-f/--force")]),s._v("后缀来强制执行。")]),s._v(" "),n("p",[s._v("如果不想让"),n("code",[s._v("npm version")]),s._v("指令影响你的"),n("code",[s._v("git")]),s._v("仓库，可以在指令中使用"),n("code",[s._v("--no-git-tag-version")]),s._v("参数：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" --no-git-tag-version version xxx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("如果想默认不影响你的"),n("code",[s._v("git")]),s._v("仓库，可以在"),n("code",[s._v("npm")]),s._v("设置中禁止：【要点】")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" git-tag-version "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不自动打 tag")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" commit-hooks "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不自动 commit")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"模块-tag-管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#模块-tag-管理"}},[s._v("#")]),s._v(" 模块 tag 管理")]),s._v(" "),n("p",[s._v("不经常发布包的同学可能对模块 "),n("a",{attrs:{href:"https://docs.npmjs.com/cli/dist-tag",target:"_blank",rel:"noopener noreferrer"}},[s._v("tag"),n("OutboundLink")],1),s._v(" 概念不是很清楚。以"),n("code",[s._v("vue")]),s._v("为例，首先执行"),n("code",[s._v("npm dist-tag ls vue")]),s._v("查看"),n("code",[s._v("vue")]),s._v("包的"),n("code",[s._v("tag")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("beta: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.6")]),s._v(".0-beta.3\ncsp: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v(".28-csp\nlatest: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.6")]),s._v(".10\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("上面列出的"),n("code",[s._v("beta")]),s._v("、"),n("code",[s._v("csp")]),s._v("、"),n("code",[s._v("latest")]),s._v("就是"),n("code",[s._v("tag")]),s._v("。每个"),n("code",[s._v("tag")]),s._v("对应了一个版本。")]),s._v(" "),n("p",[s._v("那"),n("code",[s._v("tag")]),s._v("到底有什么用呢？"),n("strong",[n("code",[s._v("tag")]),s._v("类似于"),n("code",[s._v("git")]),s._v("里面分支的概念，发布者可以在指定的"),n("code",[s._v("tag")]),s._v("上发布版本，而使用者可以选择指定的"),n("code",[s._v("tag")]),s._v("来安装包。不同的标签下的版本之间互不影响，这在发布者发布预发布版本包和使用者尝鲜预发布版本包的同时，不影响到正式版本")]),s._v("。")]),s._v(" "),n("p",[s._v("**在发布包的时候执行"),n("code",[s._v("npm publish")]),s._v("默认会打上"),n("code",[s._v("latest")]),s._v("这个"),n("code",[s._v("tag")]),s._v("，实际上是执行了"),n("code",[s._v("npm publish --tag latest")]),s._v("。**而在安装包的时候执行"),n("code",[s._v("npm install xxx")]),s._v("则会默认下载"),n("code",[s._v("latest")]),s._v("这个"),n("code",[s._v("tag")]),s._v("下面的最新版本，实际上是执行了"),n("code",[s._v("npm install xxx@latest")]),s._v("。当然，我们也可以自定义"),n("code",[s._v("tag")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前版本为1.0.1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" version prerelease  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1.0.2-0")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish --tag beta\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" dist-tag "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" xxx  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# # beta: 1.0.2-0")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" xxx@beta  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载beta版本 1.0.2-0")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("当"),n("code",[s._v("prerelease")]),s._v("版本已经稳定了，可以将"),n("code",[s._v("prerelease")]),s._v("版本设置为稳定版本：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" dist-tag "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" xxx@1.0.2-0 latest\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" dist-tag "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" xxx  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# latest: 1.0.2-0")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"域级包管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#域级包管理"}},[s._v("#")]),s._v(" 域级包管理")]),s._v(" "),n("p",[s._v("细心的同学会发现，在"),n("code",[s._v("package.json")]),s._v("中的依赖有两种形式：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"devDependencies"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@commitlint/cli"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^7.2.1"')]),s._v(",\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"commitizen"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^3.0.4"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("其中以"),n("code",[s._v("@")]),s._v("开头的包名，是一个域级包（"),n("a",{attrs:{href:"https://docs.npmjs.com/misc/scope#publishing-public-scoped-packages-to-the-public-npm-registry",target:"_blank",rel:"noopener noreferrer"}},[s._v("scoped package"),n("OutboundLink")],1),s._v("），这种域级包的作用是"),n("strong",[s._v("将一些"),n("code",[s._v("packages")]),s._v("集中在一个命名空间下，一方面可以集中管理，一方面可以防止与别的包产生命名冲突。")])]),s._v(" "),n("p",[s._v("要发布域级包，"),n("strong",[s._v("首先要在项目的"),n("code",[s._v("package.json")]),s._v("的"),n("code",[s._v("name")]),s._v("属性中添加"),n("code",[s._v("scope")]),s._v("相关的声明，可以通过指令添加：")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init --scope"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("scopeName -y\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("code",[s._v("package.json")]),s._v("变为：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@scopeName/package"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("blockquote",[n("p",[s._v("可以将用户名作为域名，也可以将组织名作为域名。")])]),s._v(" "),n("p",[s._v("由于用"),n("code",[s._v("@")]),s._v("声明了该包，"),n("code",[s._v("npm")]),s._v("会默认将此包认定为私有包，而在"),n("code",[s._v("npm")]),s._v("上托管私有包是需要收费的，所以为了避免发布私有包，可以在发布时添加"),n("code",[s._v("--accss=public")]),s._v("参数告知"),n("code",[s._v("npm")]),s._v("这不是一个私有包：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish --access"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#  "private": false,')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("blockquote",[n("p",[s._v("域级包不一定就是私有包，但是私有包一定是一个域级包。")])]),s._v(" "),n("p",[s._v("同时，在安装域级包时需要按照域级包全名来安装：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" @scopeName/package\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"node-modules-目录结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#node-modules-目录结构"}},[s._v("#")]),s._v(" node_modules 目录结构")]),s._v(" "),n("p",[s._v("一个项目开发、上线所依赖的插件包都存放在"),n("code",[s._v("node_modules")]),s._v("中。虽然在实际开发中无需关注这个目录里面的文件结构细节，但了解"),n("code",[s._v("node_modules")]),s._v("中的内容可以帮助我们更好的理解"),n("code",[s._v("npm")]),s._v("组织这些文件的机制。")]),s._v(" "),n("p",[s._v("假设项目"),n("code",[s._v("App")]),s._v("中有如下三个依赖：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    A"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    B"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    C"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[n("code",[s._v("A")]),s._v("、"),n("code",[s._v("B")]),s._v("、"),n("code",[s._v("C")]),s._v("三个模块又有如下依赖：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("A@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" -> D@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nB@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" -> D@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nC@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" -> D@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"npm-2-x-嵌套结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-2-x-嵌套结构"}},[s._v("#")]),s._v(" npm 2.x - 嵌套结构")]),s._v(" "),n("p",[n("code",[s._v("npm 2.x")]),s._v("安装依赖方式比较简单直接，以递归的方式，按照包依赖的树形结构下载填充本地目录结构，也就是说每个包都会将该包的依赖安装到当前包所在的"),n("code",[s._v("node_modules")]),s._v("目录中。")]),s._v(" "),n("p",[s._v("执行"),n("code",[s._v("npm install")]),s._v("后，项目"),n("code",[s._v("App")]),s._v("的"),n("code",[s._v("node_modules")]),s._v("会变成如下目录结构：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("├── node_modules\n│   ├── A@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   │   └── node_modules\n│   │   │   └── D@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   ├── B@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   │   └── node_modules\n│   │   │   └── D@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   └── C@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   │   └── node_modules\n│   │   │   └── D@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("很显然这样的依赖组织结构，有如下优点：")]),s._v(" "),n("ul",[n("li",[s._v("层级结构明显")]),s._v(" "),n("li",[s._v("简单的实现了多版本兼容")]),s._v(" "),n("li",[s._v("保证了对依赖包无论是安装还是删除都会有统一的行为和结构")])]),s._v(" "),n("p",[s._v("但是缺点也一样很明显：")]),s._v(" "),n("ul",[n("li",[s._v("可能造成相同模块大量冗余问题")]),s._v(" "),n("li",[s._v("可能造成目录结构嵌套比较深的问题")])]),s._v(" "),n("h3",{attrs:{id:"npm-3-x-扁平结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-3-x-扁平结构"}},[s._v("#")]),s._v(" npm 3.x - 扁平结构")]),s._v(" "),n("p",[n("code",[s._v("npm 3.x")]),s._v("则采用了扁平化的结构来安装组织"),n("code",[s._v("node_modules")]),s._v("。也就是在执行"),n("code",[s._v("npm install")]),s._v("的时候，按照"),n("code",[s._v("package.json")]),s._v(" 里依赖的顺序依次解析，"),n("strong",[s._v("遇到新的包就把它安装在第一级目录，后续安装如果遇到一级目录已经存在的包，会先按照约定版本判断版本，如果符合版本约定则忽略，否则会按照"),n("code",[s._v("npm 2.x")]),s._v("的方式依次挂在依赖包目录下")]),s._v("。")]),s._v(" "),n("p",[s._v("还以项目"),n("code",[s._v("App")]),s._v("为例，在"),n("code",[s._v("npm 3.x")]),s._v("环境下，执行"),n("code",[s._v("npm install")]),s._v("后，"),n("code",[s._v("node_modules")]),s._v("会变成如下目录结构：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("├── node_modules\n│   ├── A@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   ├── D@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   ├── B@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   │   └── node_modules\n│   │   │   └── D@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   └── C@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("blockquote",[n("p",[s._v("模块的安装次序决定了"),n("code",[s._v("node_modules")]),s._v("中的目录结构，"),n("code",[s._v("npm")]),s._v("会优先将模块安装在根目录下的"),n("code",[s._v("node_modules")]),s._v("中。")])]),s._v(" "),n("p",[s._v("再在项目中安装模块"),n("code",[s._v("E@1.0.0")]),s._v("（依赖于模块"),n("code",[s._v("D@2.0.0")]),s._v("），目录结构变为：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("├── node_modules\n│   ├── A@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   ├── D@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   ├── B@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   │   └── node_modules\n│   │   │   └── D@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   └── C@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   ├── E@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   │   └── node_modules\n│   │   │   └── D@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[n("code",[s._v("B")]),s._v("、"),n("code",[s._v("E")]),s._v("模块下都包含了依赖的模块"),n("code",[s._v("D@2.0.0")]),s._v("，存在代码冗余的情况。")]),s._v(" "),n("p",[s._v("再在项目中安装模块"),n("code",[s._v("F@1.0.0")]),s._v("（依赖于模块"),n("code",[s._v("D@1.0.0")]),s._v("）。由于"),n("code",[s._v("D@1.0.0")]),s._v("已经存在于项目根目录下的"),n("code",[s._v("node_modules")]),s._v(" 下，所以在安装"),n("code",[s._v("F")]),s._v("模块的时候，无需再在其依赖包中安装"),n("code",[s._v("D@1.0.0")]),s._v("模块，目录结构变为：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("├── node_modules\n│   ├── A@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   ├── D@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   ├── B@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   │   └── node_modules\n│   │   │   └── D@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   └── C@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   ├── E@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   │   └── node_modules\n│   │   │   └── D@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n│   └── F@"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("从以上结构可以看出，"),n("code",[s._v("npm 3.x")]),s._v("并没有完美的解决"),n("code",[s._v("npm 2.x")]),s._v("中的问题，甚至还会退化到"),n("code",[s._v("npm 2.x")]),s._v("的行为。")]),s._v(" "),n("p",[s._v("为了解决目录中存在很多副本的情况，（在"),n("code",[s._v("A")]),s._v("、"),n("code",[s._v("C")]),s._v("模块的依赖模块"),n("code",[s._v("D")]),s._v("升级到"),n("code",[s._v("2.0.0")]),s._v("前提下）"),n("strong",[s._v("可以通过"),n("code",[s._v("npm dedupe")]),s._v("指令把所有二级的依赖模块"),n("code",[s._v("D@2.0.0")]),s._v("重定向到一级目录下")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("├── node_modules\n│   ├── A@1.0.0\n│   ├── D@2.0.0\n│   ├── B@1.0.0\n│   └── C@1.0.0\n│   ├── E@1.0.0\n│   └── F@1.0.0\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("blockquote",[n("p",[s._v("node_modules路径查找机制："),n("strong",[s._v("模块再找对应的依赖包时，"),n("code",[s._v("nodejs")]),s._v("会尝试从当前模块所在目录开始，尝试在它的"),n("code",[s._v("node_modules")]),s._v(" 文件夹里加载相应模块，如果没有找到，那么就再向上一级目录移动，直到全局安装路径中的"),n("code",[s._v("node_modules")]),s._v("为止。")])])]),s._v(" "),n("h3",{attrs:{id:"npm-5-x-package-lock-json"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-5-x-package-lock-json"}},[s._v("#")]),s._v(" npm 5.x - package-lock.json")]),s._v(" "),n("p",[s._v("从"),n("code",[s._v("npm 5.x")]),s._v("开始，"),n("strong",[s._v("安装组织"),n("code",[s._v("node_modules")]),s._v("和"),n("code",[s._v("npm 3.x")]),s._v("一样采用了扁平化的方式，最大的变化是增加了 "),n("a",{attrs:{href:"https://docs.npmjs.com/files/package-lock.json",target:"_blank",rel:"noopener noreferrer"}},[s._v("package-lock.json"),n("OutboundLink")],1),s._v(" 文件。")])]),s._v(" "),n("p",[n("code",[s._v("npm")]),s._v("为了让开发者"),n("strong",[s._v("在安全的前提下使用最新的依赖包")]),s._v("，在"),n("code",[s._v("package.json")]),s._v("中通常做了锁定大版本的操作，这样在每次"),n("code",[s._v("npm install")]),s._v("的时候都会拉取依赖包大版本下的最新的版本。"),n("strong",[s._v("这种机制最大的一个缺点就是当有依赖包有小版本更新时，可能会出现协同开发者的依赖包不一致的问题。")])]),s._v(" "),n("p",[n("code",[s._v("package-lock.json")]),s._v("文件精确描述了"),n("code",[s._v("node_modules")]),s._v(" 目录下所有的包的树状依赖结构，每个包的版本号都是完全精确的。")]),s._v(" "),n("p",[s._v("以"),n("code",[s._v("sass-loader")]),s._v("在"),n("code",[s._v("package-lock.json")]),s._v("中为例：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"sass-loader"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7.1.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"resolved"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://registry.npm.taobao.org/sass-loader/download/sass-loader-7.1.0.tgz"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"integrity"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha1-Fv1ROMuLQkv4p1lSihly1yqtBp0="')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dev"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"requires"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"clone-deep"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^2.0.1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"loader-utils"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^1.0.1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lodash.tail"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^4.1.1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"neo-async"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^2.5.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"pify"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^3.0.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"semver"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^5.5.0"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"pify"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3.0.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"resolved"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://registry.npm.taobao.org/pify/download/pify-3.0.0.tgz"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"integrity"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha1-5aSs0sEB/fPZpNB/DbxNtJ3SgXY="')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dev"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("p",[n("code",[s._v("package-lock.json")]),s._v("的详细描述主要由"),n("code",[s._v("version")]),s._v("、"),n("code",[s._v("resolved")]),s._v("、"),n("code",[s._v("integrity")]),s._v("、"),n("code",[s._v("dev")]),s._v("、"),n("code",[s._v("requires")]),s._v("、"),n("code",[s._v("dependencies")]),s._v("这几个字段构成：")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("version")]),s._v("：包唯一的版本号")]),s._v(" "),n("li",[n("code",[s._v("resolved")]),s._v("：安装源")]),s._v(" "),n("li",[n("code",[s._v("integrity")]),s._v("：表明包完整性的hash值（验证包是否已失效）")]),s._v(" "),n("li",[n("code",[s._v("dev")]),s._v("：如果为true，则此依赖关系仅是顶级模块的开发依赖关系或者是一个的传递依赖关系")]),s._v(" "),n("li",[n("code",[s._v("requires")]),s._v("：依赖包所需要的所有依赖项，对应依赖包"),n("code",[s._v("package.json")]),s._v("里"),n("code",[s._v("dependencies")]),s._v("中的依赖项")]),s._v(" "),n("li",[n("code",[s._v("dependencies")]),s._v("：依赖包"),n("code",[s._v("node_modules")]),s._v("中依赖的包，与顶层的"),n("code",[s._v("dependencies")]),s._v("一样的结构")])]),s._v(" "),n("p",[s._v("在上面的"),n("code",[s._v("package-lock.json")]),s._v("文件中可以发现，在"),n("code",[s._v("requires")]),s._v("和"),n("code",[s._v("dependencies")]),s._v("中都存在"),n("code",[s._v("pify")]),s._v("依赖项。那我们顺便去"),n("code",[s._v("node_modules")]),s._v("里面探下究竟：")]),s._v(" "),n("ol",[n("li",[s._v("打开根目录的"),n("code",[s._v("node_modules")]),s._v("会发现安装了"),n("code",[s._v("sass-loader")]),s._v("所需要的所有依赖包，这些依赖包中除了"),n("code",[s._v("pify")]),s._v("以外，所有依赖包的大版本号都与"),n("code",[s._v("sass-loader")]),s._v("所需要的一致。")]),s._v(" "),n("li",[s._v("到根目录的"),n("code",[s._v("node_modules")]),s._v("找到"),n("code",[s._v("pify")]),s._v("依赖包，发现版本为"),n("code",[s._v("4.0.1")]),s._v("。")]),s._v(" "),n("li",[s._v("找到"),n("code",[s._v("sass-loader")]),s._v("项目依赖包，打开其"),n("code",[s._v("node_modules")]),s._v("发现其中也存在个"),n("code",[s._v("pify")]),s._v("依赖包，但版本为"),n("code",[s._v("3.0.0")]),s._v("。这个版本的"),n("code",[s._v("sass-loader")]),s._v("真正依赖的是这个版本的"),n("code",[s._v("pify")]),s._v("。")])]),s._v(" "),n("p",[s._v("通过以上几个步骤，说明"),n("code",[s._v("package-lock.json")]),s._v("文件和"),n("code",[s._v("node_modules")]),s._v("目录结构是一一对应的，即项目目录下存在"),n("code",[s._v("package-lock.json")]),s._v("可以让每次安装生成的依赖目录结构保持相同。")]),s._v(" "),n("h4",{attrs:{id:"package-lock-json版本管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#package-lock-json版本管理"}},[s._v("#")]),s._v(" "),n("code",[s._v("package-lock.json")]),s._v("版本管理")]),s._v(" "),n("p",[s._v("在开发一个应用时，建议把"),n("code",[s._v("package-lock.json")]),s._v("文件提交到代码版本仓库，从而让你的团队成员、运维部署人员或"),n("code",[s._v("CI")]),s._v("系统可以在执行"),n("code",[s._v("npm install")]),s._v("时安装的依赖版本都是一致的。")]),s._v(" "),n("p",[s._v("但是在开发一个库时，则不应把"),n("code",[s._v("package-lock.json")]),s._v("文件发布到仓库中。实际上，"),n("code",[s._v("npm")]),s._v("也默认不会把"),n("code",[s._v("package-lock.json")]),s._v("文件发布出去。之所以这么做，是因为库项目一般是被其他项目依赖的，在不写死的情况下，就可以复用主项目已经加载过的包，而一旦库依赖的是精确的版本号那么可能会造成包的冗余。")]),s._v(" "),n("h2",{attrs:{id:"npm-中的依赖包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-中的依赖包"}},[s._v("#")]),s._v(" npm 中的依赖包")]),s._v(" "),n("h3",{attrs:{id:"依赖包分类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#依赖包分类"}},[s._v("#")]),s._v(" 依赖包分类")]),s._v(" "),n("p",[s._v("在 "),n("code",[s._v("node")]),s._v(" 中其实总共有5种依赖：")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("dependencies - 业务依赖")])]),s._v(" "),n("li",[n("strong",[s._v("devDependencies - 开发依赖")])]),s._v(" "),n("li",[n("strong",[s._v("peerDependencies - 同伴依赖")])]),s._v(" "),n("li",[n("strong",[s._v("bundledDependencies / bundleDependencies - 打包依赖")])]),s._v(" "),n("li",[n("strong",[s._v("optionalDependencies - 可选依赖")])])]),s._v(" "),n("p",[s._v("作为"),n("code",[s._v("npm")]),s._v("的使用者，我们"),n("strong",[s._v("常用的依赖是"),n("code",[s._v("dependencies")]),s._v("和"),n("code",[s._v("devDependencies")]),s._v("，剩下三种依赖则是作为包的发布者才会使用到的字段")]),s._v("。")]),s._v(" "),n("h4",{attrs:{id:"配置规则"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置规则"}},[s._v("#")]),s._v(" 配置规则")]),s._v(" "),n("p",[s._v("在介绍几种依赖配置之前，首先我们来看一下依赖的配置规则，你看到的依赖包配置可能是下面这样的：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v(" "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"antd"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ant-design/ant-design#4.0.0-alpha.8"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"axios"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^1.2.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test-js"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"file:../test"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test2-js"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://cdn.com/test2-js.tar.gz"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"core-js"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^1.1.5"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("依赖配置遵循下面几种配置规则：")]),s._v(" "),n("ul",[n("li",[n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("依赖包名称:VERSION\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[n("code",[s._v("VERSION")]),s._v("是一个遵循"),n("code",[s._v("SemVer")]),s._v("规范的版本号配置，"),n("code",[s._v("npm install")]),s._v(" 时将到npm服务器下载符合指定版本范围的包。")])])]),s._v(" "),n("li",[n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("依赖包名称:DWONLOAD_URL\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[n("code",[s._v("DWONLOAD_URL")]),s._v(" 是一个可下载的"),n("code",[s._v("tarball")]),s._v("压缩包地址，模块安装时会将这个"),n("code",[s._v(".tar")]),s._v("下载并安装到本地。")])])]),s._v(" "),n("li",[n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("依赖包名称:LOCAL_PATH\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[n("code",[s._v("LOCAL_PATH")]),s._v(" 是一个本地的依赖包路径，例如 "),n("code",[s._v("file:../pacakges/pkgName")]),s._v("。适用于你在本地测试一个"),n("code",[s._v("npm")]),s._v("包，不应该将这种方法应用于线上。")])])]),s._v(" "),n("li",[n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("依赖包名称:GITHUB_URL\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[n("code",[s._v("GITHUB_URL")]),s._v(" 即 "),n("code",[s._v("github")]),s._v(" 的 "),n("code",[s._v("username/modulename")]),s._v(" 的写法，例如："),n("code",[s._v("ant-design/ant-design")]),s._v("，你还可以在后面指定 "),n("code",[s._v("tag")]),s._v(" 和 "),n("code",[s._v("commit id")]),s._v("。")])])]),s._v(" "),n("li",[n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("依赖包名称:GIT_URL\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[n("code",[s._v("GIT_URL")]),s._v(" 即我们平时clone代码库的 "),n("code",[s._v("git url")]),s._v("，其遵循以下形式：")])])])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<protocol>://[<user>[:<password>]@]<hostname>[:<port>][:][/]<path>[#<commit-ish> | #semver:<semver>]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("其中 "),n("code",[s._v("protocal")]),s._v(" 可以是以下几种形式：")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("git://github.com/user/project.git#commit-ish")])]),s._v(" "),n("li",[n("code",[s._v("git+ssh://user@hostname:project.git#commit-ish")])]),s._v(" "),n("li",[n("code",[s._v("git+ssh://user@hostname/project.git#commit-ish")])]),s._v(" "),n("li",[n("code",[s._v("git+http://user@hostname/project/blah.git#commit-ish")])]),s._v(" "),n("li",[n("code",[s._v("git+https://user@hostname/project/blah.git#commit-ish")])])]),s._v(" "),n("p",[s._v("比如：")]),s._v(" "),n("p",[s._v("pkg配置的三种方式")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"bdpcloud"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"file:../bdp-cloud-react"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"bdpcloud"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git+ssh://git@gitlab.xxx.com:xx-bdp/bdp-cloud-react.git#V6.5.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"bdpcloud"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^6.0.0-alpha.11"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("单独安装依赖")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -S bdpcloud@git+ssh://git+ssh://git@gitlab.xxx.com:xx-bdp/bdp-cloud-react.git"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#V6.5.0")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h4",{attrs:{id:"dependencies"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dependencies"}},[s._v("#")]),s._v(" "),n("strong",[s._v("dependencies")])]),s._v(" "),n("p",[s._v("这种依赖在项目最终上线或者发布"),n("code",[s._v("npm")]),s._v("包时所需要，即其中的依赖项应该属于线上代码的一部分。比如框架"),n("code",[s._v("vue")]),s._v("，第三方的组件库"),n("code",[s._v("element-ui")]),s._v("等，这些依赖包都是必须装在这个选项里供生产环境使用。")]),s._v(" "),n("p",[s._v("通过命令"),n("code",[s._v("npm install/i packageName -S/--save")]),s._v("把包装在此依赖项里。如果没有指定版本，直接写一个包的名字，则安装当前npm仓库中这个包的最新版本。如果要指定版本的，可以把版本号写在包名后面，比如"),n("code",[s._v("npm i vue@3.0.1 -S")]),s._v("。")]),s._v(" "),n("blockquote",[n("p",[s._v("从"),n("code",[s._v("npm 5.x")]),s._v("开始，"),n("strong",[s._v("可以不用手动添加"),n("code",[s._v("-S/--save")]),s._v("指令，直接执行"),n("code",[s._v("npm i packageName")]),s._v("把依赖包添加到"),n("code",[s._v("dependencies")]),s._v("中去。")])])]),s._v(" "),n("h4",{attrs:{id:"devdependencies"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#devdependencies"}},[s._v("#")]),s._v(" "),n("strong",[s._v("devDependencies")])]),s._v(" "),n("p",[s._v("这种依赖只在项目开发时所需要，即其中的依赖项不应该属于线上代码的一部分。比如构建工具"),n("code",[s._v("webpack")]),s._v("、"),n("code",[s._v("gulp")]),s._v("，预处理器"),n("code",[s._v("babel-loader")]),s._v("、"),n("code",[s._v("scss-loader")]),s._v("，测试工具"),n("code",[s._v("e2e")]),s._v("、"),n("code",[s._v("chai")]),s._v("等，这些都是辅助开发的工具包，无须在生产环境使用。")]),s._v(" "),n("p",[s._v("通过命令"),n("code",[s._v("npm install/i -D/--save-dev")]),s._v("把包安装成开发依赖。如果想缩减安装包，可以使用命令"),n("code",[s._v("npm i --production")]),s._v("忽略开发依赖，只安装基本依赖，这通常在线上机器（或者"),n("code",[s._v("QA")]),s._v("环境）上使用。")]),s._v(" "),n("blockquote",[n("p",[n("strong",[s._v("千万别以为只有在"),n("code",[s._v("dependencies")]),s._v("中的模块才会被一起打包，而在"),n("code",[s._v("devDependencies")]),s._v("中的不会！模块能否被打包，取决于项目里是否被引入了该模块！")])])]),s._v(" "),n("p",[s._v("在业务项目中"),n("code",[s._v("dependencies")]),s._v("和"),n("code",[s._v("devDependencies")]),s._v("没有什么本质区别，只是单纯的一个规范作用，在执行"),n("code",[s._v("npm i")]),s._v("时两个依赖下的模块都会被下载；而在发布"),n("code",[s._v("npm")]),s._v("包的时候，包中的"),n("code",[s._v("dependencies")]),s._v("依赖项在安装该包的时候会被一起下载，"),n("code",[s._v("devDependencies")]),s._v("依赖项则不会。")]),s._v(" "),n("h4",{attrs:{id:"peerdependencies"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#peerdependencies"}},[s._v("#")]),s._v(" "),n("strong",[s._v("peerDependencies")])]),s._v(" "),n("p",[s._v("这种依赖的作用是"),n("strong",[s._v("提示宿主环境去安装插件在"),n("code",[s._v("peerDependencies")]),s._v("中所指定依赖的包，然后插件所依赖的包永远都是宿主环境统一安装的"),n("code",[s._v("npm")]),s._v("包，最终解决插件与所依赖包不一致的问题。")])]),s._v(" "),n("p",[s._v("这句话听起来可能有点拗口，举个例子来给大家说明下。"),n("code",[s._v("element-ui@2.6.3")]),s._v("只是提供一套基于"),n("code",[s._v("vue")]),s._v("的"),n("code",[s._v("ui")]),s._v("组件库，但它要求宿主环境需要安装指定的"),n("code",[s._v("vue")]),s._v("版本，所以你可以看到"),n("code",[s._v("element")]),s._v("项目中的"),n("code",[s._v("package.json")]),s._v("中具有一项配置：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"peerDependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"vue"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^2.5.16"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("它要求宿主环境安装"),n("code",[s._v("3.0.0 > vue@ >= 2.5.16")]),s._v("的版本，也就是"),n("code",[s._v("element-ui")]),s._v("的运行依赖宿主环境提供的该版本范围的"),n("code",[s._v("vue")]),s._v("依赖包。")]),s._v(" "),n("p",[s._v("在安装插件的时候，"),n("code",[s._v("peerDependencies")]),s._v("在"),n("code",[s._v("npm 2.x")]),s._v("和"),n("code",[s._v("npm 3.x")]),s._v("中表现不一样：")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("在"),n("code",[s._v("npm 2.x")]),s._v("中，安装包中"),n("code",[s._v("peerDependencies")]),s._v("所指定的依赖会随着"),n("code",[s._v("npm install packageName")]),s._v("一起被强制安装，并且"),n("code",[s._v("peerDependencies")]),s._v("中指定的依赖会安装在宿主环境中，所以不需要在宿主环境的"),n("code",[s._v("package.json")]),s._v("文件中指定对所安装包中"),n("code",[s._v("peerDependencies")]),s._v("内容的依赖。")])]),s._v(" "),n("li",[n("p",[s._v("在"),n("code",[s._v("npm 3.x")]),s._v("中，不会再要求"),n("code",[s._v("peerDependencies")]),s._v("所指定的依赖包被强制安装，"),n("code",[s._v("npm 3.x")]),s._v("只会在安装结束后检查本次安装是否正确，如果不正确会给用户打印警告提示，比如提示用户有的包必须安装或者有的包版本不对等。")]),s._v(" "),n("blockquote",[n("p",[s._v("大白话：如果你安装我，那么你最好也要按照我的要求安装A、B和C。")])])])]),s._v(" "),n("h4",{attrs:{id:"optionaldependencies"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#optionaldependencies"}},[s._v("#")]),s._v(" "),n("strong",[s._v("optionalDependencies")])]),s._v(" "),n("p",[s._v("某些场景下，依赖包可能不是强依赖的，这个依赖包的功能可有可无，当这个依赖包无法被获取到时，你希望 "),n("code",[s._v("npm install")]),s._v(" 继续运行，而不会导致失败，你可以将这个依赖放到 "),n("code",[s._v("optionalDependencies")]),s._v(" 中，注意 "),n("code",[s._v("optionalDependencies")]),s._v(" 中的配置将会覆盖掉 "),n("code",[s._v("dependencies")]),s._v(" 所以只需在一个地方进行配置。")]),s._v(" "),n("p",[s._v("当然，引用 "),n("code",[s._v("optionalDependencies")]),s._v(" 中安装的依赖时，一定要做好异常处理，否则在模块获取不到时会导致报错。")]),s._v(" "),n("p",[s._v("这种依赖中的依赖项即使安装失败了，也不影响整个安装的过程。需要注意的是，如果一个依赖同时出现在"),n("code",[s._v("dependencies")]),s._v("和"),n("code",[s._v("optionalDependencies")]),s._v("中，那么"),n("code",[s._v("optionalDependencies")]),s._v("会获得更高的优先级，可能造成一些预期之外的效果，所以尽量要避免这种情况发生。")]),s._v(" "),n("blockquote",[n("p",[s._v("在实际项目中，如果某个包已经失效，我们通常会寻找它的替代者，或者换一个实现方案。不确定的依赖会增加代码判断和测试难度，所以这个依赖项还是尽量不要使用。")])]),s._v(" "),n("h4",{attrs:{id:"bundleddependencies-bundledependencies"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#bundleddependencies-bundledependencies"}},[s._v("#")]),s._v(" "),n("strong",[s._v("bundledDependencies / bundleDependencies")])]),s._v(" "),n("p",[s._v("和以上几个不同，"),n("code",[s._v("bundledDependencies")]),s._v(" 的值是一个数组，数组里可以指定一些模块，这些模块将在这个包发布时被一起打包。")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"bundledDependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"package1"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"package2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("这种依赖跟"),n("code",[s._v("npm pack")]),s._v("打包命令有关。假设"),n("code",[s._v("package.json")]),s._v("中有如下配置：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"font-end"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"fe1"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^0.3.2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    ...\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"devDependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    ...\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"fe2"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^1.0.0"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"bundledDependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fe1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fe2"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[s._v("执行打包命令"),n("code",[s._v("npm pack")]),s._v("，会生成"),n("code",[s._v("front-end-1.0.0.tgz")]),s._v("压缩包，并且该压缩包中包含"),n("code",[s._v("fe1")]),s._v("和"),n("code",[s._v("fe2")]),s._v("两个安装包，这样使用者执行"),n("code",[s._v("npm install front-end-1.0.0.tgz")]),s._v("也会安装这两个依赖。")]),s._v(" "),n("blockquote",[n("p",[n("strong",[s._v("在"),n("code",[s._v("bundledDependencies")]),s._v("中指定的依赖包，必须先在"),n("code",[s._v("dependencies")]),s._v("和"),n("code",[s._v("devDependencies")]),s._v("声明过，否则打包会报错。")])])]),s._v(" "),n("h3",{attrs:{id:"依赖包版本号"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#依赖包版本号"}},[s._v("#")]),s._v(" 依赖包版本号")]),s._v(" "),n("p",[n("code",[s._v("npm")]),s._v("采用了"),n("code",[s._v("semver")]),s._v("规范作为依赖版本管理方案。")]),s._v(" "),n("p",[s._v("按照"),n("code",[s._v("semver")]),s._v("的约定，一个"),n("code",[s._v("npm")]),s._v("依赖包的版本格式一般为："),n("strong",[s._v("主版本号.次版本号.修订号")]),s._v("（"),n("code",[s._v("x.y.z")]),s._v("），每个号的含义是：")]),s._v(" "),n("ul",[n("li",[n("p",[n("strong",[s._v("主版本号")]),s._v("（也叫大版本，"),n("code",[s._v("major version")]),s._v("）")]),s._v(" "),n("p",[s._v("大版本的改动很可能是一次颠覆性的改动，也就意味着可能存在与低版本不兼容的"),n("code",[s._v("API")]),s._v("或者用法，（比如 "),n("code",[s._v("vue 2 -> 3")]),s._v(")。")])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("次版本号")]),s._v("（也叫小版本，"),n("code",[s._v("minor version")]),s._v("）")]),s._v(" "),n("p",[s._v("小版本的改动应当兼容同一个大版本内的"),n("code",[s._v("API")]),s._v("和用法，因此应该让开发者无感。所以我们通常只说大版本号，很少会精确到小版本号。")]),s._v(" "),n("blockquote",[n("p",[s._v("如果大版本号是 0 的话，表示软件处于开发初始阶段，一切都可能随时被改变，可能每个小版本之间也会存在不兼容性。所以在选择依赖时，尽量避开大版本号是 0 的包。")])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("修订号")]),s._v("（也叫补丁，"),n("code",[s._v("patch")]),s._v("）")]),s._v(" "),n("p",[s._v("一般用于修复"),n("code",[s._v("bug")]),s._v("或者很细微的变更，也需要保持向前兼容。")])])]),s._v(" "),n("p",[s._v("常见的几个版本格式如下：")]),s._v(" "),n("ul",[n("li",[n("p",[n("strong",[s._v('"1.2.3"')])]),s._v(" "),n("p",[s._v("表示精确版本号。任何其他版本号都不匹配。"),n("strong",[s._v("在一些比较重要的线上项目中，建议使用这种方式锁定版本。")])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v('"^1.2.3"')])]),s._v(" "),n("p",[s._v("表示兼容补丁和小版本更新的版本号。官方的定义是“"),n("strong",[s._v("能够兼容除了最左侧的非 0 版本号之外的其他变化")]),s._v("”(Allows changes that do not modify the left-most non-zero digit in the [major, minor, patch] tuple)。这句话很拗口，举几个例子大家就明白了：")]),s._v(" "),n("div",{staticClass:"language-txt line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('"^1.2.3" 等价于 ">= 1.2.3 < 2.0.0"。即只要最左侧的 "1" 不变，其他都可以改变。所以 "1.2.4", "1.3.0" 都可以兼容。\n\n"^0.2.3" 等价于 ">= 0.2.3 < 0.3.0"。因为最左侧的是 "0"，那么只要第二位 "2" 不变，其他的都兼容，比如 "0.2.4" 和 "0.2.99"。\n\n"^0.0.3" 等价于 ">= 0.0.3 < 0.0.4"。大版本号和小版本号都为 "0" ，所以也就等价于精确的 "0.0.3"。\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("从这几个例子可以看出，"),n("code",[s._v("^")]),s._v(" 是一个兼具更新和安全的写法，但是对于大版本号为 1 和 0 的版本还是会有不同的处理机制的。")])]),s._v(" "),n("li",[n("p",[n("strong",[s._v('"~1.2.3"')])]),s._v(" "),n("p",[s._v("表示只兼容补丁更新的版本号。关于 "),n("code",[s._v("~")]),s._v(" 的定义分为两部分："),n("strong",[s._v("如果列出了小版本号（第二位），则只兼容补丁（第三位）的修改；如果没有列出小版本号，则兼容第二和第三位的修改")]),s._v("。我们分两种情况理解一下这个定义：")]),s._v(" "),n("div",{staticClass:"language-txt line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('"~1.2.3" 列出了小版本号 "2"，因此只兼容第三位的修改，等价于 ">= 1.2.3 < 1.3.0"。\n\n"~1.2" 也列出了小版本号 "2"，因此和上面一样兼容第三位的修改，等价于 ">= 1.2.0 < 1.3.0"。\n\n"~1" 没有列出小版本号，可以兼容第二第三位的修改，因此等价于 ">= 1.0.0 < 2.0.0"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("从这几个例子可以看出，"),n("strong",[n("code",[s._v("~")]),s._v(" 是一个比"),n("code",[s._v("^")]),s._v("更加谨慎安全的写法，而且"),n("code",[s._v("~")]),s._v("并不对大版本号 0 或者 1 区别对待")]),s._v('，所以 "~0.2.3" 与 "~1.2.3" 是相同的算法。当首位是 0 并且列出了第二位的时候，两者是等价的，例如 "~0.2.3" 和 "^0.2.3"。')])]),s._v(" "),n("li",[n("p",[n("strong",[s._v('"1.x" 、"1.X"、1.*"、"1"、"*"')])]),s._v(" "),n("p",[s._v("表示使用通配符的版本号。x、X、* 和 （空） 的含义相同，都表示可以匹配任何内容。具体来说：")]),s._v(" "),n("div",{staticClass:"language-txt line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('"*" 、"x" 或者 （空） 表示可以匹配任何版本。\n\n"1.x", "1.*" 和 "1" 表示匹配主版本号为 "1" 的所有版本，因此等价于 ">= 1.0.0 < 2.0.0"。\n\n"1.2.x", "1.2.*" 和 "1.2" 表示匹配版本号以 "1.2" 开头的所有版本，因此等价于 ">= 1.2.0 < 1.3.0"。\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v('"1.2.3-alpha.1"、"1.2.3-beta.1"、"1.2.3-rc.1"')])]),s._v(" "),n("p",[s._v("带预发布关键词的版本号。先说说几个预发布关键词的定义：")]),s._v(" "),n("div",{staticClass:"language-txt line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("alpha(α)：预览版，或者叫内部测试版；一般不向外部发布，会有很多bug；一般只有测试人员使用。\n\nbeta(β)：测试版，或者叫公开测试版；这个阶段的版本会一直加入新的功能；在alpha版之后推出。\n\nrc(release candidate)：最终测试版本；可能成为最终产品的候选版本，如果未出现问题则可发布成为正式版本。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v('以包开发者的角度来考虑这个问题：假设当前线上版本是 "1.2.3"，如果我作了一些改动需要发布版本 "1.2.4"，但我不想直接上线（因为使用 "~1.2.3" 或者 "^1.2.3" 的用户都会直接静默更新），这就需要使用预发布功能。因此我可能会发布 "1.2.4-alpha.1" 或者 "1.2.4-beta.1" 等等。')]),s._v(" "),n("div",{staticClass:"language-txt line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('">1.2.4-alpha.1"表示接受 "1.2.4-alpha" 版本下所有大于 1 的预发布版本。因此 "1.2.4-alpha.7" 是符合要求的，但 "1.2.4-beta.1" 和 "1.2.5-alpha.2" 都不符合。此外如果是正式版本（不带预发布关键词），只要版本号符合要求即可，不检查预发布版本号，例如 "1.2.5", "1.3.0" 都是认可的。\n\n"~1.2.4-alpha.1" 表示 ">=1.2.4-alpha.1 < 1.3.0"。这样 "1.2.5", "1.2.4-alpha.2" 都符合条件，而 "1.2.5-alpha.1", "1.3.0" 不符合。\n\n"^1.2.4-alpha.1" 表示 ">=1.2.4-alpha.1 < 2.0.0"。这样 "1.2.5", "1.2.4-alpha.2", "1.3.0" 都符合条件，而 "1.2.5-alpha.1", "2.0.0" 不符合。\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])])]),s._v(" "),n("p",[s._v("版本号还有更多的写法，例如范围（"),n("code",[s._v("a - b")]),s._v("），大于等于号（"),n("code",[s._v(">=")]),s._v("），小于等于号（"),n("code",[s._v("<=")]),s._v("），或（"),n("code",[s._v("||")]),s._v("）等等，因为用的不多，这里不再展开。详细的文档可以参见"),n("a",{attrs:{href:"https://semver.org/lang/zh-CN/",target:"_blank",rel:"noopener noreferrer"}},[s._v("语义化版本(semver)"),n("OutboundLink")],1),s._v("。它同时也是一个 "),n("code",[s._v("npm")]),s._v(" 包，可以用来比较两个版本号的大小，以及是否符合要求等。")]),s._v(" "),n("h3",{attrs:{id:"依赖包版本管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#依赖包版本管理"}},[s._v("#")]),s._v(" 依赖包版本管理")]),s._v(" "),n("p",[n("code",[s._v("npm 2.x/3.x")]),s._v("已成为过去式，在"),n("code",[s._v("npm 5.x")]),s._v("以上环境下（版本最好在"),n("code",[s._v("5.6")]),s._v("以上，因为在"),n("code",[s._v("5.0 ~ 5.6")]),s._v("中间对"),n("code",[s._v("package-lock.json")]),s._v("的处理逻辑更新过几个版本，"),n("strong",[n("code",[s._v("5.6")]),s._v("以上才开始稳定")]),s._v("），管理项目中的依赖包版本你应该知道（以"),n("code",[s._v("^")]),s._v("版本为例，其他类型版本参照即可）：")]),s._v(" "),n("ol",[n("li",[s._v("在大版本相同的前提下，如果一个模块在"),n("code",[s._v("package.json")]),s._v("中的小版本要"),n("strong",[s._v("大于")]),n("code",[s._v("package-lock.json")]),s._v("中的小版本，则在执行"),n("code",[s._v("npm install")]),s._v("时，会将该模块更新到大版本下的最新的版本，并将版本号更新至"),n("code",[s._v("package-lock.json")]),s._v("。如果"),n("strong",[s._v("小于")]),s._v("，则被"),n("code",[s._v("package-lock.json")]),s._v("中的版本锁定。")])]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// package-lock.json 中原版本")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"clipboard"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.5.10"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"vue"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2.6.10"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// package.json 中修改版本")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"clipboard"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^1.5.12"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"vue"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^2.5.6"')]),s._v("\n  ...\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 执行完 npm install 后，package-lock.json 中")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"clipboard"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.7.1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 更新到大版本下的最新版本")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"vue"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2.6.10"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 版本没发生改变")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("ul",[n("li",[s._v("如果一个模块在"),n("code",[s._v("package.json")]),s._v("和"),n("code",[s._v("package-lock.json")]),s._v("中的"),n("strong",[s._v("大版本不相同")]),s._v("，则在执行"),n("code",[s._v("npm install")]),s._v("时，都将根据"),n("code",[s._v("package.json")]),s._v("中大版本下的最新版本进行更新，并将版本号更新至"),n("code",[s._v("package-lock.json")]),s._v("。")])]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// package-lock.json 中原版本")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"clipboard"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2.0.4"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// package.json 中修改版本")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"clipboard"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^1.6.1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 执行完npm install后，package-lock.json 中")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"clipboard"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.7.1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 更新到大版本下的最新版本")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("ul",[n("li",[s._v("如果一个模块在"),n("code",[s._v("package.json")]),s._v("中有记录，而在"),n("code",[s._v("package-lock.json")]),s._v("中无记录，执行"),n("code",[s._v("npm install")]),s._v("后，则会在"),n("code",[s._v("package-lock.json")]),s._v("生成该模块的详细记录。同理，一个模块在"),n("code",[s._v("package.json")]),s._v("中无记录，而在"),n("code",[s._v("package-lock.json")]),s._v("中有记录，执行"),n("code",[s._v("npm install")]),s._v("后，则会在"),n("code",[s._v("package-lock.json")]),s._v("删除该模块的详细记录。")]),s._v(" "),n("li",[s._v("如果要更新某个模块大版本下的最新版本（"),n("strong",[s._v("升级小版本号")]),s._v("），请执行如下命令：")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" update packageName "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npm update 只更新顶层模块，而不更新依赖的依赖")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("如果要更新到指定版本号（"),n("strong",[s._v("升级大版本号")]),s._v("），请执行如下命令：")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" packageName@x.x.x\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("卸载某个模块，请执行如下命令：")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" uninstall packageName\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("安装模块的确切版本：")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" packageName -D/S --save-exact  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装的版本号将会是精准的，版本号前面不会出现^~字符")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("通过上述的命令来管理依赖包，"),n("code",[s._v("package.json")]),s._v("和"),n("code",[s._v("package-lock.json")]),s._v("中的版本号都将会随之更新。")]),s._v(" "),n("blockquote",[n("p",[s._v("我们在升级/卸载依赖包的时候，"),n("strong",[s._v("尽量通过命令来实现，避免手动修改"),n("code",[s._v("package.json")]),s._v("中的版本号，尤其不要手动修改"),n("code",[s._v("package-lock.json")]),s._v("。")])])]),s._v(" "),n("h2",{attrs:{id:"npm-scripts-脚本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-scripts-脚本"}},[s._v("#")]),s._v(" npm scripts 脚本")]),s._v(" "),n("p",[n("code",[s._v("package.json")]),s._v("中的 "),n("a",{attrs:{href:"https://docs.npmjs.com/misc/scripts",target:"_blank",rel:"noopener noreferrer"}},[s._v("scripts"),n("OutboundLink")],1),s._v(" 字段可以用来自定义脚本命令，它的每一个属性，对应一段脚本。以"),n("code",[s._v("vue-cli3")]),s._v("为例：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"serve"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service serve"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  ...\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("这样就可以通过"),n("code",[s._v("npm run serve")]),s._v("脚本代替"),n("code",[s._v("vue-cli-service serve")]),s._v("脚本来启动项目，而无需每次敲一遍这么冗长的脚本。")]),s._v(" "),n("blockquote",[n("p",[n("code",[s._v("npm run")]),s._v("是"),n("code",[s._v("npm run-script")]),s._v("的缩写，一般都使用前者，但是后者可以更好地反应这个命令的本质。")])]),s._v(" "),n("h3",{attrs:{id:"工作原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#工作原理"}},[s._v("#")]),s._v(" 工作原理")]),s._v(" "),n("h4",{attrs:{id:"package-json-中的-bin-字段"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#package-json-中的-bin-字段"}},[s._v("#")]),s._v(" package.json 中的 bin 字段")]),s._v(" "),n("p",[n("code",[s._v("package.json")]),s._v("中的字段 "),n("a",{attrs:{href:"https://docs.npmjs.com/files/package.json.html#bin",target:"_blank",rel:"noopener noreferrer"}},[s._v("bin"),n("OutboundLink")],1),s._v(" 表示的是一个"),n("strong",[s._v("可执行文件到指定文件源的映射")]),s._v("。通过"),n("code",[s._v("npm bin")]),s._v("指令显示当前项目的"),n("code",[s._v("bin")]),s._v("目录的路径。例如在"),n("code",[s._v("@vue/cli")]),s._v("的"),n("code",[s._v("package.json")]),s._v("中：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"bin"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"vue"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bin/vue.js"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("如果全局安装"),n("code",[s._v("@vue/cli")]),s._v("的话，"),n("strong",[n("code",[s._v("@vue/cli")]),s._v("源文件会被安装在全局源文件安装目录（"),n("code",[s._v("/user/local/lib/node_modules")]),s._v("）下，而"),n("code",[s._v("npm")]),s._v("会在全局可执行"),n("code",[s._v("bin")]),s._v("文件安装目录（"),n("code",[s._v("/usr/local/bin")]),s._v("）下创建一个指向"),n("code",[s._v("/usr/local/lib/node_modules/@vue/cli/bin/vue.js")]),s._v("文件的名为"),n("code",[s._v("vue")]),s._v("的软链接")]),s._v("，这样就可以直接在终端输入"),n("code",[s._v("vue")]),s._v("来执行相关命令。")]),s._v(" "),n("h4",{attrs:{id:"path-环境变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#path-环境变量"}},[s._v("#")]),s._v(" PATH 环境变量")]),s._v(" "),n("p",[s._v("在"),n("code",[s._v("terminal")]),s._v("中执行命令时，"),n("strong",[s._v("命令会在"),n("code",[s._v("PATH")]),s._v("环境变量里包含的路径中去寻找相同名字的可执行文件")]),s._v("。局部安装的包只在"),n("code",[s._v("./node_modules/.bin")]),s._v("中注册了它们的可执行文件，不会被包含在"),n("code",[s._v("PATH")]),s._v("环境变量中，这个时候在"),n("code",[s._v("terminal")]),s._v("中输入命令将会报无法找到的错误。")]),s._v(" "),n("p",[s._v("那为什么通过"),n("code",[s._v("npm run")]),s._v("可以执行局部安装的命令行包呢？")]),s._v(" "),n("p",[s._v("是因为"),n("strong",[s._v("每当执行"),n("code",[s._v("npm run")]),s._v("时，会自动新建一个"),n("code",[s._v("Shell")]),s._v("，这个 "),n("code",[s._v("Shell")]),s._v("会将当前项目的"),n("code",[s._v("node_modules/.bin")]),s._v("的绝对路径加入到环境变量"),n("code",[s._v("PATH")]),s._v("中，执行结束后，再将环境变量"),n("code",[s._v("PATH")]),s._v("恢复原样")]),s._v("。")]),s._v(" "),n("h3",{attrs:{id:"用法指南"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#用法指南"}},[s._v("#")]),s._v(" 用法指南")]),s._v(" "),n("h4",{attrs:{id:"传入参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#传入参数"}},[s._v("#")]),s._v(" 传入参数")]),s._v(" "),n("p",[s._v("关于"),n("code",[s._v("scripts")]),s._v("中的参数，这里要多说几句。网上有很多不是很准确的说法，经过本人的反复试验，"),n("code",[s._v("node")]),s._v("处理"),n("code",[s._v("scripts")]),s._v("参数其实很简单，比如：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"serve"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service serve"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"serve1"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service --serve1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"serve2"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service -serve2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"serve3"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service serve --mode=dev --mobile -config build/example.js"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[n("strong",[s._v("除了第一个可执行的命令，以空格分割的任何字符串（除了一些shell的语法）都是参数，并且都能通过"),n("code",[s._v("process.argv")]),s._v("属性访问")]),s._v("。")]),s._v(" "),n("blockquote",[n("p",[n("code",[s._v("process.argv")]),s._v("属性返回一个数组，这个数组包含了启动"),n("code",[s._v("node")]),s._v("进程时的命令行参数。第一个元素为启动"),n("code",[s._v("node")]),s._v(" 进程的可执行文件的绝对路径名"),n("a",{attrs:{href:"http://nodejs.cn/api/process.html#process_process_execpath",target:"_blank",rel:"noopener noreferrer"}},[s._v("process.execPath"),n("OutboundLink")],1),s._v("，第二个元素为当前执行的JavaScript文件路径。剩余的元素为其他命令行参数。")])]),s._v(" "),n("p",[s._v("比如执行"),n("code",[s._v("npm run serve3")]),s._v("命令，"),n("code",[s._v("process.argv")]),s._v("的具体内容为：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" '/usr/local/Cellar/node/"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.7")]),s._v(".1_1/bin/node'"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  '/Users/mac/Vue-projects/hao-cli/node_modules/.bin/vue-cli-service'"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  'serve'"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  '--mode=dev'"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  '--mobile'"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  '-config'"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  'build/example.js'"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("我们还可以通过命令行传参的形式来进行参数传递：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run serve --params  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 参数params将转化成process.env.npm_config_params = true")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run serve --params"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 参数params将转化成process.env.npm_config_params = 123")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run serve -params  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 等同于--params参数")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run serve -- --params  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将--params参数添加到process.env.argv数组中")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run serve params  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将params参数添加到process.env.argv数组中")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run serve -- params  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将params参数添加到process.env.argv数组中")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h4",{attrs:{id:"多命令运行"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#多命令运行"}},[s._v("#")]),s._v(" 多命令运行")]),s._v(" "),n("p",[s._v("有的项目在启动时可能需要同时执行多个任务，多个任务的执行顺序决定了项目的表现。")]),s._v(" "),n("h5",{attrs:{id:"串行执行"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#串行执行"}},[s._v("#")]),s._v(" 串行执行")]),s._v(" "),n("p",[s._v("串行执行，要求前一个任务执行成功以后才能执行下一个任务，使用"),n("code",[s._v("&&")]),s._v("符号来连接。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run script1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run script2\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("blockquote",[n("p",[s._v("串行命令执行过程中，只要一个命令执行失败，则整个脚本终止。")])]),s._v(" "),n("h5",{attrs:{id:"并行执行"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#并行执行"}},[s._v("#")]),s._v(" 并行执行")]),s._v(" "),n("p",[s._v("并行执行，就是多个命令可以同时的平行执行，使用"),n("code",[s._v("&")]),s._v("符号来连接。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run script1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run script2\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("这两个符号是"),n("code",[s._v("Bash")]),s._v("的内置功能。此外，还可以使用第三方的任务管理器模块："),n("a",{attrs:{href:"https://github.com/paulpflug/script-runner",target:"_blank",rel:"noopener noreferrer"}},[s._v("script-runner"),n("OutboundLink")],1),s._v("、"),n("a",{attrs:{href:"https://github.com/mysticatea/npm-run-all",target:"_blank",rel:"noopener noreferrer"}},[s._v("npm-run-all"),n("OutboundLink")],1),s._v("、"),n("a",{attrs:{href:"https://github.com/mysticatea/npm-run-all",target:"_blank",rel:"noopener noreferrer"}},[s._v("redrun"),n("OutboundLink")],1),s._v("。")]),s._v(" "),n("h4",{attrs:{id:"env-环境变量-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#env-环境变量-2"}},[s._v("#")]),s._v(" env 环境变量")]),s._v(" "),n("p",[s._v("在执行"),n("code",[s._v("npm run")]),s._v("脚本时，"),n("code",[s._v("npm")]),s._v("会设置一些特殊的"),n("code",[s._v("env")]),s._v("环境变量。其中"),n("code",[s._v("package.json")]),s._v("中的所有字段，都会被设置为以"),n("code",[s._v("npm_package_")]),s._v(" 开头的环境变量。比如"),n("code",[s._v("package.json")]),s._v("中有如下字段内容：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sh"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.1.1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"description"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"shenhao"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"main"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.js"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"repository"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"url"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git+ssh://git@gitlab.com/xxxx/sh.git"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[n("strong",[s._v("可以通过"),n("code",[s._v("process.env.npm_package_name")]),s._v(" 可以获取到"),n("code",[s._v("package.json")]),s._v("中"),n("code",[s._v("name")]),s._v("字段的值"),n("code",[s._v("sh")]),s._v("，也可以通过"),n("code",[s._v("process.env.npm_package_repository_type")]),s._v("获取到嵌套属性"),n("code",[s._v("type")]),s._v("的值"),n("code",[s._v("git")]),s._v("。")])]),s._v(" "),n("p",[s._v("同时，"),n("code",[s._v("npm")]),s._v("相关的所有配置也会被设置为以"),n("code",[s._v("npm_config_")]),s._v("开头的环境变量。")]),s._v(" "),n("p",[s._v("此外，还会设置一个比较特殊的环境变量"),n("code",[s._v("npm_lifecycle_event")]),s._v("，表示正在运行的脚本名称。比如执行"),n("code",[s._v("npm run serve")]),s._v(" 的时候，"),n("code",[s._v("process.env.npm_lifecycle_event")]),s._v("值为"),n("code",[s._v("serve")]),s._v("，通过判断这个变量，可以将一个脚本使用在不同的"),n("code",[s._v("npm scripts")]),s._v("中。")]),s._v(" "),n("blockquote",[n("p",[s._v("这些环境变量只能在"),n("code",[s._v("npm run")]),s._v("的脚本执行环境内拿到，正常执行的"),n("code",[s._v("node")]),s._v("脚本是获取不到的。所以，不能直接通过"),n("code",[s._v("env $npm_package_name")]),s._v("的形式访问，但可以在"),n("code",[s._v("scripts")]),s._v("中定义脚本"),n("code",[s._v('"scripts": {"bundle": "echo $npm_package_name"}')]),s._v("来访问。")])]),s._v(" "),n("h4",{attrs:{id:"指令钩子"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#指令钩子"}},[s._v("#")]),s._v(" 指令钩子")]),s._v(" "),n("p",[n("strong",[s._v("npm 安装相关钩子")])]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"preinstall"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"postinstall"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node node_modules/.bin/bower --allow-root install"')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("strong",[s._v("在执行"),n("code",[s._v("npm scripts")]),s._v("命令（无论是自定义还是内置）时，都经历了"),n("code",[s._v("pre")]),s._v("和"),n("code",[s._v("post")]),s._v("两个钩子，在这两个钩子中可以定义某个命令执行前后的命令。")])]),s._v(" "),n("p",[s._v("比如在执行"),n("code",[s._v("npm run serve")]),s._v("命令时，会依次执行"),n("code",[s._v("npm run preserve")]),s._v("、"),n("code",[s._v("npm run serve")]),s._v("、"),n("code",[s._v("npm run postserve")]),s._v("，所以可以在这两个钩子中自定义一些动作：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"preserve"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxxxx"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"serve"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service serve"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"postserve"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxxxxx"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("当然，如果没有指定"),n("code",[s._v("preserve")]),s._v("、"),n("code",[s._v("postserve")]),s._v("，会默默的跳过。如果想要指定钩子，必须严格按照"),n("code",[s._v("pre")]),s._v("和"),n("code",[s._v("post")]),s._v("前缀来添加。")]),s._v(" "),n("p",[s._v("上面提到过一个环境变量"),n("code",[s._v("process.env.npm_lifecycle_event")]),s._v("可以配合钩子来一起使用：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" event "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("npm_lifecycle_event\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("event "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'preserve'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Running the preserve task!'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("_event "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'serve'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Running the serve task!'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"npm-的几个实用技巧"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-的几个实用技巧"}},[s._v("#")]),s._v(" npm 的几个实用技巧")]),s._v(" "),n("h3",{attrs:{id:"自定义默认的-npm-init"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义默认的-npm-init"}},[s._v("#")]),s._v(" 自定义默认的 npm init")]),s._v(" "),n("p",[s._v("使用"),n("code",[s._v("npm init")]),s._v("初始化一个新的项目时会提示你去填写一些项目描述信息。如果觉得填写这些信息比较麻烦的话，可以使用"),n("code",[s._v("-y")]),s._v("标记表示接受"),n("code",[s._v("package.json")]),s._v("中的一些默认值：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init -y\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("也可以设置初始化的默认值：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" init-author-name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 为npm init设置了默认的作者名，以后执行 npm init 的时候，package.json 的作者姓名字段就会自动写入预设的值。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这些信息会存放在用户主目录的 ~/.npmrc 文件，使得用户不用每个项目都输入。")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"查看-npm-脚本命令【推荐】"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看-npm-脚本命令【推荐】"}},[s._v("#")]),s._v(" 查看 npm 脚本命令【推荐】")]),s._v(" "),n("p",[s._v("查看当前项目的所有"),n("code",[s._v("npm")]),s._v("脚本命令最直接的办法就是打开项目中的"),n("code",[s._v("package.json")]),s._v("文件并检查"),n("code",[s._v("scripts")]),s._v("字段。我们还可以使用不带任何参数的"),n("code",[s._v("npm run")]),s._v("命令查看：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"查看环境变量【推荐】"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看环境变量【推荐】"}},[s._v("#")]),s._v(" 查看环境变量【推荐】")]),s._v(" "),n("p",[s._v("通过"),n("code",[s._v("env")]),s._v("查看当前的所有环境变量，而查看运行时的所有环境变量可以执行：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("MONGODB_HOME=E"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\Program Files\\MongoDB\\Server\\"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.4")]),s._v("\nNODE=E"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\Program Files\\nodejs\\node.exe\nNODE_EXE=E"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\Program Files\\nodejs\\\\node.exe\nNODE_PATH=.;E"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\Program Files\\nodejs\nNPM_CLI_JS=E"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\Program Files\\nodejs\\\\node_modules\\npm\\bin\\npm-cli.js\nnpm_config_access=\nnpm_config_allow_same_version=\nnpm_config_also=\nnpm_config_always_auth=\nnpm_config_argv="),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"remain"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"cooked"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"run"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"env"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"original"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"run"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"env"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nnpm_config_audit="),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nnpm_config_audit_level=low\nnpm_config_auth_type=legacy\nnpm_config_before=\nnpm_config_bin_links="),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nnpm_config_browser=\nnpm_config_ca=\nnpm_config_cache=C"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\Users\\samy\\AppData\\Roaming\\npm-cache\nnpm_config_cache_lock_retries="),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\nnpm_config_cache_lock_stale="),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("60000")]),s._v("\nnpm_config_cache_lock_wait="),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v("\nnpm_config_cache_max=Infinity\nnpm_config_cache_min="),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\nnpm_config_cafile=\nnpm_config_cert=\nnpm_config_cidr=\nnpm_config_color="),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nnpm_config_commit_hooks="),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br")])]),n("h3",{attrs:{id:"模块管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#模块管理"}},[s._v("#")]),s._v(" 模块管理")]),s._v(" "),n("p",[s._v("检查当前项目依赖的所有模块，包括子模块以及子模块的子模块：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" list/ls\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("如果还想查看模块的一些描述信息（"),n("code",[s._v("package.json")]),s._v("中的"),n("code",[s._v("description")]),s._v("中的内容）：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" la/ll // 相当于npm "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" --long\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("一个项目依赖的模块往往很多，可以限制输出模块的层级来查看：【实用】")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" list/ls --depth"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只列出父包依赖的模块")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("检查项目中依赖的某个模块的当前版本信息：【实用】")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" list/ls "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("packageName"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("查看某个模块包的版本信息：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" view/info "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("packageName"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" version // 模块已经发布的最新的版本信息（不包括预发布版本）\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" view/info "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("packageName"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" versions // 模块所有的历史版本信息（包括预发布版本）\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" view/info "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("packageName"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package.json中的key值"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" // 还能查看package.json中字段对应的值\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("查看一个模块到底是因为谁被安装进来的，如果显示为空则表明该模块为内置模块或者不存在：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" ll "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("packageName"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("查看某个模块的所有信息，包括它的依赖、关键字、更新日期、贡献者、仓库地址和许可证等：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" view/info "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("packageName"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("查看当前项目中可升级的模块：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" outdated\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("整理项目中无关的模块：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" prune\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"查看模块文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看模块文档"}},[s._v("#")]),s._v(" 查看模块文档")]),s._v(" "),n("p",[s._v("打开模块的主页：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" home "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("packageName"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("打开模块的代码仓库：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" repo "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("packageName"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("打开模块的文档地址：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" docs "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("packageName"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("打开模块的 issues 地址：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" bugs "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("packageName"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"在不同的目录下运行脚本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#在不同的目录下运行脚本"}},[s._v("#")]),s._v(" 在不同的目录下运行脚本")]),s._v(" "),n("p",[s._v("你的文件夹中肯定存在很多应用程序，而当你想要启动某个应用程序时，肯定是通过"),n("code",[s._v("cd")]),s._v("指令一步步进入到你所想要启动的应用程序目录下，然后再执行启动命令。"),n("code",[s._v("npm")]),s._v("提供了"),n("code",[s._v("--prefix")]),s._v("可以指定启动目录：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run dev --prefix /path/to/your/folder\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"本地开发模块调试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#本地开发模块调试"}},[s._v("#")]),s._v(" 本地开发模块调试")]),s._v(" "),n("ul",[n("li",[s._v("假设你开发的是一个全局命令行模块"),n("code",[s._v("A")]),s._v("，这时候你需要本地调试它，而不希望每次都"),n("code",[s._v("npm publish")]),s._v("模块，然后安装调试。这个时候你可以在模块的目录下执行：")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("上述命令通过链接目录和可执行文件，实现任意位置的"),n("code",[s._v("npm")]),s._v("模块命令的全局可执行。执行完上述命令后，就可以全局调用"),n("code",[s._v("A")]),s._v("命令了。")]),s._v(" "),n("blockquote",[n("p",[n("code",[s._v("npm link")]),s._v("主要做了两件事：")]),s._v(" "),n("ol",[n("li",[s._v("为目标"),n("code",[s._v("npm")]),s._v("模块创建软链接，将其链接到全局"),n("code",[s._v("node")]),s._v("模块安装路径"),n("code",[s._v("/usr/local/lib/node_modules/")]),s._v("。")]),s._v(" "),n("li",[s._v("为目标"),n("code",[s._v("npm")]),s._v("模块的可执行"),n("code",[s._v("bin")]),s._v("文件创建软链接，将其链接到全局"),n("code",[s._v("node")]),s._v("命令安装路径"),n("code",[s._v("/usr/local/bin/")]),s._v("。")])])]),s._v(" "),n("ul",[n("li",[s._v("假设你开发的是一个功能模块"),n("code",[s._v("B")]),s._v("，然后你在项目"),n("code",[s._v("C")]),s._v("中调试它，当然你可以将该模块的代码拷贝到需要项目"),n("code",[s._v("C")]),s._v("中调试，但这也不是理想的方法，可以在项目"),n("code",[s._v("C")]),s._v("的目录下执行：")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目 C 中")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" B\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("strong",[s._v("上述命令为功能模块"),n("code",[s._v("B")]),s._v("创建软链接，将其链接到项目"),n("code",[s._v("C")]),s._v("模块安装路径"),n("code",[s._v("./node_modules/")]),s._v("，等同于生成了本地模块的符号链接。然后，我们就可以在项目"),n("code",[s._v("C")]),s._v("中加载该模块：")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目 C 中")]),s._v("\nconst B "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" require"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'B'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("所有对模块"),n("code",[s._v("B")]),s._v("的修改，都会直接反映在项目"),n("code",[s._v("C")]),s._v("中，为了避免风险，当你的项目不再需要该模块的时候，执行：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目 C 中")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" unlink B\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"安全漏洞检查【要点】"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安全漏洞检查【要点】"}},[s._v("#")]),s._v(" 安全漏洞检查【要点】")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://docs.npmjs.com/auditing-package-dependencies-for-security-vulnerabilities#update-dependent-packages-if-a-fix-exists",target:"_blank",rel:"noopener noreferrer"}},[s._v("检查项目中是否存在具有安全漏洞的依赖包"),n("OutboundLink")],1),s._v("，如果存在，则将生成其漏洞报告显示在控制台中：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm audit [--json]  # 加上--json，以 JSON 格式生成漏洞报告\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("blockquote",[n("p",[n("code",[s._v("npm")]),s._v("升级到"),n("code",[s._v("6.x")]),s._v("版本以后，在项目中更新或者下载新的依赖包以后会自动执行 "),n("a",{attrs:{href:"https://docs.npmjs.com/cli/audit",target:"_blank",rel:"noopener noreferrer"}},[s._v("npm audit"),n("OutboundLink")],1),s._v(" 命令，对项目依赖包进行安全检查，如果存在安全漏洞，将生成漏洞报告并在控制台中显示。")])]),s._v(" "),n("p",[s._v("修复存在安全漏洞的依赖包（自动更新到兼容的安全版本）：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" audit fix\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("执行"),n("code",[s._v("npm audit fix")]),s._v("能修复大部分存在安全漏洞的依赖包，对于一些没能自动修复漏洞的依赖包，说明出现了"),n("code",[s._v("SERVER WARNING")]),s._v("之类的警告（主要发生在依赖包更改了不兼容的"),n("code",[s._v("api")]),s._v("或者大版本做了升级的情况下），这意味着推荐的修复版本还可能出现问题，这时可以执行如下命令来修复这些依赖包：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" audit fix --force\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("blockquote",[n("p",[n("code",[s._v("--force")]),s._v("会将依赖包版本号升级到最新的大版本，而不是兼容的安全版本。大版本的升级可能会出现一些不兼容的用法，所以尽量避免使用"),n("code",[s._v("--force")]),s._v("。")])]),s._v(" "),n("p",[s._v("如果执行"),n("code",[s._v("npm audit fix --force")]),s._v("后还是存在有安全漏洞的依赖包，手动执行"),n("code",[s._v("npm audit")]),s._v("打印出还存在安全漏洞的依赖包的具体信息，其中"),n("code",[s._v("More info")]),s._v("对应的链接中可能给出了解决方案。")]),s._v(" "),n("p",[s._v("如果想知道"),n("code",[s._v("audit fix")]),s._v("会怎么处理项目中的依赖包，可以预先查看：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" audit fix --dry-run --json\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("如果只想修复生产环境的依赖包（只更新"),n("code",[s._v("dependencies")]),s._v("中的依赖包，不更新"),n("code",[s._v("devDependencies")]),s._v("中的依赖包）：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" audit --only"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("prod\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("如果不想修复依赖包，只修改"),n("code",[s._v("package-lock.json")]),s._v("文件：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" audit fix --package-lock-only\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("如果想安装某个包时不进行安全漏洞检查：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" packageName --no-audit\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("要想安装所有包时都不进行安全漏洞检查，则可以修改"),n("code",[s._v("npm")]),s._v("配置：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" audit "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"依赖锁定【要点】"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#依赖锁定【要点】"}},[s._v("#")]),s._v(" 依赖锁定【要点】")]),s._v(" "),n("p",[n("code",[s._v("npm")]),s._v("默认安装模块时，会通过脱字符"),n("code",[s._v("^")]),s._v("来限定所安装模块的主版本号。可以配置"),n("code",[s._v("npm")]),s._v("通过波浪符"),n("code",[s._v("~")]),s._v("来限定安装模块版本号：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" save-prefix"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"~"')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("当然还可以配置"),n("code",[s._v("npm")]),s._v("仅安装精确版本号的模块：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" save-exact "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"相关问题总括"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#相关问题总括"}},[s._v("#")]),s._v(" 相关问题总括")]),s._v(" "),n("h3",{attrs:{id:"no-such-file-or-directory-open-node-modules-staging"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#no-such-file-or-directory-open-node-modules-staging"}},[s._v("#")]),s._v(" no such file or directory, open '/node_modules/.staging/")]),s._v(" "),n("p",[s._v("在使用"),n("code",[s._v("npm")]),s._v("过程中连续产生多行报错")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("no such file or directory, open '/node_modules/.staging/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("strong",[s._v("原因")])]),s._v(" "),n("ul",[n("li",[s._v("可能是用yarn"),n("code",[s._v("和")]),s._v("npm"),n("code",[s._v("冲突了，移除对应的")]),s._v(".lock`文件；")]),s._v(" "),n("li",[n("code",[s._v("npm")]),s._v("版本配置不一致导致，可以尝试重新安装"),n("code",[s._v("npm")]),s._v("解决；")])]),s._v(" "),n("p",[n("strong",[s._v("解决方案")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" cache clean -f "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#或者手动删除npm依赖文件夹 C:\\Users\\samy\\AppData\\Roaming\\npm-cache")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用nvm修改为其他可以对应的node版本 nvm install 10.18.3")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除文件 package-lock.json，再重新执行npm i或者npm install npm install几次下载")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("或者换一种方式yarn")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g yrm\nyrm use taobao/xxx\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"npm-err-code-eintegrity"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-err-code-eintegrity"}},[s._v("#")]),s._v(" npm ERR! code EINTEGRITY")]),s._v(" "),n("p",[s._v("由于这两个错误是使用同个命令然后出现的问题，就一起记录了。\n解决方案：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" cache verify\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#或")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" cache clean\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" cache clean --force\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#npm i -g npm")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#grep -ir "sha1-xxxxxxxxxxxxxxxx" ~/.npm')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("用第一个命令解决的，第二条是我之前也有遇到类似的问题，然后用这条命令解决的。")]),s._v(" "),n("h2",{attrs:{id:"相关链接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#相关链接"}},[s._v("#")]),s._v(" 相关链接")]),s._v(" "),n("p",[s._v("https://juejin.cn/post/6844904022080667661")]),s._v(" "),n("p",[s._v("https://juejin.im/post/6844903870578032647")]),s._v(" "),n("p",[s._v("https://juejin.cn/post/6844904159226003463")])])}),[],!1,null,null,null);a.default=t.exports},590:function(s,a){s.exports="data:image/png;base64,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"},591:function(s,a){s.exports="data:image/png;base64,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"}}]);