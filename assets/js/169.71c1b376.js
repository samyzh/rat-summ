(window.webpackJsonp=window.webpackJsonp||[]).push([[169],{1844:function(t,e,n){"use strict";n.r(e);var _=n(14),v=Object(_.a)({},(function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h2",{attrs:{id:"简介"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),_("p",[t._v("pnpm - 速度快、节省磁盘空间的软件包管理器")]),t._v(" "),_("p",[_("img",{attrs:{src:n(612),alt:"image-20220210203245778"}})]),t._v(" "),_("h2",{attrs:{id:"安装-升级"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#安装-升级"}},[t._v("#")]),t._v(" 安装/升级")]),t._v(" "),_("p",[t._v("通过 npm 安装 pnpm")]),t._v(" "),_("div",{staticClass:"language-sh line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-sh"}},[_("code",[_("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -g "),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v("\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br")])]),_("p",[t._v("通过 npx 安装 pnpm")]),t._v(" "),_("div",{staticClass:"language-sh line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-sh"}},[_("code",[t._v("npx "),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -g "),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v("\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br")])]),_("p",[t._v("一旦安装完 pnpm 之后，就无需使用其它软件包管理器来更新 pnpm 了。 你可以让 pnpm 自己来更新自己，如下所示：")]),t._v(" "),_("div",{staticClass:"language-sh line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-sh"}},[_("code",[_("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -g "),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v("\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br")])]),_("p",[_("strong",[t._v("兼容性")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("Node.js")]),t._v(" "),_("th",[t._v("pnpm 1")]),t._v(" "),_("th",[t._v("pnpm 2")]),t._v(" "),_("th",[t._v("pnpm 3")]),t._v(" "),_("th",[t._v("pnpm 4")]),t._v(" "),_("th",[t._v("pnpm 5")]),t._v(" "),_("th",[t._v("pnpm 6")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("Node.js 4")]),t._v(" "),_("td",[t._v("✔️")]),t._v(" "),_("td",[t._v("❌")]),t._v(" "),_("td",[t._v("❌")]),t._v(" "),_("td",[t._v("❌")]),t._v(" "),_("td",[t._v("❌")]),t._v(" "),_("td",[t._v("❌")])]),t._v(" "),_("tr",[_("td",[t._v("Node.js 6")]),t._v(" "),_("td",[t._v("✔️")]),t._v(" "),_("td",[t._v("✔️")]),t._v(" "),_("td",[t._v("❌")]),t._v(" "),_("td",[t._v("❌")]),t._v(" "),_("td",[t._v("❌")]),t._v(" "),_("td",[t._v("❌")])]),t._v(" "),_("tr",[_("td",[t._v("Node.js 8")]),t._v(" "),_("td",[t._v("✔️")]),t._v(" "),_("td",[t._v("✔️")]),t._v(" "),_("td",[t._v("✔️")]),t._v(" "),_("td",[t._v("❌")]),t._v(" "),_("td",[t._v("❌")]),t._v(" "),_("td",[t._v("❌")])]),t._v(" "),_("tr",[_("td",[t._v("Node.js 10")]),t._v(" "),_("td",[t._v("✔️")]),t._v(" "),_("td",[t._v("✔️")]),t._v(" "),_("td",[t._v("✔️")]),t._v(" "),_("td",[t._v("✔️")]),t._v(" "),_("td",[t._v("✔️")]),t._v(" "),_("td",[t._v("❌")])]),t._v(" "),_("tr",[_("td",[t._v("Node.js 12")]),t._v(" "),_("td",[t._v("❌")]),t._v(" "),_("td",[t._v("❌")]),t._v(" "),_("td",[t._v("✔️")]),t._v(" "),_("td",[t._v("✔️")]),t._v(" "),_("td",[t._v("✔️")]),t._v(" "),_("td",[t._v("✔️")])]),t._v(" "),_("tr",[_("td",[t._v("Node.js 14")]),t._v(" "),_("td",[t._v("❌")]),t._v(" "),_("td",[t._v("❌")]),t._v(" "),_("td",[t._v("✔️")]),t._v(" "),_("td",[t._v("✔️")]),t._v(" "),_("td",[t._v("✔️")]),t._v(" "),_("td",[t._v("✔️")])]),t._v(" "),_("tr",[_("td",[t._v("Node.js 16")]),t._v(" "),_("td",[t._v("?")]),t._v(" "),_("td",[t._v("?")]),t._v(" "),_("td",[t._v("?️")]),t._v(" "),_("td",[t._v("?️")]),t._v(" "),_("td",[t._v("?️")]),t._v(" "),_("td",[t._v("✔️")])])])]),t._v(" "),_("h2",{attrs:{id:"用法"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#用法"}},[t._v("#")]),t._v(" 用法")]),t._v(" "),_("h3",{attrs:{id:"pnpm-cli"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-cli"}},[t._v("#")]),t._v(" pnpm cli")]),t._v(" "),_("h4",{attrs:{id:"与-npm-的差异"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#与-npm-的差异"}},[t._v("#")]),t._v(" 与 npm 的差异")]),t._v(" "),_("p",[t._v("与 npm 不同，pnpm 会验证所有参数。例如，"),_("code",[t._v("pnpm install --target_arch x64")]),t._v(" 将运行 失败，由于 "),_("code",[t._v("--target_arch")]),t._v(" 不是一个有效的 "),_("code",[t._v("pnpm install")]),t._v(" 参数。")]),t._v(" "),_("p",[t._v("但是，某些依赖项可能会使用以 "),_("code",[t._v("npm_config_")]),t._v(" 开头的环境变量，该环境变量 是可以通过 CLI 参数添加的。在这种情况下，假定有如下参数：")]),t._v(" "),_("ol",[_("li",[t._v("直接设置环境变量："),_("code",[t._v("npm_config_target_arch=x64 pnpm install")])]),t._v(" "),_("li",[t._v("利用 "),_("code",[t._v("--config.")]),t._v(" 前缀强制设置参数："),_("code",[t._v("pnpm install --config.target_arch=x64")])])]),t._v(" "),_("h4",{attrs:{id:"参数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),_("p",[_("strong",[t._v("-C "),_("path",[t._v(", --dir <path")])])]),t._v(" "),_("p",[t._v("将 "),_("code",[t._v("<path>")]),t._v(" 设置为 pnpm 的运行目录，而不是当前目录。")]),t._v(" "),_("p",[_("strong",[t._v("-w, --workspace-root")])]),t._v(" "),_("p",[t._v("添加于：v5.6.0 版本")]),t._v(" "),_("p",[t._v("将 "),_("a",{attrs:{href:"https://www.pnpm.cn/workspaces",target:"_blank",rel:"noopener noreferrer"}},[t._v("workspace"),_("OutboundLink")],1),t._v(" 的根目录作为 pnpm 的运行目录，而不是 当前目录。")]),t._v(" "),_("h4",{attrs:{id:"命令"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#命令"}},[t._v("#")]),t._v(" 命令")]),t._v(" "),_("p",[t._v("有关更多信息，请参见各个 CLI 命令的文档。以下 是一个与 npm 等价命令的对照表，帮助你快速入门：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("npm 命令")]),t._v(" "),_("th",[t._v("pnpm 等价命令")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("code",[t._v("npm install")])]),t._v(" "),_("td",[_("a",{attrs:{href:"https://www.pnpm.cn/cli/install",target:"_blank",rel:"noopener noreferrer"}},[_("code",[t._v("pnpm install")]),_("OutboundLink")],1)])]),t._v(" "),_("tr",[_("td",[_("code",[t._v("npm i <pkg>")])]),t._v(" "),_("td",[_("a",{attrs:{href:"https://www.pnpm.cn/cli/add",target:"_blank",rel:"noopener noreferrer"}},[_("code",[t._v("pnpm add")]),_("OutboundLink")],1)])]),t._v(" "),_("tr",[_("td",[_("code",[t._v("npm run <cmd>")])]),t._v(" "),_("td",[_("a",{attrs:{href:"https://www.pnpm.cn/cli/run",target:"_blank",rel:"noopener noreferrer"}},[_("code",[t._v("pnpm")]),_("OutboundLink")],1)])])])]),t._v(" "),_("p",[t._v("当你使用一个未知命令时，pnpm 将会查找和该命令具有相同名称的脚本， 因此，"),_("code",[t._v("pnpm run lint")]),t._v(" 和 "),_("code",[t._v("pnpm lint")]),t._v(" 是一样的。如果没有相同名称的脚本的话， 那么 pnpm 将按照 shell 脚本的形式执行该命令，所以你可以执行类似 "),_("code",[t._v("pnpm eslint")]),t._v(" (see "),_("a",{attrs:{href:"https://www.pnpm.cn/cli/exec",target:"_blank",rel:"noopener noreferrer"}},[t._v("pnpm exec"),_("OutboundLink")],1),t._v(") 指令的命令。")]),t._v(" "),_("h3",{attrs:{id:"pnpx命令"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#pnpx命令"}},[t._v("#")]),t._v(" pnpx命令")]),t._v(" "),_("p",[t._v("此命令已废弃！请使用 "),_("a",{attrs:{href:"https://www.pnpm.cn/cli/exec",target:"_blank",rel:"noopener noreferrer"}},[_("code",[t._v("pnpm exec")]),_("OutboundLink")],1),t._v(" 和 "),_("a",{attrs:{href:"https://www.pnpm.cn/cli/dlx",target:"_blank",rel:"noopener noreferrer"}},[_("code",[t._v("pnpm dlx")]),_("OutboundLink")],1),t._v(" 代替。")]),t._v(" "),_("h4",{attrs:{id:"致新用户"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#致新用户"}},[t._v("#")]),t._v(" 致新用户")]),t._v(" "),_("p",[_("code",[t._v("pnpx")]),t._v(" (PNPm eXecute) 是一种命令行工具，可以从软件包注册表中获取软件包 而不用将其作为依赖项安装，而是热加载该软件包并运行该软件包 所暴露的任何默认的二进制文件。")]),t._v(" "),_("p",[t._v("例如，如需在任何地方都能使用 "),_("code",[t._v("create-react-app")]),t._v(" 来创建 react 应用程序的骨架，并且 不用将其安装在任何项目中，你可以这样：")]),t._v(" "),_("div",{staticClass:"language-sh line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-sh"}},[_("code",[t._v("pnpx create-react-app my-project\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br")])]),_("p",[t._v("上述命令将从软件包注册表中获取 "),_("code",[t._v("create-react-app")]),t._v(" 并用给定的参数运行它。 如需了解更多信息，请参考 npm 中的 "),_("a",{attrs:{href:"https://www.npmjs.com/package/npx",target:"_blank",rel:"noopener noreferrer"}},[t._v("npx"),_("OutboundLink")],1),t._v("，因为这两个命令提供的功能 是一样的，"),_("strong",[t._v("除了 "),_("code",[t._v("pnpx")]),t._v(" 在底层用的是 "),_("code",[t._v("pnpm")]),t._v(" 而不是 "),_("code",[t._v("npm")]),t._v("。")])]),t._v(" "),_("p",[t._v("如果你只是想运行项目依赖项的可执行文件，请参阅 "),_("a",{attrs:{href:"https://www.pnpm.cn/cli/exec",target:"_blank",rel:"noopener noreferrer"}},[_("code",[t._v("pnpm exec")]),_("OutboundLink")],1),t._v("。")]),t._v(" "),_("h4",{attrs:{id:"致-npm-用户"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#致-npm-用户"}},[t._v("#")]),t._v(" 致 npm 用户")]),t._v(" "),_("p",[t._v("npm 有一个很好的软件包运行工具叫做 "),_("a",{attrs:{href:"https://www.npmjs.com/package/npx",target:"_blank",rel:"noopener noreferrer"}},[t._v("npx"),_("OutboundLink")],1),t._v("。pnpm 通过 offers the same tool via the "),_("code",[t._v("pnpx")]),t._v(" 命令提供了相同功能的工具。唯一的区别就是 "),_("code",[t._v("pnpx")]),t._v(" 使用 "),_("code",[t._v("pnpm")]),t._v(" 来安装 软件包。")]),t._v(" "),_("h3",{attrs:{id:"配置"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),_("p",[t._v("pnpm 使用的是 "),_("a",{attrs:{href:"https://docs.npmjs.com/misc/config",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm 的配置"),_("OutboundLink")],1),t._v(" 格式。因此，你应该以 npm 相同的方式来对其进行配置。例如，")]),t._v(" "),_("div",{staticClass:"language-sh line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-sh"}},[_("code",[_("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" config "),_("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" store-dir /path/to/.pnpm-store\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br")])]),_("p",[t._v("如果未配置任何存储，则 pnpm 将在同一硬盘上自动创建一个存储。 如果你需要 pnpm 能够跨多个硬盘或文件系统工作， 请阅读 "),_("a",{attrs:{href:"https://www.pnpm.cn/faq#does-pnpm-work-across-multiple-hard-drives-or-filesystems",target:"_blank",rel:"noopener noreferrer"}},[t._v("FAQ"),_("OutboundLink")],1),t._v("。")]),t._v(" "),_("p",[t._v("此外，载安装依赖项时，pnpm 与 npm 使用相同的配置。 如果你为 npm 配置了一个私有的软件包注册表， pnpm 也能够获得授权请求，并且无需任何额外的 配置。")]),t._v(" "),_("p",[t._v("除了这些参数外，pnpm 还允许你将所有标记（flags）作为参数使用 （例如，"),_("code",[t._v("--filter")]),t._v(" 或 "),_("code",[t._v("--workspace-concurrency")]),t._v("）：")]),t._v(" "),_("div",{staticClass:"language-sh line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-sh"}},[_("code",[t._v("workspace-concurrency "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nfilter "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" @my-scope/*\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br")])]),_("p",[t._v("如需了解更多信息，请参考e "),_("a",{attrs:{href:"https://www.pnpm.cn/cli/config",target:"_blank",rel:"noopener noreferrer"}},[_("code",[t._v("config")]),t._v(" 命令"),_("OutboundLink")],1),t._v("。")]),t._v(" "),_("h2",{attrs:{id:"参考链接"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[t._v("#")]),t._v(" 参考链接")]),t._v(" "),_("p",[t._v("https://www.pnpm.cn/")])])}),[],!1,null,null,null);e.default=v.exports},612:function(t,e,n){t.exports=n.p+"assets/img/image-20220210203245778.3eeeb441.png"}}]);