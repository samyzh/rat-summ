(window.webpackJsonp=window.webpackJsonp||[]).push([[202],{1238:function(s,a,t){s.exports=t.p+"assets/img/image-20211119185121691.e42539e7.png"},2067:function(s,a,t){"use strict";t.r(a);var n=t(14),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"简介"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[s._v("#")]),s._v(" 简介")]),s._v(" "),n("p",[s._v("awk、grep、sed是linux操作文本的三大利器，合称文本三剑客，也是必须掌握的linux命令之一。三者的功能都是处理文本，但侧重点各不相同，其中属awk功能最强大，但也最复杂。")]),s._v(" "),n("ul",[n("li",[s._v("grep更适合单纯的查找或匹配文本，")]),s._v(" "),n("li",[s._v("sed更适合编辑匹配到的文本，")]),s._v(" "),n("li",[s._v("awk更适合格式化文本，对文本进行较复杂格式处理。")])]),s._v(" "),n("p",[n("img",{attrs:{src:t(1238),alt:"image-20211119185121691"}})]),s._v(" "),n("h3",{attrs:{id:"grep"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#grep"}},[s._v("#")]),s._v(" grep")]),s._v(" "),n("p",[s._v("Linux系统中grep命令是一种强大的文本搜索工具，它能使用"),n("strong",[s._v("正则表达式")]),s._v("搜索文本，并把匹配的行打印出来（匹配到的标红）。grep全称是Global Regular Expression Print，表示全局正则表达式版本，它的使用权限是所有用户。")]),s._v(" "),n("p",[s._v("grep的工作方式是这样的，它在一个或多个文件中搜索字符串模板。如果模板包括空格，则必须被引用，模板后的所有字符串被看作文件名。搜索的结果被送到标准输出，不影响原文件内容。")]),s._v(" "),n("p",[s._v("grep可用于shell脚本，因为grep通过返回一个状态值来说明搜索的状态，如果模板搜索成功，则返回0，如果搜索不成功，则返回1，如果搜索的文件不存在，则返回2。我们利用这些返回值就可进行一些自动化的文本处理工作。")]),s._v(" "),n("p",[n("strong",[s._v("egrep = grep -E：扩展的正则表达式")]),s._v(" （除了**< , > , \\b** 使用其他正则都可以去掉\\）")]),s._v(" "),n("h3",{attrs:{id:"sed"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sed"}},[s._v("#")]),s._v(" sed")]),s._v(" "),n("p",[s._v("sed 是一种流编辑器，它一次处理一"),n("strong",[s._v("行")]),s._v("内容。处理时，把当前处理的行存储在临时缓冲区中，称为“"),n("strong",[s._v("模式空间")]),s._v("”（patternspace ），接着用sed 命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。然后读入下行，执行下一个循环。如果没有使诸如‘D’ 的特殊命令，那会在两个循环之间清空模式空间，但不会清空"),n("strong",[s._v("保留空间")]),s._v("。这样不断重复，直到文件末尾。"),n("strong",[s._v("文件内容并没有改变")]),s._v("，除非你使用"),n("strong",[s._v("重定向存储输出或-i")]),s._v("。")]),s._v(" "),n("p",[s._v("功能：主要用来自动编辑一个或多个文件, 简化对文件的反复操作")]),s._v(" "),n("h3",{attrs:{id:"awk"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#awk"}},[s._v("#")]),s._v(" awk")]),s._v(" "),n("p",[s._v("awk是一种编程语言，用于在linux/unix下对文本和数据进行处理。数据可以来自标准输入(stdin)、一个或多个文件，或其它命令的输出。它"),n("strong",[s._v("支持用户自定义函数")]),s._v("和动态正则表达式等先进功能，是linux/unix下的一个强大编程工具。它在命令行中使用，但更多是作为脚本来使用。"),n("strong",[s._v("awk有很多内建的功能")]),s._v("，比如数组、函数等，这是它和C语言的相同之处，灵活性是awk最大的优势。")]),s._v(" "),n("p",[s._v("awk其实不仅仅是工具软件，还是一种编程语言。不过，本文只介绍它的命令行用法，对于大多数场合，应该足够用了。")]),s._v(" "),n("h2",{attrs:{id:"grep命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#grep命令"}},[s._v("#")]),s._v(" grep命令")]),s._v(" "),n("p",[s._v("Linux grep 命令用于查找文件里符合条件的字符串。")]),s._v(" "),n("p",[s._v("grep 指令用于查找内容包含指定的范本样式的文件，如果发现某文件的内容符合所指定的范本样式，预设 grep 指令会把含有范本样式的那一列显示出来。若不指定任何文件名称，或是所给予的文件名为 "),n("strong",[s._v("-")]),s._v("，则 grep 指令会从标准输入设备读取数据。")]),s._v(" "),n("h3",{attrs:{id:"语法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("grep [-abcEFGhHilLnqrsvVwxy][-A<显示行数>][-B<显示列数>][-C<显示列数>][-d<进行动作>][-e<范本样式>][-f<范本文件>][--help][范本样式][文件或目录...]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("strong",[s._v("参数")]),s._v("：")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("-a 或 --text")]),s._v(" : 不要忽略二进制的数据。")]),s._v(" "),n("li",[n("strong",[s._v("-A<显示行数> 或 --after-context=<显示行数>")]),s._v(" : 除了显示符合范本样式的那一列之外，并显示该行之后的内容。")]),s._v(" "),n("li",[n("strong",[s._v("-b 或 --byte-offset")]),s._v(" : 在显示符合样式的那一行之前，标示出该行第一个字符的编号。")]),s._v(" "),n("li",[n("strong",[s._v("-B<显示行数> 或 --before-context=<显示行数>")]),s._v(" : 除了显示符合样式的那一行之外，并显示该行之前的内容。")]),s._v(" "),n("li",[n("strong",[s._v("-c 或 --count")]),s._v(" : 计算符合样式的列数。")]),s._v(" "),n("li",[n("strong",[s._v("-C<显示行数> 或 --context=<显示行数>或-<显示行数>")]),s._v(" : 除了显示符合样式的那一行之外，并显示该行之前后的内容。")]),s._v(" "),n("li",[n("strong",[s._v("-d <动作> 或 --directories=<动作>")]),s._v(" : 当指定要查找的是目录而非文件时，必须使用这项参数，否则grep指令将回报信息并停止动作。")]),s._v(" "),n("li",[n("strong",[s._v("-e<范本样式> 或 --regexp=<范本样式>")]),s._v(" : 指定字符串做为查找文件内容的样式。")]),s._v(" "),n("li",[n("strong",[s._v("-E 或 --extended-regexp")]),s._v(" : 将样式为延伸的正则表达式来使用。")]),s._v(" "),n("li",[n("strong",[s._v("-f<规则文件> 或 --file=<规则文件>")]),s._v(" : 指定规则文件，其内容含有一个或多个规则样式，让grep查找符合规则条件的文件内容，格式为每行一个规则样式。")]),s._v(" "),n("li",[n("strong",[s._v("-F 或 --fixed-regexp")]),s._v(" : 将样式视为固定字符串的列表。")]),s._v(" "),n("li",[n("strong",[s._v("-G 或 --basic-regexp")]),s._v(" : 将样式视为普通的表示法来使用。")]),s._v(" "),n("li",[n("strong",[s._v("-h 或 --no-filename")]),s._v(" : 在显示符合样式的那一行之前，不标示该行所属的文件名称。")]),s._v(" "),n("li",[n("strong",[s._v("-H 或 --with-filename")]),s._v(" : 在显示符合样式的那一行之前，表示该行所属的文件名称。")]),s._v(" "),n("li",[n("strong",[s._v("-i 或 --ignore-case")]),s._v(" : 忽略字符大小写的差别。")]),s._v(" "),n("li",[n("strong",[s._v("-l 或 --file-with-matches")]),s._v(" : 列出文件内容符合指定的样式的文件名称。")]),s._v(" "),n("li",[n("strong",[s._v("-L 或 --files-without-match")]),s._v(" : 列出文件内容不符合指定的样式的文件名称。")]),s._v(" "),n("li",[n("strong",[s._v("-n 或 --line-number")]),s._v(" : 在显示符合样式的那一行之前，标示出该行的列数编号。")]),s._v(" "),n("li",[n("strong",[s._v("-o 或 --only-matching")]),s._v(" : 只显示匹配PATTERN 部分。")]),s._v(" "),n("li",[n("strong",[s._v("-q 或 --quiet或--silent")]),s._v(" : 不显示任何信息。")]),s._v(" "),n("li",[n("strong",[s._v("-r 或 --recursive")]),s._v(' : 此参数的效果和指定"-d recurse"参数相同。')]),s._v(" "),n("li",[n("strong",[s._v("-s 或 --no-messages")]),s._v(" : 不显示错误信息。")]),s._v(" "),n("li",[n("strong",[s._v("-v 或 --invert-match")]),s._v(" : 显示"),n("strong",[s._v("不包含匹配文本的所有行")]),s._v("。")]),s._v(" "),n("li",[n("strong",[s._v("-V 或 --version")]),s._v(" : 显示版本信息。")]),s._v(" "),n("li",[n("strong",[s._v("-w 或 --word-regexp")]),s._v(" : 只显示全字符合的列。")]),s._v(" "),n("li",[n("strong",[s._v("-x --line-regexp")]),s._v(" : 只显示全列符合的列。")]),s._v(" "),n("li",[n("strong",[s._v("-y")]),s._v(' : 此参数的效果和指定"-i"参数相同。')])]),s._v(" "),n("h3",{attrs:{id:"实例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[s._v("#")]),s._v(" 实例")]),s._v(" "),n("p",[s._v("1、在当前目录中，查找后缀有 file 字样的文件中包含 test 字符串的文件，并打印出该字符串的行。此时，可以使用如下命令：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" *file \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("结果如下所示：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" test* "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查找前缀有“test”的文件包含“test”字符串的文件  ")]),s._v("\ntestfile1:This a Linux testfile"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#列出testfile1 文件中包含test字符的行  ")]),s._v("\ntestfile_2:This is a linux testfile"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#列出testfile_2 文件中包含test字符的行  ")]),s._v("\ntestfile_2:Linux "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#列出testfile_2 文件中包含test字符的行 ")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v('2、以递归的方式查找符合条件的文件。例如，查找指定目录/etc/acpi 及其子目录（如果存在子目录的话）下所有文件中包含字符串"update"的文件，并打印出该字符串所在行的内容，使用的命令为：')]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -r update /etc/acpi \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("输出结果如下：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -r update /etc/acpi "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#以递归的方式查找“etc/acpi”  ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#下包含“update”的文件  ")]),s._v("\n/etc/acpi/ac.d/85-anacron.sh:"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# (Things like the slocate updatedb cause a lot of IO.)  ")]),s._v("\nRather than  \n/etc/acpi/resume.d/85-anacron.sh:"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# (Things like the slocate updatedb cause a lot of  ")]),s._v("\nIO."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" Rather than  \n/etc/acpi/events/thinkpad-cmos:action"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/sbin/thinkpad-keys--update \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v('3、反向查找。前面各个例子是查找并打印出符合条件的行，通过"-v"参数可以打印出不符合条件行的内容。')]),s._v(" "),n("p",[s._v("查找文件名中包含 test 的文件中不包含test 的行，此时，使用的命令为：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -v "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" *test*\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("结果如下所示：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("$ grep-v test* "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查找文件名中包含test 的文件中不包含test 的行  ")]),s._v("\ntestfile1:helLinux"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("  \ntestfile1:Linis a "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v(" Unix-type operating system.  \ntestfile1:Lin  \ntestfile_1:HELLO LINUX"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("  \ntestfile_1:LINUX IS A FREE UNIX-TYPE OPTERATING SYSTEM.  \ntestfile_1:THIS IS A LINUX TESTFILE"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("  \ntestfile_2:HELLO LINUX"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("  \ntestfile_2:Linux is a "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v(" unix-type opterating system.  \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h2",{attrs:{id:"sed命令【要点】"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sed命令【要点】"}},[s._v("#")]),s._v(" sed命令【要点】")]),s._v(" "),n("h3",{attrs:{id:"简介语法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#简介语法"}},[s._v("#")]),s._v(" 简介语法")]),s._v(" "),n("p",[s._v("使用sed命令替换匹配行； 替换文件中部分字段重写；")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sed [-hnV][-e<script>][-f<script文件>][文本文件]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("strong",[s._v("参数说明")]),s._v("：")]),s._v(" "),n("ul",[n("li",[s._v("-e"),n("code",[s._v("<script>")]),s._v("或--expression="),n("code",[s._v("<script>")]),s._v(" 以选项中指定的script来处理输入的文本文件。")]),s._v(" "),n("li",[s._v("-f<script文件>或--file=<script文件> 以选项中指定的script文件来处理输入的文本文件。")]),s._v(" "),n("li",[s._v("-h或--help 显示帮助。")]),s._v(" "),n("li",[s._v("-n或--quiet或--silent 仅显示script处理后的结果。")]),s._v(" "),n("li",[s._v("-V或--version 显示版本信息。")])]),s._v(" "),n("p",[n("strong",[s._v("动作说明")]),s._v("：")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("a ：新增， a 的后面可以接字串，而这些字串会在新的一行出现(目前的下一行)～")])]),s._v(" "),n("li",[s._v("c ：取代， c 的后面可以接字串，这些字串可以取代 n1,n2 之间的行！")]),s._v(" "),n("li",[s._v("d ：删除，因为是删除啊，所以 d 后面通常不接任何咚咚；")]),s._v(" "),n("li",[n("strong",[s._v("i ：插入， i 的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)；")])]),s._v(" "),n("li",[s._v("p ：打印，亦即将某个选择的数据印出。通常 p 会与参数 sed -n 一起运行～")]),s._v(" "),n("li",[n("strong",[s._v("s ：替换取代，可以直接进行取代的工作哩！通常这个 s 的动作可以搭配正规表示法！例如 1,20s/old/new/g 就是啦！")])])]),s._v(" "),n("p",[s._v("示范：")]),s._v(" "),n("p",[n("strong",[s._v("文本直接替换")])]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#把skip-grant-tables 变成 #skip-grant-tables")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s/\\(skip-grant-tables\\).*/#skip-grant-tables/"')]),s._v(" /etc/my.cnf\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#时区America/Los_Angeles变成Asia/Shanghai时区")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s/Asia\\/Shanghai/America\\/Los_Angeles/"')]),s._v(" app/utils/date-utils.js\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[n("strong",[s._v("去除字符串中的空格")])]),s._v(" "),n("ul",[n("li",[s._v("字符 's' 表示替换；")]),s._v(" "),n("li",[n("strong",[s._v("字符 '/' 表示作为分隔符；")])]),s._v(" "),n("li",[s._v("字符 '^' 表示开头；")]),s._v(" "),n("li",[s._v("字符 '$' 表示结尾；")]),s._v(" "),n("li",[s._v("字符 '[ ]' 表示匹配指定字符范围内的任意单个字符，[ ]包含一个空格；")]),s._v(" "),n("li",[s._v("字符 '*' 作为通配符，匹配0个或任意多个；")]),s._v(" "),n("li",[s._v("字符 'g’ 表示全部匹配；")])]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("var")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'    aa  bb  '")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("var}")]),s._v('"')]),s._v("　　"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 12 其中，${#var}表示获取字符串的长度")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#表示使用空字符匹配**行首为空格**的字符串；")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" ‘s/^"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("*//g\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#去除行尾空格")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("var2")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${var}")]),s._v('"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/[ ]*$//g'")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("var2}")]),s._v('"')]),s._v("# "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#去除所有空格")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("var3")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${var}")]),s._v('"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/[[:space:]]//g'")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("var3}")]),s._v('"')]),s._v("# "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[n("strong",[s._v("其他相关")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("在定位行前面插入字符2")]),s._v(" "),n("p",[n("code",[s._v("sed -i ‘/字符/i\\字符2‘ file")])])]),s._v(" "),n("li",[n("p",[s._v("在定位行后插入字符2")]),s._v(" "),n("p",[n("code",[s._v("sed -i ‘/字符/a\\字符2’ file")])])]),s._v(" "),n("li",[n("p",[s._v("查找包含字符的行，并且把A替换为B")]),s._v(" "),n("p",[n("code",[s._v("sed -i ‘/字符/s/A/B/g’ file")])])]),s._v(" "),n("li",[n("p",[s._v("把A替换为B")]),s._v(" "),n("p",[n("code",[s._v("sed -i ‘s/A/B/g’")])])]),s._v(" "),n("li",[n("p",[s._v("删除括号(替换括号为空)")]),s._v(" "),n("p",[n("code",[s._v("sed ‘s’[()]//g’")])])]),s._v(" "),n("li",[n("p",[s._v("把所有的大写转化为小写")]),s._v(" "),n("p",[n("code",[s._v("sed ‘s/[A-Z]/\\l&/g’")])]),s._v(" "),n("p",[s._v("\\l在sed中是转换后面的字符为小写")]),s._v(" "),n("p",[s._v("&代指匹配的模式")])]),s._v(" "),n("li",[n("p",[s._v("将 test.txt 内每一行结尾若为 . 则换成 !")]),s._v(" "),n("p",[n("code",[s._v('sed -i "" "s/\\.$/\\!/g" test.txt')])])])]),s._v(" "),n("h3",{attrs:{id:"单-双引号替换"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#单-双引号替换"}},[s._v("#")]),s._v(" 单/双引号替换")]),s._v(" "),n("p",[s._v("在shell中， 使用sed进行替换的时候，因为替换命令本身就是在引号中的，所以书写的时候，就需要注意书写的格式，这里总结几种写法。简单的是 "),n("code",[s._v("echo \"this is''' test\\\" string\" | sed $'s/\\'//g'")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# shell中使用sed替换单引号")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"this is''' test"),n("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v(' string"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" $"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/\\'//g'")]),s._v("\nthis is "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('" string\n\n# shell中使用sed替换双引号\necho "')]),s._v("this is"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("' test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v('" string'),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\" | sed $'s/"),n("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("//g'\nthis is''' test string\n\n# shell中使用sed替换双引号和单引号\necho \"")]),s._v("this is"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("' test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v('" string'),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('" | sed "')]),s._v("s/"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("'"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v('"'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("//g"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\nthis is test string\n\n# shell中使用sed替换双引号和单引号\necho "')]),s._v("this is"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("' test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v('" string'),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('" | sed "')]),s._v("s/"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("x27"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("x22"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("//g"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\nthis is test string\n\n# shell中使用sed替换双引号和单引号\necho "')]),s._v("this is"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("' test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v('" string" '),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" $"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/[\\'"),n("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("]//g'")]),s._v("\nthis is "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" string\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("h3",{attrs:{id:"结合说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#结合说明"}},[s._v("#")]),s._v(" 结合说明")]),s._v(" "),n("blockquote",[n("h4",{attrs:{id:"将test-txt文件内的以1开头的行-替换为-aa-bb"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#将test-txt文件内的以1开头的行-替换为-aa-bb"}},[s._v("#")]),s._v(" 将"),n("code",[s._v("test.txt")]),s._v("文件内的以"),n("code",[s._v("1")]),s._v('开头的行，替换为"aa/bb"')])]),s._v(" "),n("p",[n("code",[s._v('sed -i ".bak" "s/1.*/aa\\/bb/" test.txt')])]),s._v(" "),n("ul",[n("li",[n("p",[n("code",[s._v('-i ".bak"')]),s._v('是直接操作文件并添加.bak作为备份文件名称，如果不需要备份文件，则使用-i "";')])]),s._v(" "),n("li",[n("p",[n("code",[s._v("/s")]),s._v("代表’“substitue”,即替换;")])]),s._v(" "),n("li",[n("p",[n("code",[s._v("1.*")]),s._v(" 代表以1开头的所有字符串，."),n("em",[s._v("在正则表达式中表示所有字符;")])])]),s._v(" "),n("li",[n("p",[n("code",[s._v("aa\\/bb")]),s._v("使用了转义字符表示aa/bb;")])]),s._v(" "),n("li",[n("p",[s._v("注意最后还需要一个分界符/，否则会提示unterminated substitute in regular expression;")])]),s._v(" "),n("li",[n("p",[s._v("分界符/也可使用|，那么特殊符号就不需要转义字符了，命令就变成：\n"),n("code",[s._v('sed -i ".bak" "s|1.*|aa/bb|" test.txt')])])]),s._v(" "),n("li",[n("p",[s._v("如果需要在文件中替换多个相同的字符串，需要添加global参数g，即:")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('".bak"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s/1.*/aa\\/bb/g"')]),s._v(" test.txt\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#或者")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('".bak"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s|1.*|aa/bb|g"')]),s._v(" test.txt\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])])])]),s._v(" "),n("blockquote",[n("h4",{attrs:{id:"以hello字符串为主-包含大写类型-一行多个hello等情况"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#以hello字符串为主-包含大写类型-一行多个hello等情况"}},[s._v("#")]),s._v(" 以hello字符串为主，包含大写类型，一行多个hello等情况")])]),s._v(" "),n("ul",[n("li",[n("p",[n("code",[s._v("sed (-l) 's/old_text/new_text/(g)' [file]")]),s._v(": 输出文件[file]中每行第1个old_text替换成new_text的结果，最后加g表示替换所有匹配；")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("➜  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -l "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/hello/hi/'")]),s._v(" hello.txt\nhi world\nhi boys\nshe is saying hi\nhi hello\nHELLO everyone\n➜  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/hello/hi/'")]),s._v(" hello.txt\nhi world\nhi boys\nshe is saying hi\nhi hello\nHELLO everyone\n➜  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/hello/hi/g'")]),s._v(" hello.txt\nhi world\nhi boys\nshe is saying hi\nhi hi\nHELLO everyone\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])])]),s._v(" "),n("li",[n("p",[n("code",[s._v("sed -i \"\" 's/old_text/new_text/' [file]")]),s._v("： 替换字符串并写入文件；")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("➜  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/hello/hi/'")]),s._v(" hello.txt\n➜  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" hello.txt\nhi world\nhi boys\nshe is saying hi\nhi hello    --"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("由于未加g参数，所以第二个hello未替换\nHELLO everyone\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])])]),s._v(" "),n("li",[n("p",[n("code",[s._v("sed -e 's/old_text1/new_text1/' -e 's/old_text2/new_text2/' [file]")]),s._v(": 对文件[file]内容将old_text1替换成new_text1或将old_text2替换成new_text2；")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("➜  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/boys/men/'")]),s._v(" -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/she/he/'")]),s._v(" hello.txt\nhi world\nhi men\nhe is saying hi\nhi hello\nHELLO everyone\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])])]),s._v(" "),n("li",[n("p",[n("code",[s._v("sed -n 'line_num,/^$/p' [file]")]),s._v(": 打印从行号line_num到下一个空行之间的内容，/p表示打印；")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("➜  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -n "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1,/^$/p'")]),s._v(" hello.txt\nhi world\nhi boys\n \n➜  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("head")]),s._v(" -4 hello.txt\nhi world\nhi boys\n \nshe is saying hi\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])])]),s._v(" "),n("li",[n("p",[n("code",[s._v("sed -i \"\" '1,100d' 404.log")]),s._v("：删除文件的前100行，注意mac上要加个空字符串")])]),s._v(" "),n("li",[n("p",[n("code",[s._v("sed -n '5,8p' 1156_success.txt")]),s._v("：查看文件若干行；输出文件的5-8行")])]),s._v(" "),n("li",[n("p",[n("code",[s._v("sed -n '5,8p' 1156_success.txt >11.txt")]),s._v("：输出文件的5-8行至11.txt")])]),s._v(" "),n("li",[n("p",[n("code",[s._v("cat 503.log |grep NewHomeActivity >503Home.log")]),s._v("：从一个文件过滤出包含字符串的行到另一个文件")])]),s._v(" "),n("li",[n("p",[n("code",[s._v('find "$tmp" -type f -exec sed -i "s/${targetsubstring}/${newsubstring}/g" {} \\;')])])]),s._v(" "),n("li",[n("p",[s._v("For support on both OSX and Linux, I use a simple if check to see if the bash script is running on OSX or Linux, and adjust the command's "),n("code",[s._v("-i")]),s._v(" argument based on that.")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$OSTYPE")]),s._v('"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"darwin"')]),s._v("* "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v(" -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s|"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$iconPath")]),s._v("|images-theme-dark/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$iconfile")]),s._v("|g'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{}"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s|"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$iconPath")]),s._v("|images-theme-dark/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$iconfile")]),s._v("|g'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{}"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])])]),s._v(" "),n("h3",{attrs:{id:"案例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#案例"}},[s._v("#")]),s._v(" 案例")]),s._v(" "),n("h4",{attrs:{id:"全路径替换"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#全路径替换"}},[s._v("#")]),s._v(" 全路径替换")]),s._v(" "),n("blockquote",[n("p",[s._v("替换配置文件中baseApi地址：")])]),s._v(" "),n("p",[s._v("获取当前脚本的路径："),n("code",[s._v('curDir=$(cd "$(dirname "$0")"; pwd)')])]),s._v(" "),n("p",[s._v("以上面获取的路径，做绝对路径操作处理；")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @Author: samy")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @email: yessz#foxmail.com")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @time: 2021-03-11 15:59:05")]),s._v("\n "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @modAuthor: samy")]),s._v("\n "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @modTime: 2021-03-12 16:18:04")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @desc: 构建部署脚本")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Copyright © 2015~2021 BDP FE")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("curDir")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dirname")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v('"')]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("distWebDir")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("dist/web\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("distAdmDir")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("dist/admin\n\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"====wdp-web项目===环境依赖==node版本====="')]),s._v("\nnode -v\n\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"====wdp-web项目===环境依赖===="')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -g bower --registry"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://registry.npm.taobao.org\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/dist\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${distWebDir}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${distAdmDir}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/ambari-web\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$OSTYPE")]),s._v('"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"darwin"')]),s._v("* "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"s#^App.apiPrefix.*#App.apiPrefix = '/api/v1'; #g\"")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/ambari-web/app/config.js\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"s#^App.apiPrefix.*#App.apiPrefix = '/api/v1'; #g\"")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/ambari-web/app/config.js\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==wdp-web==web项目==config中的apiPrefix===替换成功===="')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i --registry"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://registry.npm.taobao.org\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==wdp-web==web项目===构建成功===="')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -R public/* "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${distWebDir}")]),s._v("/\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==wdp-web==web项目===拷贝成功===="')]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/ambari-admin/main/resources/ui/admin-web/\nbower "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这一步下载估计会很慢")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i --registry"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://registry.npm.taobao.org\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==wdp-web==admin项目===构建成功===="')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -R dist/* "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${distAdmDir}")]),s._v("/\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==wdp-web==admin项目===拷贝成功===="')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br")])]),n("h4",{attrs:{id:"替换单个key-default-value"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#替换单个key-default-value"}},[s._v("#")]),s._v(" 替换单个key default value")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("defaultFile")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/env/default.env\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("targetFile")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/env/en.env\n\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("curDir")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dirname")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v('"')]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("webDir")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/web\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("getEnvConf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("param")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("value1")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -E "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/^#.*|^ *$/d'")]),s._v(" $defaultFile "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" s/"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(":space:"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("//g "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" -F "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${param}")]),s._v('="')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${param}")]),s._v("=/{print \\"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v('}"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" -n1"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("value2")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -E "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/^#.*|^ *$/d'")]),s._v(" $targetFile "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" s/"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(":space:"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("//g "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" -F "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${param}")]),s._v('="')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${param}")]),s._v("=/{print \\"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v('}"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" -n1"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -n "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$value2")]),s._v('"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("value")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$value1")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("value")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$value2")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$value")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("replacePro")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("varKey")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("defaultValue")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$3")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("varValue")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$4")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$varKey")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$varValue")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$defaultValue")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$OSTYPE")]),s._v('"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"darwin"')]),s._v("* "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s#^var '),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${varKey}")]),s._v(" = "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${defaultValue}")]),s._v(".*#var "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${varKey}")]),s._v(" = "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${varValue}")]),s._v(';#g"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s#^var '),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${varKey}")]),s._v(" = "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${defaultValue}")]),s._v(".*#var "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${varKey}")]),s._v(" = "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${varValue}")]),s._v(';#g"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isPro")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("getEnvConf isPro"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dafaultLang")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("getEnvConf dafaultLang"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isOnlyEn")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("getEnvConf isOnlyEn"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n\nreplacePro "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${webDir}")]),s._v("/app/conf.js isPro "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$isPro")]),s._v(" \nreplacePro "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${webDir}")]),s._v("/app/conf.js dafaultLang "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zh'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$dafaultLang")]),s._v(" \nreplacePro "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${webDir}")]),s._v("/app/conf.js isOnlyEn "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$isOnlyEn")]),s._v(" \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br")])]),n("h4",{attrs:{id:"简化key-value替换【推荐】"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#简化key-value替换【推荐】"}},[s._v("#")]),s._v(" 简化key value替换【推荐】")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("#"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bash\ndefaultFile"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pwd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("env"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env\ntargetFile"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pwd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("env"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("en"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env\n\ncurDir"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  cd "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$(dirname "')]),s._v("$"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('")"')]),s._v("\n  pwd\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nwebDir"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("curDir"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("web\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getEnvConf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  param"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("$"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  value1"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sed "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("E")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/^#.*|^ *$/d'")]),s._v(" $defaultFile "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" sed s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("space"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//g | awk -F "${param}=" "/${param}=/{print \\$2}" | tail -n1)')]),s._v("\n  value2"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sed "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("E")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/^#.*|^ *$/d'")]),s._v(" $targetFile "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" sed s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("space"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//g | awk -F "${param}=" "/${param}=/{print \\$2}" | tail -n1)')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("n "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$value2"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" then\n    value"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("$value1\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n    value"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("$value2\n  fi\n  echo $value\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("replacePro")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  varKey"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("$"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  varValue"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("$"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n  echo $varKey $varValue\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$OSTYPE"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"darwin"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" then\n    sed "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("i "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s/\\(${varKey} =\\).*/\\1 ${varValue};/"')]),s._v(" $"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n    sed "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("i "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s#^var ${varKey} = ${defaultValue}.*#var ${varKey} = ${varValue};#g"')]),s._v(" $"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  fi\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nisPro"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("getEnvConf isPro"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ndefaultLang"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("getEnvConf defaultLang"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nisOnlyEn"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("getEnvConf isOnlyEn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nreplacePro $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("webDir"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("app"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js isPro $isPro\nreplacePro $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("webDir"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("app"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js defaultLang $defaultLang\nreplacePro $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("webDir"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("app"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js isOnlyEn $isOnlyEn\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br")])]),n("h2",{attrs:{id:"awk命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#awk命令"}},[s._v("#")]),s._v(" awk命令")]),s._v(" "),n("p",[s._v("AWK 是一种处理文本文件的语言，是一个强大的文本分析工具。")]),s._v(" "),n("p",[s._v("之所以叫 AWK 是因为其取了三位创始人 Alfred Aho，Peter Weinberger, 和 Brian Kernighan 的 Family Name 的首字符。")]),s._v(" "),n("h3",{attrs:{id:"语法-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#语法-2"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("awk [选项参数] 'script' var=value file(s)\n或\nawk [选项参数] -f scriptfile var=value file(s)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("strong",[s._v("选项参数说明：")])]),s._v(" "),n("ul",[n("li",[s._v("-F fs or --field-separator fs\n指定输入文件折分隔符，fs是一个字符串或者是一个正则表达式，如-F:。")]),s._v(" "),n("li",[s._v("-v var=value or --asign var=value\n赋值一个用户定义变量。")]),s._v(" "),n("li",[s._v("-f scripfile or --file scriptfile\n从脚本文件中读取awk命令。")]),s._v(" "),n("li",[s._v("-mf nnn and -mr nnn\n对nnn值设置内在限制，-mf选项限制分配给nnn的最大块数目；-mr选项限制记录的最大数目。这两个功能是Bell实验室版awk的扩展功能，在标准awk中不适用。")]),s._v(" "),n("li",[s._v("-W compact or --compat, -W traditional or --traditional\n在兼容模式下运行awk。所以gawk的行为和标准的awk完全一样，所有的awk扩展都被忽略。")]),s._v(" "),n("li",[s._v("-W copyleft or --copyleft, -W copyright or --copyright\n打印简短的版权信息。")]),s._v(" "),n("li",[s._v("-W help or --help, -W usage or --usage\n打印全部awk选项和每个选项的简短说明。")]),s._v(" "),n("li",[s._v("-W lint or --lint\n打印不能向传统unix平台移植的结构的警告。")]),s._v(" "),n("li",[s._v("-W lint-old or --lint-old\n打印关于不能向传统unix平台移植的结构的警告。")]),s._v(" "),n("li",[s._v("-W posix\n打开兼容模式。但有以下限制，不识别：/x、函数关键字、func、换码序列以及当fs是一个空格时，将新行作为一个域分隔符；操作符"),n("strong",[s._v("和")]),s._v("=不能代替^和^=；fflush无效。")]),s._v(" "),n("li",[s._v("-W re-interval or --re-inerval\n允许间隔正则表达式的使用，参考(grep中的Posix字符类)，如括号表达式[[:alpha:]]。")]),s._v(" "),n("li",[s._v("-W source program-text or --source program-text\n使用program-text作为源代码，可与-f命令混用。")]),s._v(" "),n("li",[s._v("-W version or --version\n打印bug报告信息的版本。")])]),s._v(" "),n("hr"),s._v(" "),n("h3",{attrs:{id:"基本用法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基本用法"}},[s._v("#")]),s._v(" 基本用法")]),s._v(" "),n("p",[s._v("log.txt文本内容如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("2 this is a test\n3 Are you like awk\nThis's a test\n10 There are orange,apple,mongo\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("用法一：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("awk '{[pattern] action}' {filenames}   # 行匹配语句 awk '' 只能用单引号\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("实例：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 每行按空格或TAB分割，输出文本中的1、4项\n $ awk '{print $1,$4}' log.txt\n ---------------------------------------------\n 2 a\n 3 like\n This's\n 10 orange,apple,mongo\n # 格式化输出\n $ awk '{printf \"%-8s %-10s\\n\",$1,$4}' log.txt\n ---------------------------------------------\n 2        a\n 3        like\n This's\n 10       orange,apple,mongo\n \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[s._v("用法二：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("awk -F  #-F相当于内置变量FS, 指定分割字符\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("实例：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 使用\",\"分割\n $  awk -F, '{print $1,$2}'   log.txt\n ---------------------------------------------\n 2 this is a test\n 3 Are you like awk\n This's a test\n 10 There are orange apple\n # 或者使用内建变量\n $ awk 'BEGIN{FS=\",\"} {print $1,$2}'     log.txt\n ---------------------------------------------\n 2 this is a test\n 3 Are you like awk\n This's a test\n 10 There are orange apple\n # 使用多个分隔符.先使用空格分割，然后对分割结果再使用\",\"分割\n $ awk -F '[ ,]'  '{print $1,$2,$5}'   log.txt\n ---------------------------------------------\n 2 this test\n 3 Are awk\n This's a\n 10 There apple\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("p",[s._v("用法三：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("awk -v  # 设置变量\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("实例：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(" $ awk -va=1 '{print $1,$1+a}' log.txt\n ---------------------------------------------\n 2 3\n 3 4\n This's 1\n 10 11\n $ awk -va=1 -vb=s '{print $1,$1+a,$1b}' log.txt\n ---------------------------------------------\n 2 3 2s\n 3 4 3s\n This's 1 This'ss\n 10 11 10s\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("用法四：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("awk -f {awk脚本} {文件名}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("实例：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(" $ awk -f cal.awk log.txt\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("hr"),s._v(" "),n("h3",{attrs:{id:"运算符"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#运算符"}},[s._v("#")]),s._v(" 运算符")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"left"}},[s._v("运算符")]),s._v(" "),n("th",{staticStyle:{"text-align":"left"}},[s._v("描述")])])]),s._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("= += -= *= /= %= ^= **=")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("赋值")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("?:")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("C条件表达式")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("||")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("逻辑或")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("&&")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("逻辑与")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("~ 和 !~")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("匹配正则表达式和不匹配正则表达式")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("< <= > >= != ==")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("关系运算符")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("空格")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("连接")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("+ -")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("加，减")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("* / %")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("乘，除与求余")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("+ - !")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("一元加，减和逻辑非")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("^ ***")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("求幂")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("++ --")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("增加或减少，作为前缀或后缀")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("$")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("字段引用")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("in")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("数组成员")])])])]),s._v(" "),n("p",[s._v("过滤第一列大于2的行")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ awk '$1>2' log.txt    #命令\n#输出\n3 Are you like awk\nThis's a test\n10 There are orange,apple,mongo\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("过滤第一列等于2的行")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ awk '$1==2 {print $1,$3}' log.txt    #命令\n#输出\n2 is\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("过滤第一列大于2并且第二列等于'Are'的行")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ awk '$1>2 && $2==\"Are\" {print $1,$2,$3}' log.txt    #命令\n#输出\n3 Are you\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("hr"),s._v(" "),n("h3",{attrs:{id:"内建变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#内建变量"}},[s._v("#")]),s._v(" 内建变量")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"left"}},[s._v("变量")]),s._v(" "),n("th",{staticStyle:{"text-align":"left"}},[s._v("描述")])])]),s._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("$n")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("当前记录的第n个字段，字段间由FS分隔")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("$0")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("完整的输入记录")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("ARGC")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("命令行参数的数目")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("ARGIND")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("命令行中当前文件的位置(从0开始算)")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("ARGV")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("包含命令行参数的数组")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("CONVFMT")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("数字转换格式(默认值为%.6g)ENVIRON环境变量关联数组")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("ERRNO")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("最后一个系统错误的描述")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("FIELDWIDTHS")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("字段宽度列表(用空格键分隔)")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("FILENAME")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("当前文件名")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("FNR")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("各文件分别计数的行号")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("FS")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("字段分隔符(默认是任何空格)")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("IGNORECASE")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("如果为真，则进行忽略大小写的匹配")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("NF")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("一条记录的字段的数目")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("NR")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("已经读出的记录数，就是行号，从1开始")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("OFMT")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("数字的输出格式(默认值是%.6g)")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("OFS")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("输出字段分隔符，默认值与输入字段分隔符一致。")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("ORS")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("输出记录分隔符(默认值是一个换行符)")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("RLENGTH")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("由match函数所匹配的字符串的长度")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("RS")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("记录分隔符(默认是一个换行符)")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("RSTART")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("由match函数所匹配的字符串的第一个位置")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("SUBSEP")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("数组下标分隔符(默认值是/034)")])])])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('$ awk \'BEGIN{printf "%4s %4s %4s %4s %4s %4s %4s %4s %4s\\n","FILENAME","ARGC","FNR","FS","NF","NR","OFS","ORS","RS";printf "---------------------------------------------\\n"} {printf "%4s %4s %4s %4s %4s %4s %4s %4s %4s\\n",FILENAME,ARGC,FNR,FS,NF,NR,OFS,ORS,RS}\'  log.txt\nFILENAME ARGC  FNR   FS   NF   NR  OFS  ORS   RS\n---------------------------------------------\nlog.txt    2    1         5    1\nlog.txt    2    2         5    2\nlog.txt    2    3         3    3\nlog.txt    2    4         4    4\n$ awk -F\\\' \'BEGIN{printf "%4s %4s %4s %4s %4s %4s %4s %4s %4s\\n","FILENAME","ARGC","FNR","FS","NF","NR","OFS","ORS","RS";printf "---------------------------------------------\\n"} {printf "%4s %4s %4s %4s %4s %4s %4s %4s %4s\\n",FILENAME,ARGC,FNR,FS,NF,NR,OFS,ORS,RS}\'  log.txt\nFILENAME ARGC  FNR   FS   NF   NR  OFS  ORS   RS\n---------------------------------------------\nlog.txt    2    1    \'    1    1\nlog.txt    2    2    \'    1    2\nlog.txt    2    3    \'    2    3\nlog.txt    2    4    \'    1    4\n# 输出顺序号 NR, 匹配文本行号\n$ awk \'{print NR,FNR,$1,$2,$3}\' log.txt\n---------------------------------------------\n1 1 2 this is\n2 2 3 Are you\n3 3 This\'s a test\n4 4 10 There are\n# 指定输出分割符\n$  awk \'{print $1,$2,$5}\' OFS=" $ "  log.txt\n---------------------------------------------\n2 $ this $ test\n3 $ Are $ awk\nThis\'s $ a $\n10 $ There $\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br")])]),n("hr"),s._v(" "),n("h3",{attrs:{id:"使用正则-字符串匹配"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用正则-字符串匹配"}},[s._v("#")]),s._v(" 使用正则，字符串匹配")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 输出第二列包含 \"th\"，并打印第二列与第四列\n$ awk '$2 ~ /th/ {print $2,$4}' log.txt\n---------------------------------------------\nthis a\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[n("strong",[s._v("~ 表示模式开始。// 中是模式。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 输出包含 \"re\" 的行\n$ awk '/re/ ' log.txt\n---------------------------------------------\n3 Are you like awk\n10 There are orange,apple,mongo\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("hr"),s._v(" "),n("h3",{attrs:{id:"忽略大小写"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#忽略大小写"}},[s._v("#")]),s._v(" 忽略大小写")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ awk 'BEGIN{IGNORECASE=1} /this/' log.txt\n---------------------------------------------\n2 this is a test\nThis's a test\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("hr"),s._v(" "),n("h3",{attrs:{id:"模式取反"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#模式取反"}},[s._v("#")]),s._v(" 模式取反")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ awk '$2 !~ /th/ {print $2,$4}' log.txt\n---------------------------------------------\nAre like\na\nThere orange,apple,mongo\n$ awk '!/th/ {print $2,$4}' log.txt\n---------------------------------------------\nAre like\na\nThere orange,apple,mongo\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("hr"),s._v(" "),n("h3",{attrs:{id:"awk脚本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#awk脚本"}},[s._v("#")]),s._v(" awk脚本")]),s._v(" "),n("p",[s._v("关于 awk 脚本，我们需要注意两个关键词 BEGIN 和 END。")]),s._v(" "),n("ul",[n("li",[s._v("BEGIN{ 这里面放的是执行前的语句 }")]),s._v(" "),n("li",[s._v("END {这里面放的是处理完所有的行后要执行的语句 }")]),s._v(" "),n("li",[s._v("{这里面放的是处理每一行时要执行的语句}")])]),s._v(" "),n("p",[s._v("假设有这么一个文件（学生成绩表）：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ cat score.txt\nMarry   2143 78 84 77\nJack    2321 66 78 45\nTom     2122 48 77 71\nMike    2537 87 97 95\nBob     2415 40 57 62\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("我们的 awk 脚本如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('$ cat cal.awk\n#!/bin/awk -f\n#运行前\nBEGIN {\n    math = 0\n    english = 0\n    computer = 0\n \n    printf "NAME    NO.   MATH  ENGLISH  COMPUTER   TOTAL\\n"\n    printf "---------------------------------------------\\n"\n}\n#运行中\n{\n    math+=$3\n    english+=$4\n    computer+=$5\n    printf "%-6s %-6s %4d %8d %8d %8d\\n", $1, $2, $3,$4,$5, $3+$4+$5\n}\n#运行后\nEND {\n    printf "---------------------------------------------\\n"\n    printf "  TOTAL:%10d %8d %8d \\n", math, english, computer\n    printf "AVERAGE:%10.2f %8.2f %8.2f\\n", math/NR, english/NR, computer/NR\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("p",[s._v("我们来看一下执行结果：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ awk -f cal.awk score.txt\nNAME    NO.   MATH  ENGLISH  COMPUTER   TOTAL\n---------------------------------------------\nMarry  2143     78       84       77      239\nJack   2321     66       78       45      189\nTom    2122     48       77       71      196\nMike   2537     87       97       95      279\nBob    2415     40       57       62      159\n---------------------------------------------\n  TOTAL:       319      393      350\nAVERAGE:     63.80    78.60    70.00\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("hr"),s._v(" "),n("h3",{attrs:{id:"另外一些实例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#另外一些实例"}},[s._v("#")]),s._v(" 另外一些实例")]),s._v(" "),n("p",[s._v("AWK 的 hello world 程序为：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('BEGIN { print "Hello, world!" }\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("计算文件大小")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ ls -l *.txt | awk '{sum+=$5} END {print sum}'\n--------------------------------------------------\n666581\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("从文件中找出长度大于 80 的行：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("awk 'length>80' log.txt\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("打印九九乘法表")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("seq 9 | sed 'H;g' | awk -v RS='' '{for(i=1;i<=NF;i++)printf(\"%dx%d=%d%s\", i, NR, i*NR, i==NR?\"\\n\":\"\\t\")}'\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"相关链接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#相关链接"}},[s._v("#")]),s._v(" 相关链接")]),s._v(" "),n("p",[s._v("https://www.cnblogs.com/binliubiao/p/13471975.html")]),s._v(" "),n("p",[s._v("https://www.runoob.com/linux/linux-comm-grep.html")]),s._v(" "),n("p",[s._v("https://www.runoob.com/linux/linux-comm-sed.html")]),s._v(" "),n("p",[s._v("https://www.runoob.com/linux/linux-comm-awk.html")])])}),[],!1,null,null,null);a.default=e.exports}}]);