(window.webpackJsonp=window.webpackJsonp||[]).push([[207],{1270:function(s,t,a){s.exports=a.p+"assets/img/4b628751-0d86-4e6f-a637-8dd2aab0ff87.949ad563.jpg"},2086:function(s,t,a){"use strict";a.r(t);var n=a(14),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[s._v("#")]),s._v(" 配置")]),s._v(" "),n("blockquote",[n("p",[s._v("跟部署相关的Nginx配置语法")])]),s._v(" "),n("h3",{attrs:{id:"最基本配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#最基本配置"}},[s._v("#")]),s._v(" 最基本配置")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/nginx/conf.d\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" sty-8081.conf \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("输入")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("upstream sty"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    server "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:8081                          \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n   \nserver "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#侦听的80端口")]),s._v("\n    listen       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    server_name  你的公网ip地址"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    location / "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        proxy_pass   http://sty"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#在这里设置,和upstream的名字一样  ")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#以下是一些反向代理的配置可删除")]),s._v("\n        proxy_redirect             off"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#后端的Web服务器可以通过X-Forwarded-For获取用户真实IP")]),s._v("\n        proxy_set_header           Host "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n        proxy_set_header           X-Real-IP "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$remote_addr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n        proxy_set_header           X-Forwarded-For "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$proxy_add_x_forwarded_for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        proxy_set_header           X-Nginx-Proxy "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("h3",{attrs:{id:"include指令在http块中的应用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#include指令在http块中的应用"}},[s._v("#")]),s._v(" include指令在http块中的应用")]),s._v(" "),n("p",[s._v("在 "),n("em",[s._v("conf/nginx.conf")]),s._v(" 文件中的http块中添加如下配置：")]),s._v(" "),n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("http")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("include")]),s._v(" vhost"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server_names_hash_bucket_size")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("其中"),n("code",[s._v("vhost/*.conf")]),s._v("表示 "),n("em",[s._v("vhost")]),s._v(" 文件下的所有以 "),n("em",[s._v(".conf")]),s._v(" 结尾的文件。"),n("code",[s._v("server_names_hash_bucket_size")]),s._v("是"),n("code",[s._v("server_name")]),s._v("的存储大小。")]),s._v(" "),n("p",[s._v("为了更好管理每个Vue工程对应的部署配置，在 "),n("em",[s._v("conf")]),s._v(" 文件夹中创建一个 "),n("em",[s._v("vhost")]),s._v(" 文件夹，在 "),n("em",[s._v("vhost")]),s._v(" 文件夹中根据每个Vue工程创建对应的部署配置文件;")]),s._v(" "),n("p",[s._v("其中 "),n("em",[s._v("a.conf")]),s._v(" 文件代表A工程对应的部署配置文件。")]),s._v(" "),n("p",[s._v("再利用"),n("code",[s._v("include")]),s._v("指令把 "),n("em",[s._v("conf/vhost")]),s._v(" 文件夹中每个文件中的server块添加到 "),n("em",[s._v("conf/nginx.conf")]),s._v(" 文件中的http块中。")]),s._v(" "),n("h3",{attrs:{id:"location块的配置语法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#location块的配置语法"}},[s._v("#")]),s._v(" location块的配置语法")]),s._v(" "),n("p",[s._v("在介绍之前先阐述一个URL的构成，一个URL是有协议+域名+端口号+路径+文件名+参数+锚点构成的")]),s._v(" "),n("p",[s._v("当用一个URL访问一个server块创建的虚拟服务器，这个server块中的location块会用其匹配规则去匹配这个URL的"),n("strong",[s._v("路径部分")]),s._v("，如果有一个location块匹配成功后，则执行这个location块中相关的操作。")]),s._v(" "),n("p",[s._v("其语法是"),n("code",[s._v("location [=|~|~*|^~|@] pattern { ... }")]),s._v("，其中"),n("code",[s._v("[=|~|~*|^~|@]")]),s._v("是修饰符，"),n("code",[s._v("pattern")]),s._v("是匹配规则，在"),n("code",[s._v("{ ... }")]),s._v("中配置相关的操作。")]),s._v(" "),n("p",[s._v("其中修饰符是非必须的，若没修饰符，仍然可以用pattern（匹配规则）去匹配URL路径部分。修饰符的种类及作用如下表所示：")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("修饰符")]),s._v(" "),n("th",[s._v("作用")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("=")]),s._v(" "),n("td",[s._v("对应的匹配规则是个字符串，表示对URL路径部分进行精确匹配，即该字符串等于URL路径部分。")])]),s._v(" "),n("tr",[n("td",[s._v("~")]),s._v(" "),n("td",[s._v("对应的匹配规则是个正则，表示匹配时区分大小写。")])]),s._v(" "),n("tr",[n("td",[s._v("~*")]),s._v(" "),n("td",[s._v("对应的匹配规则是个正则，表示匹配时"),n("strong",[s._v("不")]),s._v("区分大小写。")])]),s._v(" "),n("tr",[n("td",[s._v("^~")]),s._v(" "),n("td",[s._v("对应的匹配规则是个字符串，表示匹配时要检测URL路径部分中是否含有该字符串。")])]),s._v(" "),n("tr",[n("td",[s._v("@")]),s._v(" "),n("td",[s._v("用于定义一个location块，且该块不能被外部访问，只能被Nginx内部指令所访问。")])])])]),s._v(" "),n("p",[s._v("此外修饰符还有另外一个作用，提高location块匹配的优先级，其优先级如下所示：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("`[=]` > `[^~]` > `[~/~*]` > 无修饰符\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h4",{attrs:{id:"匹配的大致流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#匹配的大致流程"}},[s._v("#")]),s._v(" 匹配的大致流程：")]),s._v(" "),n("ul",[n("li",[s._v("第一步：优先使用"),n("code",[s._v("=")]),s._v("修饰符的location块的匹配规则去匹配，"),n("code",[s._v("=")]),s._v("意味精确匹配，如果匹配上了，该location中的操作马上执行，匹配过程就此结束；")]),s._v(" "),n("li",[s._v("第二步：若没匹配上，接下来去匹配那些匹配规则是字符串的location块，若被多个location块匹配上，取其中匹配规则最长的location块，若该location块的匹配规则前面有"),n("code",[s._v("^~")]),s._v("修饰符，马上执行其中操作，匹配过程结束。若该location块的匹配规则前面没有修饰符，先记录该location块继续往下匹配。")]),s._v(" "),n("li",[s._v("第三步：若匹配规则是字符串的location块没有匹配上，或者匹配上的location块的修饰符不是"),n("code",[s._v("^~")]),s._v("。那么接下来去匹配那些匹配规则是正则的location块。"),n("strong",[s._v("这里要注意如果匹配规则是正则，那么其前面一定要加上 "),n("code",[s._v("~")]),s._v(" 或 "),n("code",[s._v("~\\*")]),s._v(" 修饰符，否则不起作用。")]),s._v(" 若被多个location块匹配上，则按着location块的定义顺序，取顺序最上面的location块进行匹配，马上执行其中操作，匹配过程结束。")]),s._v(" "),n("li",[s._v("第四步：若匹配规则是正则的location块没匹配上，要去看一下第二步中，若有"),n("strong",[s._v("无修饰符")]),s._v("的location块匹配上，马上执行其中操作，匹配过程结束。若没有，匹配过程也照样结束。")])]),s._v(" "),n("p",[s._v("关于第二步中，取其中匹配规则最长的location块举个例子说明：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("server{\n  listen 8081;\n  server_name  test.com;\n  location ^~ /doc {\n    return 001;\n  }\n  location ^~ /docu {\n    return 002;\n  }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("执行命令"),n("code",[s._v("curl -I test.com:8080/document")]),s._v("发起一个网络请求，结果是返回 002 ;")]),s._v(" "),n("p",[s._v("其中"),n("code",[s._v("^~ /doc")]),s._v("和"),n("code",[s._v("^~ /docu")]),s._v("都能匹配URL路径部分中"),n("code",[s._v("/document")]),s._v("。因为"),n("code",[s._v("/docu")]),s._v("字符串的长度比"),n("code",[s._v("/doc")]),s._v("长，所以匹配规则为"),n("code",[s._v("^~ /docu")]),s._v("的location块被匹配上。")]),s._v(" "),n("h3",{attrs:{id:"root指令和alias指令在location块中的区别"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#root指令和alias指令在location块中的区别"}},[s._v("#")]),s._v(" root指令和alias指令在location块中的区别")]),s._v(" "),n("p",[n("code",[s._v("root")]),s._v("指令和"),n("code",[s._v("alias")]),s._v("指令所配置的路径皆是资源所在文件夹的路径中的"),n("strong",[s._v("基础路径")]),s._v("，把基础路径和URL的路径部分"),n("strong",[s._v("拼接一下")]),s._v("，才会得到资源所在文件夹的真正路径。")]),s._v(" "),n("p",[s._v("通过"),n("code",[s._v("root")]),s._v("指令和"),n("code",[s._v("alias")]),s._v("指令定义的基础路径，其拼接规则是不一样的，有区别的;")]),s._v(" "),n("p",[s._v("在 "),n("em",[s._v("nginx.conf")]),s._v(" 中 http 块中添加如下配置：")]),s._v(" "),n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("listen")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8081")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server_name")]),s._v("  test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("root")]),s._v("   html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("list "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alias")]),s._v("  html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("form"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alias")]),s._v("  html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("其中"),n("code",[s._v("html")]),s._v("是Nginx安装目录中的"),n("em",[s._v("html")]),s._v("文件夹的路径。")]),s._v(" "),n("ul",[n("li",[s._v("当浏览器访问 "),n("a",{attrs:{href:"http://test.com:8080/home/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("test.com:8080/home/index.…"),n("OutboundLink")],1),s._v(" ，被匹配规则为 "),n("code",[s._v("/home")]),s._v(" 的location块匹配到，用"),n("code",[s._v("root")]),s._v("的值拼接到URL路径"),n("code",[s._v("/home/")]),s._v("前面生成访问服务器资源所在文件夹的路径："),n("code",[s._v("html")]),s._v(" + "),n("code",[s._v("/home/")]),s._v(" = "),n("code",[s._v("html/home/")]),s._v("。")]),s._v(" "),n("li",[s._v("当浏览器访问 "),n("a",{attrs:{href:"http://test.com:8080/list/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("test.com:8080/list/index.…"),n("OutboundLink")],1),s._v(" ，被匹配规则为 "),n("code",[s._v("/list")]),s._v(" 的location块匹配到，用"),n("code",[s._v("alias")]),s._v("的值把URL路径"),n("code",[s._v("/list/")]),s._v("中的"),n("code",[s._v("/list")]),s._v("部分替换掉生成访问服务器资源所在文件夹的路径："),n("code",[s._v("html/")]),s._v("。")]),s._v(" "),n("li",[s._v("当浏览器访问 "),n("a",{attrs:{href:"http://test.com:8080/form/home/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("test.com:8080/form/home/i…"),n("OutboundLink")],1),s._v(" ，被匹配规则为 "),n("code",[s._v("/form/")]),s._v(" 的location块匹配到，用"),n("code",[s._v("alias")]),s._v("的值把URL路径"),n("code",[s._v("/form/home/")]),s._v("中的"),n("code",[s._v("/form/")]),s._v("部分替换掉生成访问服务器资源所在文件夹的路径："),n("code",[s._v("htmlhome/")]),s._v("，可以看见URL路径的替换部分"),n("code",[s._v("/form/")]),s._v("和location块的匹配规则"),n("code",[s._v("/form/")]),s._v("一致。")])]),s._v(" "),n("p",[n("strong",[s._v("在部署Vue工程时，"),n("code",[s._v("root")]),s._v("和"),n("code",[s._v("alias")]),s._v("一般配置为Vue工程编译打包后生成的文件夹在服务器上存放的路径。")])]),s._v(" "),n("h3",{attrs:{id:"try-files指令在location块的应用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#try-files指令在location块的应用"}},[s._v("#")]),s._v(" try_files指令在location块的应用")]),s._v(" "),n("p",[n("code",[s._v("try_files")]),s._v("指令的作用是尝试查找文件。其语法是"),n("code",[s._v("try_files file ... uri;")]),s._v("， 其中 "),n("code",[s._v("file")]),s._v(" 是文件的相对路径，可以配置多个，"),n("code",[s._v("uri")]),s._v(" 是URL路径部分。"),n("strong",[s._v("要注意文件的相对路径是相对于"),n("code",[s._v("try_files")]),s._v("指令所在location块中访问服务器资源所在文件夹的路径。")]),s._v(" Nginx会根据文件路径配置的顺序从前往后来查找，并使用第一个找到的文件的配置路径进行请求处理，如果通过配置的文件路径都没有找到对应的文件，则把最后一个配置的"),n("code",[s._v("uri")]),s._v("去匹配对应的location块。")]),s._v(" "),n("p",[n("strong",[s._v("在项目中使用history模式的路由")]),s._v("，为了避免通过URL访问到的页面不存在时，返回浏览器自带的404页面。要在location块中增加一行配置，配置如下所示：")]),s._v(" "),n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try_files")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("code",[s._v("$uri")]),s._v("是URL的路径和文件名部分，例如访问 "),n("a",{attrs:{href:"http://test.com:8080/doc/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("test.com:8080/doc/index.h…"),n("OutboundLink")],1),s._v(" ，"),n("code",[s._v("$uri")]),s._v("就是"),n("code",[s._v("/doc/index.html")]),s._v("。")]),s._v(" "),n("h3",{attrs:{id:"proxy-pass指令在location块的应用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#proxy-pass指令在location块的应用"}},[s._v("#")]),s._v(" proxy_pass指令在location块的应用")]),s._v(" "),n("p",[s._v("代理有正向代理和反向代理两种，都是用"),n("code",[s._v("proxy_pass")]),s._v("指令来实现。")]),s._v(" "),n("ul",[n("li",[s._v("一句话解释正向代理，正向代理的对象是用户，用户知道访问那个服务器，而服务器"),n("strong",[s._v("不知道")]),s._v("是哪个用户访问它。")]),s._v(" "),n("li",[s._v("一句话解释反向代理，反向代理的对象是服务器，用户"),n("strong",[s._v("不知道")]),s._v("访问了哪个服务器，而服务器知道那个用户访问它。")])]),s._v(" "),n("h3",{attrs:{id:"rewrite指令在location块的应用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rewrite指令在location块的应用"}},[s._v("#")]),s._v(" rewrite指令在location块的应用")]),s._v(" "),n("p",[n("code",[s._v("rewrite")]),s._v("的作用是重定向。其语法是"),n("code",[s._v("rewrite regex replacement [flag];")]),s._v("。")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("regex")]),s._v("是匹配URL路径部分的正则表达式；")]),s._v(" "),n("li",[n("code",[s._v("replacement")]),s._v("是重定向的地址，如果其值为文件路径时，其路径是相对路径，如果location块中未定义"),n("code",[s._v("root")]),s._v("或"),n("code",[s._v("alias")]),s._v("，且location块所在server块中也没有定义"),n("code",[s._v("root")]),s._v("，则将Nginx安装目录中 "),n("em",[s._v("html")]),s._v(" 文件夹的路径作为参照路径。")]),s._v(" "),n("li",[n("code",[s._v("flag")]),s._v(" 是标志位，在location块中一般使用"),n("code",[s._v("break")]),s._v("，表示执行完rewrite，不会继续匹配其它location块。如果使用"),n("code",[s._v("last")]),s._v("，表示执行完rewrite，会继续匹配其它location块。")])]),s._v(" "),n("h2",{attrs:{id:"部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[s._v("#")]),s._v(" 部署")]),s._v(" "),n("h3",{attrs:{id:"部署结构图"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#部署结构图"}},[s._v("#")]),s._v(" 部署结构图")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1270),alt:"img"}})]),s._v(" "),n("h4",{attrs:{id:"相关命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#相关命令"}},[s._v("#")]),s._v(" 相关命令")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("scp -r dist samy@192.168.11.xxx:/home/samy/deploy/etag-web/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"前端部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前端部署"}},[s._v("#")]),s._v(" 前端部署")]),s._v(" "),n("p",[s._v("把Vue工程部署到域名的子路径上有三种方案：")]),s._v(" "),n("ul",[n("li",[s._v("利用反向代理来部署；")]),s._v(" "),n("li",[s._v("利用root配置来部署；")]),s._v(" "),n("li",[s._v("利用alias配置来部署；")])]),s._v(" "),n("p",[s._v("不管那种部署方案都需要用location块来匹配访问URL的路径部分并做处理；")]),s._v(" "),n("h4",{attrs:{id:"前端构建路径设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前端构建路径设置"}},[s._v("#")]),s._v(" 前端构建路径设置")]),s._v(" "),n("blockquote",[n("p",[s._v("要部署在域名的子路径"),n("code",[s._v("/bbb/")]),s._v("上，要先更改Vue工程中的配置")])]),s._v(" "),n("p",[s._v("用Vue CLI3搭建")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("把"),n("code",[s._v("publicPath")]),s._v("的值修改为子路径"),n("code",[s._v("/bbb/")]),s._v("，目的是使编译打包后代码中对资源的引用路径前面加上子路径"),n("code",[s._v("/bbb/")]),s._v(",在加载资源时发出的URL请求能被location块匹配到。在"),n("code",[s._v("vue.config.js")]),s._v("文件中修改:")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   publicPath"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'development'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/bbb/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("把路由的基路径"),n("code",[s._v("base")]),s._v("的值修改为子路径"),n("code",[s._v("/bbb/")]),s._v("，在"),n("code",[s._v("src/router/index.js")]),s._v("文件中修改:")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" router "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Router")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//...")]),s._v("\n  base"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BASE_URL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[n("code",[s._v("process.env.BASE_URL")]),s._v("的值就是"),n("code",[s._v("publicPath")]),s._v("的值。")])])]),s._v(" "),n("p",[s._v("用Vue CLI2搭建：")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("把"),n("code",[s._v("assetsPublicPath")]),s._v("的值修改为子路径"),n("code",[s._v("/bbb/")]),s._v("，在 "),n("code",[s._v("config/index.js")]),s._v("中修改如下配置：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  build"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    assetsPublicPath"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/bbb/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("把路由的基路径"),n("code",[s._v("base")]),s._v("的值修改为子路径"),n("code",[s._v("/bbb/")]),s._v("，在"),n("code",[s._v("src/router/index.js")]),s._v("文件中修改:")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" router "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Router")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//...")]),s._v("\n  base"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("bbb")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])])])]),s._v(" "),n("h4",{attrs:{id:"利用反向代理来部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#利用反向代理来部署"}},[s._v("#")]),s._v(" 利用反向代理来部署")]),s._v(" "),n("p",[s._v("在 "),n("em",[s._v("conf/vhost")]),s._v(" 文件夹下创建 "),n("em",[s._v("A.conf")]),s._v(" 来写入A工程部署到域名XXX（ "),n("a",{attrs:{href:"http://www.xxx.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("www.xxx.com"),n("OutboundLink")],1),s._v(" ）根路径上的部署配置，如下所示：")]),s._v(" "),n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# A.conf")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("listen")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server_name")]),s._v(" xxx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n     "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("root")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("samyz"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("deploy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("avue"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n     "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try_files")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n     "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bbb "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("proxy_pass")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("http")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.203")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".19")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".74")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8081")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("在 conf/vhost 文件夹下创建 B.conf 来写入B工程部署到端口为8081的服务上的部署配置，如下所示：")]),s._v(" "),n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# B.conf")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("listen")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8001")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("root")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("samyz"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("deploy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bvue"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try_files")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("在 "),n("em",[s._v("conf/vhost/A.conf")]),s._v(" 文件中添加反向代理的配置，实现访问 "),n("a",{attrs:{href:"http://www.xxx.com/bbb/",target:"_blank",rel:"noopener noreferrer"}},[s._v("www.xxx.com/bbb/"),n("OutboundLink")],1),s._v(" 时，通过反向代理访问 http://10.203.19.74:8081/ ，其中 10.203.19.74 为真实服务器ip地址。这样间接实现了在域名XXX（ "),n("a",{attrs:{href:"http://www.xxx.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("www.xxx.com"),n("OutboundLink")],1),s._v(" ）的子路径 /bbb/ 上部署了B工程。")]),s._v(" "),n("h4",{attrs:{id:"利用root配置来部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#利用root配置来部署"}},[s._v("#")]),s._v(" 利用root配置来部署")]),s._v(" "),n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# A.conf")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("listen")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server_name")]),s._v(" xxx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("root")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("samyz"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("deploy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("avue"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try_files")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bbb "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alias")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("samyz"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("deploy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bvue"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try_files")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" @router"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" @router "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("root")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("samyz"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("deploy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bvue"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rewrite")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("break")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("p",[s._v("这里用修饰符 "),n("code",[s._v("@")]),s._v(" 创建一个内部的location块（@router），在这个location块中用"),n("code",[s._v("rewrite")]),s._v("指令来解决这个问题。")]),s._v(" "),n("h4",{attrs:{id:"利用alias配置来部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#利用alias配置来部署"}},[s._v("#")]),s._v(" 利用alias配置来部署")]),s._v(" "),n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# A.conf")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("listen")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server_name")]),s._v(" xxx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("root")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("samyz"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("deploy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("avue"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try_files")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bbb "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("root")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("samyz"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("deploy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bvue"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try_files")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" @router"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" @router "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  \t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("root")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("samyz"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("deploy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bvue"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  \t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rewrite")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("break")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("ul",[n("li",[s._v("匹配规则为"),n("code",[s._v("/")]),s._v("的location块中"),n("code",[s._v("root")]),s._v("所配置是A工程编译打包后生成的文件夹在服务器上存放的路径；")]),s._v(" "),n("li",[s._v("匹配规则为"),n("code",[s._v("/bbb")]),s._v("的location块中 "),n("code",[s._v("root")]),s._v(" 所配置是B工程代码所在的文件夹在服务器上存放的路径；")]),s._v(" "),n("li",[s._v("@router的location块中的"),n("code",[s._v("root")]),s._v("所配置是B工程编译打包后生成的文件夹在服务器上存放的路径。")])]),s._v(" "),n("p",[s._v("同时要把工程编译打包生成的文件夹名称改成和所部署域名的子路径一样。在Vue工程中可以这么配置。")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("用Vue CLI3搭建：在"),n("code",[s._v("vue.config.js")]),s._v("文件中修改"),n("code",[s._v("outputDir")]),s._v("为"),n("code",[s._v("bbb")]),s._v(";")]),s._v(" "),n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[s._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  outputDir"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bbb'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("用Vue CLI2搭建：在"),n("code",[s._v("config/index.js")]),s._v("文件中修改如下配置：")]),s._v(" "),n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[s._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  build"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n    assetsRoot"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../bbb'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])])])]),s._v(" "),n("h2",{attrs:{id:"相关链接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#相关链接"}},[s._v("#")]),s._v(" 相关链接")]),s._v(" "),n("p",[s._v("https://juejin.cn/post/6919799574253174792")])])}),[],!1,null,null,null);t.default=e.exports}}]);