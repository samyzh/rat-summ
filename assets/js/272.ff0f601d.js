(window.webpackJsonp=window.webpackJsonp||[]).push([[272],{1372:function(s,a,e){s.exports=e.p+"assets/img/image-20220311103514705.0c6a702b.png"},2170:function(s,a,e){"use strict";e.r(a);var t=e(14),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),t("h3",{attrs:{id:"yum安装redis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yum安装redis"}},[s._v("#")]),s._v(" yum安装Redis")]),s._v(" "),t("p",[s._v("在本节中，您将添加"),t("a",{attrs:{href:"https://fedoraproject.org/wiki/EPEL",target:"_blank",rel:"noopener noreferrer"}},[s._v("EPEL"),t("OutboundLink")],1),s._v("存储库，然后使用它来安装Redis。")]),s._v(" "),t("ol",[t("li",[s._v("添加EPEL存储库，并更新YUM以确认您的更改： sudo yum install epel-release sudo yum update")]),s._v(" "),t("li",[s._v("安装Redis： sudo yum install redis")]),s._v(" "),t("li",[s._v("启动Redis： sudo systemctl start redis "),t("strong",[s._v("可选")]),s._v("：要在启动时自动启动Redis： sudo systemctl enable redis")])]),s._v(" "),t("p",[t("strong",[s._v("在CentOS和Red Hat系统中，首先添加EPEL仓库，然后更新yum源：")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y epel-release redis\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sudo yum update")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("普通安装，非最细你版本，是3.2.8版本")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" redis\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("yum安装最新redis")]),s._v("\n如果要安装最新的redis，需要安装Remi的软件源，官网地址：http://rpms.famillecollet.com/")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y http://rpms.famillecollet.com/enterprise/remi-release-7.rpm\nyum --enablerepo"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("remi "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" redis\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("安装好后启动Redis服务即可：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start redis\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这里同样可以使用redis-cli进入Redis命令行模式操作。")]),s._v(" "),t("p",[s._v("另外，为了可以使Redis能被远程连接，需要修改配置文件，路径为/etc/redis.conf")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/redis.conf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("需要修改的地方：")]),s._v(" "),t("p",[s._v("首先，注释这一行：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#bind 127.0.0.1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("另外，推荐给Redis设置密码，取消注释这一行：")]),s._v(" "),t("p",[s._v("#requirepass foobared")]),s._v(" "),t("p",[s._v("foobared即当前密码，可以自行修改为")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("requirepass 密码\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("然后重启Redis服务，使用的命令如下：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart redis\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动redis")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" redis start\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止redis")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" redis stop\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看redis运行状态")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" redis status\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看redis进程")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" redis\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"源码包方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#源码包方式"}},[s._v("#")]),s._v(" 源码包方式")]),s._v(" "),t("h4",{attrs:{id:"安装及设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装及设置"}},[s._v("#")]),s._v(" 安装及设置")]),s._v(" "),t("h5",{attrs:{id:"编译"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译"}},[s._v("#")]),s._v(" 编译")]),s._v(" "),t("p",[s._v("将准备好的  "),t("code",[s._v("nginx-1.18.0.tar.gz")]),s._v(" 包，拷贝至 "),t("code",[s._v("/usr/local/nginx")]),s._v(" 目录下（一般习惯在此目录下进行安装）进行解压缩。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v("  http://10.45.46.xxx:xxx/files/autorun/redis-3.2.11.tar.gz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf  redis-3.2.11.tar.gz "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压缩")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在完成解压缩后，进入 "),t("code",[s._v("redis-3.2.11")]),s._v(" 目录进行源码编译安装。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" redis-3.2.11\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make install #默认安装")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PREFIX")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/redis "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#后面的是你想要安装的路径")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" ./redis.conf  /usr/local/redis/bin/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("源码包安装与 yum 安装的 nginx 服务操作命令也不同。")]),s._v(" "),t("h5",{attrs:{id:"开启后台运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开启后台运行"}},[s._v("#")]),s._v(" "),t("strong",[s._v("开启后台运行")])]),s._v(" "),t("p",[s._v("打开文件后，如果你想查找，直接输入 / +你想要查找的字段 比如 / daemonized然后回车就可以查找了，按n表示下一个匹配字符：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /usr/local/redis/bin/redis.conf\n修改redis.conf文件中的daemonize no为daemonize yes并保存\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h5",{attrs:{id:"全局命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#全局命令"}},[s._v("#")]),s._v(" 全局命令")]),s._v(" "),t("p",[t("s",[t("strong",[s._v("把redis命令添加到环境变量")]),s._v("； 取消用这种方式；")])]),s._v(" "),t("p",[s._v("使用软连接将"),t("code",[s._v("redis")]),s._v("链接到"),t("code",[s._v("/usr/local/bin")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /usr/local/redis/redis-server /usr/local/bin\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /usr/local/redis/redis-cli /usr/local/bin\nll /usr/local/bin/ "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"redis"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过软连接，这样就可以直接使用 redis 执行")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /usr/local/redis/bin/redis-server /usr/bin/redis\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /usr/local/redis/bin/redis-cli /usr/bin/redis-cli\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动并指定配置")]),s._v("\nredis-server ./redis.conf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[t("s",[s._v("添加到环境变量"),t("code",[s._v("PATH")]),s._v("; 不用这里再次设置；")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" ~/.bash_profile\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v(":/usr/local/redis/bin\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/.bash_profile\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[t("strong",[s._v("改成直接引用到"),t("code",[s._v("/usr/bin")]),s._v("目录；")]),s._v("【推荐】")]),s._v(" "),t("p",[s._v("创建redis命令软连接")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /usr/local/redis/bin/redis-server /usr/bin/redis\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /usr/local/redis/bin/redis-cli /usr/bin/redis-cli "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#在任意命令行执行redis")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("strong",[s._v("设置服务启动脚本")])]),s._v(" "),t("blockquote",[t("p",[s._v("非必须设置；")])]),s._v(" "),t("p",[s._v("手动启动： "),t("code",[s._v("redis /usr/local/redis/redis.conf")])]),s._v(" "),t("p",[s._v("服务启动：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /usr/local/redis/bin/redis-server /etc/init.d/redis\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" redis start\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("停止服务")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("redis-cli "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("查看 nginx 服务进程")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("redis \n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" redis "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看服务进程")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h4",{attrs:{id:"开机启动服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开机启动服务"}},[s._v("#")]),s._v(" 开机启动服务")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#vim /etc/systemd/system/redis-server.service")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#vim /etc/systemd/system/redis.service")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /usr/lib/systemd/system/redis.service\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("粘贴以下内容")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("The redis-server Process Manager\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("After")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("syslog.target network.target\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("simple\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PIDFile")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/run/redis_6379.pid\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/redis/bin/redis-server /usr/local/redis/bin/redis.conf         \n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecReload")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/bin/kill -USR2 "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$MAINPID")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStop")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/bin/kill -SIGINT "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$MAINPID")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WantedBy")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("multi-user.target\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h4",{attrs:{id:"设置开机启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置开机启动"}},[s._v("#")]),s._v(" 设置开机启动")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("systemctl daemon-reload \nsystemctl start redis.service \nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" redis.service\n\nsystemctl status redis.service\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("strong",[s._v("另外一种方设置：")])]),s._v(" "),t("p",[s._v("设置redis为开机自动启动")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" redis on\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("服务操作命令")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("systemctl start redis.service "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动redis服务器")]),s._v("\nsystemctl stop redis.service "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#停止redis服务器")]),s._v("\nsystemctl restart redis.service "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重新启动redis服务器")]),s._v("\n\nsystemctl status redis.service "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#获取redis服务器的运行状态")]),s._v("\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" redis.service "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开机启动redis服务器")]),s._v("\nsystemctl disable redis.service "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开机禁用redis服务器")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h4",{attrs:{id:"开放端口和重启防火墙"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开放端口和重启防火墙"}},[s._v("#")]),s._v(" 开放端口和重启防火墙")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# firewall-cmd --zone=public --add-port=80/tcp --permanent")]),s._v("\nsuccess\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# firewall-cmd --zone=public --add-port=6379/tcp --permanent")]),s._v("\nsuccess\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl restart firewalld")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启6379")]),s._v("\n/sbin/iptables -I INPUT -p tcp --dport "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(" -j ACCEPT\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启6380")]),s._v("\n/sbin/iptables -I INPUT -p tcp --dport "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v(" -j ACCEPT\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存")]),s._v("\n/etc/rc.d/init.d/iptables save\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# centos 7下执行")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" iptables save\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"验证安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#验证安装"}},[s._v("#")]),s._v(" 验证安装")]),s._v(" "),t("p",[s._v("验证Redis是否正在运行"),t("code",[s._v("redis-cli")]),s._v("：")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("redis ping\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果Redis正在运行，它将返回：")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PONG")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"dokcer方式封装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dokcer方式封装"}},[s._v("#")]),s._v(" dokcer方式封装")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("RUN yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y gcc epel-release redis\nRUN "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -rf /srv/app/soft/redis/redis.conf /etc/redis.conf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"mac下安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mac下安装"}},[s._v("#")]),s._v(" Mac下安装")]),s._v(" "),t("h4",{attrs:{id:"源码安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#源码安装"}},[s._v("#")]),s._v(" 源码安装")]),s._v(" "),t("h5",{attrs:{id:"步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤"}},[s._v("#")]),s._v(" "),t("strong",[s._v("步骤")])]),s._v(" "),t("ul",[t("li",[s._v("解压："),t("code",[s._v("tar zxvf redis-4.0.10.tar.gz")])]),s._v(" "),t("li",[s._v("移动到： "),t("code",[s._v("mv redis-4.0.10 /usr/local/")])]),s._v(" "),t("li",[s._v("切换到："),t("code",[s._v("cd /usr/local/redis-4.0.10/")])]),s._v(" "),t("li",[s._v("编译测试 "),t("code",[s._v("sudo make test")])]),s._v(" "),t("li",[s._v("编译安装 "),t("code",[s._v("sudo make install")])]),s._v(" "),t("li",[s._v("安装成功后，输入"),t("code",[s._v("redis-server")]),s._v("启动redis")]),s._v(" "),t("li",[s._v("新建一个终端窗口，输入命令行"),t("code",[s._v("redis-cli")])])]),s._v(" "),t("h5",{attrs:{id:"在bin下可执行的程序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在bin下可执行的程序"}},[s._v("#")]),s._v(" 在bin下可执行的程序")]),s._v(" "),t("ul",[t("li",[s._v("redis-server: Redis服务器")]),s._v(" "),t("li",[s._v("redis-cli: 命令行客户端")]),s._v(" "),t("li",[s._v("redis-benchmark: Redis的性能测试工具")]),s._v(" "),t("li",[s._v("redis-check-aof: AOF文件修复工具")]),s._v(" "),t("li",[s._v("redis-check-dump: RDB文件检测工具")]),s._v(" "),t("li",[s._v("redis.conf: Redis的配置文件")])]),s._v(" "),t("p",[t("strong",[s._v("redis默认是前台启动，如果我们想以守护进程的方式运行（后台运行），可以在redis.conf中将"),t("code",[s._v("daemonize no")]),s._v(",修改成"),t("code",[s._v("yes")]),s._v("即可。")])]),s._v(" "),t("p",[s._v("进入"),t("code",[s._v("/usr/local/bin")]),s._v("目录下。输入命令即可开启redis服务。")]),s._v(" "),t("h5",{attrs:{id:"启动和停止redis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动和停止redis"}},[s._v("#")]),s._v(" 启动和停止Redis")]),s._v(" "),t("p",[s._v("启动：")]),s._v(" "),t("ul",[t("li",[s._v("redis-server")]),s._v(" "),t("li",[s._v("redis-server /etc/redis.conf")])]),s._v(" "),t("p",[s._v("停止")]),s._v(" "),t("ul",[t("li",[s._v("shutdown（在redis-3.2.8是"),t("code",[s._v("shutdown nosave/save")]),s._v("）")])]),s._v(" "),t("p",[s._v("关闭redis服务")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("正确停止Redis的方式应该是向Redis发送SHUTDOWN命令；"),t("code",[s._v("redis-cli shutdown")])])]),s._v(" "),t("li",[t("p",[s._v("强行终止redis；"),t("code",[s._v("sudo pkill redis-server")])])])]),s._v(" "),t("p",[s._v("链接")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("ps axu | grep redis")])]),s._v(" "),t("li",[t("code",[s._v("redis-cli")])]),s._v(" "),t("li",[t("code",[s._v("redis-cli -h 127.0.0.1 -p 6379")])])]),s._v(" "),t("h4",{attrs:{id:"homebrew安装-推荐"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#homebrew安装-推荐"}},[s._v("#")]),s._v(" Homebrew安装[推荐]")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#没有安装Homebrew，首先安装npm国内的吧，快一些； 直接使用的阿里云的镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#/bin/zsh -c "$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)"')]),s._v("\n\nbrew "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" redis\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("img",{attrs:{src:e(1372),alt:"image-20220311103514705"}})]),s._v(" "),t("p",[s._v("查看安装及配置文件位置")]),s._v(" "),t("ul",[t("li",[s._v("Homebrew安装的软件会默认在"),t("code",[s._v("/usr/local/Cellar/")]),s._v("路径下")]),s._v(" "),t("li",[s._v("redis的配置文件"),t("code",[s._v("redis.conf")]),s._v("存放在"),t("code",[s._v("/usr/local/etc")]),s._v("路径下")])]),s._v(" "),t("p",[s._v("启动redis服务")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//方式一：使用brew帮助我们启动软件")]),s._v("\nbrew services start redis\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//方式二")]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//执行以下命令")]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"卸载redis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#卸载redis"}},[s._v("#")]),s._v(" "),t("strong",[s._v("卸载redis")])]),s._v(" "),t("p",[s._v("卸载redis服务，只需把/usr/local/bin/目录下的redis删除即可")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf /usr/local/bin/redis*\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("甚至可以把解压包也删除掉")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf /root/redis-stable\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"登录及密码配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#登录及密码配置"}},[s._v("#")]),s._v(" 登录及密码配置")]),s._v(" "),t("h3",{attrs:{id:"连接登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#连接登录"}},[s._v("#")]),s._v(" 连接登录")]),s._v(" "),t("h4",{attrs:{id:"交互式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#交互式"}},[s._v("#")]),s._v(" 交互式")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("#redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("host"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n$redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("："),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hello world\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("OK")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("："),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("get")]),s._v(" hello\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"world"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h4",{attrs:{id:"命令式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令式"}},[s._v("#")]),s._v(" 命令式")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("#redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("host"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("command"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n$redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("get")]),s._v(" hello\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"world"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"永久设置redis密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#永久设置redis密码"}},[s._v("#")]),s._v(" 永久设置Redis密码")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("vim "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf\n#在配置文件中有个参数：requirepass 这个就是配置redis访问密码的参数；\n#比如 requirepass test123；\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("需重启Redis才能生效")]),s._v(" "),t("h3",{attrs:{id:"临时设置redis密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#临时设置redis密码"}},[s._v("#")]),s._v(" 临时设置Redis密码")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("redis "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" requirepass test123\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"查询密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查询密码"}},[s._v("#")]),s._v(" 查询密码：")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("redis "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("requirepass")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ERR")]),s._v(" operation not permitted\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h4",{attrs:{id:"密码验证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#密码验证"}},[s._v("#")]),s._v(" 密码验证：")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("redis "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" auth test123\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("OK")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h4",{attrs:{id:"再次查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#再次查询"}},[s._v("#")]),s._v(" 再次查询：")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("redis "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("get")]),s._v(" requirepass\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"requirepass"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test123"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"登陆有密码的redis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#登陆有密码的redis"}},[s._v("#")]),s._v(" 登陆有密码的Redis")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("a test123\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"先登陆后验证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#先登陆后验证"}},[s._v("#")]),s._v(" 先登陆后验证")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\nredis "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" auth test123\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("OK")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"修改配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改配置"}},[s._v("#")]),s._v(" 修改配置")]),s._v(" "),t("h3",{attrs:{id:"启动远程连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动远程连接"}},[s._v("#")]),s._v(" 启动远程连接")]),s._v(" "),t("p",[s._v("防火墙放行")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("firewall-cmd --zone"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp --permanent\nfirewall-cmd --zone"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("/tcp --permanent\nsystemctl restart firewalld\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("修改redis.conf配置文件\n关闭protected-mode模式，此时外部网络可以直接访问")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("修改redis.conf 文件，protected-mode 要设置成no。\n//如果需要设置密码requirepass 空格后面跟设置的密码\n修改redis.conf 文件，将 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("bind")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 修改成bind * -::* \n或者直接将bind这一行注释掉\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("用vi打开redis.conf,进行以下三项更改：")]),s._v(" "),t("ul",[t("li",[s._v("#bind 127.0.0.1    # 这里要注释掉，否则只有本机能访问")]),s._v(" "),t("li",[s._v("protected-mode no  # 这里由yes改为no")]),s._v(" "),t("li",[s._v("requirepass 123456 # 这里设置上密码")])]),s._v(" "),t("p",[s._v("改完后再重启下服务：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost etc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl restart redis.service")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("完执行重启一下服务。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("redis-cli -h "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\ninfo\nauth "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("\ninfo\n\nredis-cli -h "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" name ufo\nget name\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"干掉redis服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#干掉redis服务器"}},[s._v("#")]),s._v(" 干掉redis服务器")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" -9 pid 进程号\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"链接其他ip地址的redis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#链接其他ip地址的redis"}},[s._v("#")]),s._v(" 链接其他ip地址的redis")]),s._v(" "),t("p",[s._v("这里的ip是根据你要链接的ip地址进行更换的")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("./redis-cli -h "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.20 -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果设置了密码，那么就再输入auth空格+密码")]),s._v(" "),t("p",[t("strong",[s._v("auth 密码")])]),s._v(" "),t("p",[s._v("在链接时直接加上你的密码")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("./redis-cli -h 你服务器的ip -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(" -a 你的密码\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"redis常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis常用命令"}},[s._v("#")]),s._v(" redis常用命令")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("用途")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("set key value")]),s._v(" "),t("td",[s._v("设置 key 的值")])]),s._v(" "),t("tr",[t("td",[s._v("get key")]),s._v(" "),t("td",[s._v("获取 key 的值")])]),s._v(" "),t("tr",[t("td",[s._v("exists key")]),s._v(" "),t("td",[s._v("查看此 key 是否存在")])]),s._v(" "),t("tr",[t("td",[s._v("keys *")]),s._v(" "),t("td",[s._v("查看所有的 key")])]),s._v(" "),t("tr",[t("td",[s._v("flushall")]),s._v(" "),t("td",[s._v("消除所有的 key")])])])]),s._v(" "),t("h2",{attrs:{id:"参考链接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[s._v("#")]),s._v(" 参考链接")]),s._v(" "),t("p",[s._v("https://cloud.tencent.com/developer/article/1553633")])])}),[],!1,null,null,null);a.default=r.exports}}]);