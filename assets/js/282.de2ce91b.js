(window.webpackJsonp=window.webpackJsonp||[]).push([[282],{1501:function(s,t,a){s.exports=a.p+"assets/img/image-20211003234437464.94f59645.png"},2246:function(s,t,a){"use strict";a.r(t);var n=a(14),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#流程"}},[s._v("#")]),s._v(" 流程")]),s._v(" "),n("h3",{attrs:{id:"webpack与gulp、grunt的区别"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#webpack与gulp、grunt的区别"}},[s._v("#")]),s._v(" webpack与gulp、grunt的区别")]),s._v(" "),n("p",[n("strong",[s._v("Grunt")]),s._v("：大量现成的插件"),n("strong",[s._v("封装了常见的任务(Task)")]),s._v("，也能管理任务之间的依赖关系，自动化执行依赖的任务\n"),n("strong",[s._v("Gulp")]),s._v("：是一个"),n("strong",[s._v("基于流(Stream)的自动化构建工具")]),s._v("。 除了可以管理和执行任务，还支持监听文件、读写文件。\nGulp 的"),n("strong",[s._v("最大特点是引入了流的概念，同时提供了一系列常用的插件去处理流，流可以在插件之间传递")]),s._v("。Gulp 的优点是好用又不失灵活，"),n("strong",[s._v("既可以单独完成构建也可以和其它工具搭配使用")]),s._v("。Gulp 被设计得非常简单，只通过下面5个方法就可以胜任几乎所有构建场景："),n("strong",[s._v("【WRTSD】")])]),s._v(" "),n("ul",[n("li",[s._v("通过 gulp.task 注册一个任务；")]),s._v(" "),n("li",[s._v("通过 gulp.run 执行任务；")]),s._v(" "),n("li",[s._v("通过 gulp.watch 监听文件变化；")]),s._v(" "),n("li",[s._v("通过 gulp.src 读取文件；")]),s._v(" "),n("li",[s._v("通过 gulp.dest 写文件。")])]),s._v(" "),n("p",[n("strong",[s._v("Webpack")]),s._v("：webpack是"),n("strong",[s._v("基于入口的")]),s._v("。webpack会"),n("strong",[s._v("自动地递归解析入口所需要加载的所有资源文件，然后用不同的Loader来处理不同的文件，用Plugin来扩展webpack功能")]),s._v("。")]),s._v(" "),n("p",[n("strong",[s._v("总括")]),s._v("：")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("从构建思路来说")]),s._v("\ngulp和grunt需要开发者"),n("strong",[s._v("将整个前端构建过程拆分成多个"),n("code",[s._v("Task")]),s._v("，并合理控制所有"),n("code",[s._v("Task")]),s._v("的调用关系")]),s._v("；\nwebpack需要开发者找到入口，并需要清楚对于不同的资源应该使用什么Loader做何种解析和加工；")]),s._v(" "),n("li",[n("strong",[s._v("对于知识背景来说")]),s._v(" "),n("strong",[s._v("gulp更像后端开发者的思路")]),s._v("，需要"),n("strong",[s._v("对于整个流程了如指掌 webpack更倾向于前端开发者的思路")])])]),s._v(" "),n("h3",{attrs:{id:"与其他类似工具比较"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#与其他类似工具比较"}},[s._v("#")]),s._v(" 与其他类似工具比较")]),s._v(" "),n("p",[n("strong",[s._v("从应用场景上来看：")])]),s._v(" "),n("ul",[n("li",[n("p",[n("code",[s._v("webpack")]),s._v("适用于"),n("strong",[s._v("大型复杂的前端站点构建")]),s._v(";")])]),s._v(" "),n("li",[n("p",[n("code",[s._v("rollup")]),s._v("适用于基础库的打包，如vue、react;")])]),s._v(" "),n("li",[n("p",[n("code",[s._v("parcel")]),s._v("适用于简单的实验性项目，他可以满足低门槛的快速看到效果;")]),s._v(" "),n("blockquote",[n("p",[s._v("由于parcel在打包过程中给出的调试信息十分有限，所以一旦打包出错难以调试，所以不建议复杂的项目使用parcel")])])])]),s._v(" "),n("h3",{attrs:{id:"webpack构建流程简单说一下"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#webpack构建流程简单说一下"}},[s._v("#")]),s._v(" Webpack构建流程简单说一下")]),s._v(" "),n("h4",{attrs:{id:"工作流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#工作流程"}},[s._v("#")]),s._v(" 工作流程")]),s._v(" "),n("p",[s._v("webpack"),n("strong",[s._v("本质上是一种事件流的机制")]),s._v("，它的"),n("strong",[s._v("工作流程")]),s._v("就是将各个插件串联起来，而实现的核心就是 "),n("code",[s._v("tapable")])]),s._v(" "),n("p",[s._v("webpack中最核心的"),n("strong",[s._v("负责编译的"),n("code",[s._v("Compiler")]),s._v("和负责创建bundles的"),n("code",[s._v("Compilation")]),s._v("都是Tapable的实例")]),s._v("。")]),s._v(" "),n("h4",{attrs:{id:"简述【要点】"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#简述【要点】"}},[s._v("#")]),s._v(" "),n("strong",[s._v("简述")]),s._v("【要点】")]),s._v(" "),n("ul",[n("li",[s._v("初始化：启动构建，读取与合并配置参数，加载 Plugin，实例化 Compiler")]),s._v(" "),n("li",[s._v("编译：从 Entry 出发，针对每个 Module 串行调用对应的 Loader 去翻译文件的内容，再找到该 Module 依赖的 Module，递归地进行编译处理")]),s._v(" "),n("li",[s._v("输出：将编译后的 Module 组合成 Chunk，将 Chunk 转换成文件，输出到文件系统中")])]),s._v(" "),n("h4",{attrs:{id:"完整流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#完整流程"}},[s._v("#")]),s._v(" 完整流程")]),s._v(" "),n("p",[n("strong",[s._v("Webpack 的运行流程是一个串行的过程，从启动到结束会依次执行以下流程：")])]),s._v(" "),n("ul",[n("li",[n("code",[s._v("初始化参数")]),s._v("：从配置文件和 Shell 语句中读取与合并参数，得出最终的参数")]),s._v(" "),n("li",[n("code",[s._v("开始编译")]),s._v("：用上一步得到的参数初始化 Compiler 对象，加载所有配置的插件，执行对象的 run 方法开始执行编译")]),s._v(" "),n("li",[n("code",[s._v("确定入口")]),s._v("：根据配置中的 entry 找出所有的入口文件")]),s._v(" "),n("li",[n("code",[s._v("编译模块")]),s._v("：从入口文件出发，调用所有配置的 Loader 对模块进行翻译，再找出该模块依赖的模块，再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理")]),s._v(" "),n("li",[n("code",[s._v("完成模块编译")]),s._v("：在经过第4步使用 Loader 翻译完所有模块后，得到了每个模块被翻译后的最终内容以及它们之间的依赖关系")]),s._v(" "),n("li",[n("code",[s._v("输出资源")]),s._v("：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 Chunk，再把每个 Chunk 转换成一个单独的文件加入到输出列表，这步是可以修改输出内容的最后机会")]),s._v(" "),n("li",[n("code",[s._v("输出完成")]),s._v("：在确定好输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统")])]),s._v(" "),n("p",[s._v("在以上过程中，"),n("code",[s._v("Webpack")]),s._v(" 会在特定的时间点广播出特定的事件，插件在监听到感兴趣的事件后会执行特定的逻辑，并且插件可以调用 Webpack 提供的 API 改变 Webpack 的运行结果。")]),s._v(" "),n("h3",{attrs:{id:"webpack的流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#webpack的流程"}},[s._v("#")]),s._v(" webpack的流程")]),s._v(" "),n("ol",[n("li",[s._v("初始化参数：从配置文件和Shell语句中读取和合并参数；")]),s._v(" "),n("li",[s._v("开始编译：用上一步得到的初始化Compiler对象，加载所有配置的插件，执行对象的run的方法开始执行编译；")]),s._v(" "),n("li",[s._v("确定入口：根据配置中的entry找到所有的入口文件")]),s._v(" "),n("li",[s._v("编译模块：从入口文件出发，调用所有配置的Loader 对模块进行编译，再找出该模块依赖的模块，在递归本步骤直到所有入口依赖的文件都经过了本步骤的处理；")]),s._v(" "),n("li",[s._v("完成模块编译：在经过第4步使用 Loader 翻译完所有模块后，得到了每个模块被翻译后的最终内容以及它们之间的依赖关系；")]),s._v(" "),n("li",[s._v("输出资源：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 Chunk，再把每个 Chunk 转换成一个单独的文件加入到输出列表，这步是可以修改输出内容的最后机会；")]),s._v(" "),n("li",[s._v("输出完成：在确定好输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统。")])]),s._v(" "),n("h3",{attrs:{id:"编译钩子顺序"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#编译钩子顺序"}},[s._v("#")]),s._v(" 编译钩子顺序")]),s._v(" "),n("p",[s._v("按照下面的钩子调用顺序执行。")]),s._v(" "),n("ul",[n("li",[s._v("before-run 清除缓存")]),s._v(" "),n("li",[s._v("run 注册缓存数据钩子")]),s._v(" "),n("li",[s._v("before-compile")]),s._v(" "),n("li",[s._v("compile 开始编译")]),s._v(" "),n("li",[s._v("make 从入口分析依赖以及间接依赖模块，创建模块对象")]),s._v(" "),n("li",[s._v("build-module 模块构建")]),s._v(" "),n("li",[s._v("seal 构建结果封装， 不可再更改")]),s._v(" "),n("li",[s._v("after-compile 完成构建，缓存数据")]),s._v(" "),n("li",[s._v("emit 输出到dist目录")])]),s._v(" "),n("h2",{attrs:{id:"loader-plugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#loader-plugin"}},[s._v("#")]),s._v(" loader&plugin")]),s._v(" "),n("h3",{attrs:{id:"那你再说一说loader和plugin的区别-【要点】"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#那你再说一说loader和plugin的区别-【要点】"}},[s._v("#")]),s._v(" 那你再说一说Loader和Plugin的区别？【要点】")]),s._v(" "),n("h4",{attrs:{id:"原理方面"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#原理方面"}},[s._v("#")]),s._v(" 原理方面")]),s._v(" "),n("p",[n("strong",[n("code",[s._v("Loader")]),s._v(" 本质就是一个函数")]),s._v("，在"),n("strong",[s._v("该函数中对接收到的内容进行转换，返回转换后的结果")]),s._v("。 因为 Webpack 只认识 JavaScript，所以 Loader 就成了翻译官，"),n("strong",[s._v("对其他类型的资源进行转译的预处理工作。")])]),s._v(" "),n("p",[n("strong",[n("code",[s._v("Plugin")]),s._v(" 就是插件，基于事件流框架 "),n("code",[s._v("Tapable")])]),s._v("，插件可以扩展 Webpack 的功能，在 Webpack 运行的生命周期中会广播出许多事件，Plugin 可以监听这些事件，在合适的时机通过 Webpack 提供的 API 改变输出结果。")]),s._v(" "),n("h4",{attrs:{id:"配置方面"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置方面"}},[s._v("#")]),s._v(" 配置方面")]),s._v(" "),n("p",[n("strong",[n("code",[s._v("Loader")]),s._v(" 在 module.rules 中配置")]),s._v("，作为模块的解析规则，类型为数组。"),n("strong",[s._v("每一项都是一个 Object，内部包含了 test(类型文件)、loader、options (参数)等属性。")])]),s._v(" "),n("p",[n("strong",[n("code",[s._v("Plugin")]),s._v(" 在 plugins 中单独配置")]),s._v("，类型为数组，每一项是一个 Plugin 的实例，参数都通过构造函数传入。")]),s._v(" "),n("p",[n("strong",[s._v("示范")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v(" module"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//启用happypack多核构建项目")]),s._v("\n    rules"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        test"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.js$")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        include"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'src'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        exclude"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("node_modules")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// loader: 'babel-loader?cacheDirectory',")]),s._v("\n        loader"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'happypack/loader?id=babel'")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        test"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.vue$")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        include"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'src'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        exclude"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("node_modules")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        loader"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'happypack/loader?id=vue'")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  plugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HappyPack")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'babel'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// HappyPack的id，和上面module里rules的查询参数一致")]),s._v("\n      loaders"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'babel-loader?cacheDirectory=true'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      threads"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 开启 4 个线程")]),s._v("\n      threadPool"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" happyThreadPool"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 指定进程池")]),s._v("\n      verbose"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("h3",{attrs:{id:"有哪些常见的loader-你用过哪些loader"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#有哪些常见的loader-你用过哪些loader"}},[s._v("#")]),s._v(" 有哪些常见的Loader？你用过哪些Loader？")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("raw-loader")]),s._v("：加载文件原始内容（utf-8）")]),s._v(" "),n("li",[n("code",[s._v("file-loader")]),s._v("：把文件输出到一个文件夹中，在代码中通过相对 URL 去引用输出的文件 (处理图片和字体)")]),s._v(" "),n("li",[n("code",[s._v("url-loader")]),s._v("：与 file-loader 类似，"),n("strong",[s._v("区别是用户可以设置一个阈值，大于阈值会交给 file-loader 处理，小于阈值时返回文件 base64 形式编码 (处理图片和字体)")])]),s._v(" "),n("li",[n("code",[s._v("source-map-loader")]),s._v("：加载额外的 Source Map 文件，以方便断点调试")]),s._v(" "),n("li",[n("code",[s._v("svg-inline-loader")]),s._v("：将压缩后的 SVG 内容注入代码中")]),s._v(" "),n("li",[n("code",[s._v("image-loader")]),s._v("：加载并且压缩图片文件")]),s._v(" "),n("li",[n("code",[s._v("json-loader")]),s._v(" 加载 JSON 文件（默认包含）")]),s._v(" "),n("li",[n("code",[s._v("handlebars-loader")]),s._v(": 将 Handlebars 模版编译成函数并返回")]),s._v(" "),n("li",[n("code",[s._v("babel-loader")]),s._v("："),n("strong",[s._v("把 ES6 转换成 ES5")])]),s._v(" "),n("li",[n("code",[s._v("ts-loader")]),s._v(": "),n("strong",[s._v("将 TypeScript 转换成 JavaScript")])]),s._v(" "),n("li",[n("code",[s._v("awesome-typescript-loader")]),s._v("：将 TypeScript 转换成 JavaScript，性能优于 ts-loader")]),s._v(" "),n("li",[n("code",[s._v("sass-loader")]),s._v("："),n("strong",[s._v("将SCSS/SASS代码转换成CSS")])]),s._v(" "),n("li",[n("code",[s._v("css-loader")]),s._v("："),n("strong",[s._v("加载 CSS，支持模块化、压缩、文件导入等特性")])]),s._v(" "),n("li",[n("code",[s._v("style-loader")]),s._v("："),n("strong",[s._v("把 CSS 代码注入到 JavaScript 中，通过 DOM 操作去加载 CSS")])]),s._v(" "),n("li",[n("code",[s._v("postcss-loader")]),s._v("：扩展 CSS 语法，"),n("strong",[s._v("使用下一代 CSS，可以配合 autoprefixer 插件自动补齐 CSS3 前缀")])]),s._v(" "),n("li",[n("code",[s._v("eslint-loader")]),s._v("：通过 ESLint 检查 JavaScript 代码")]),s._v(" "),n("li",[n("code",[s._v("tslint-loader")]),s._v("：通过 TSLint检查 TypeScript 代码")]),s._v(" "),n("li",[n("code",[s._v("mocha-loader")]),s._v("：加载 Mocha 测试用例的代码")]),s._v(" "),n("li",[n("code",[s._v("coverjs-loader")]),s._v("：计算测试的覆盖率")]),s._v(" "),n("li",[n("code",[s._v("vue-loader")]),s._v("：加载 Vue.js 单文件组件")]),s._v(" "),n("li",[n("code",[s._v("i18n-loader")]),s._v(": 国际化")]),s._v(" "),n("li",[n("code",[s._v("cache-loader")]),s._v(": 可以在一些性能开销较大的 Loader 之前添加，目的是将结果缓存到磁盘里")])]),s._v(" "),n("p",[s._v("更多 Loader 请参考"),n("a",{attrs:{href:"https://webpack.docschina.org/loaders/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),n("OutboundLink")],1)]),s._v(" "),n("h3",{attrs:{id:"有哪些常见的plugin-你用过哪些plugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#有哪些常见的plugin-你用过哪些plugin"}},[s._v("#")]),s._v(" 有哪些常见的Plugin？你用过哪些Plugin？")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("define-plugin")]),s._v("：定义环境变量 (Webpack4 之后指定 mode 会自动配置)")]),s._v(" "),n("li",[n("code",[s._v("ignore-plugin")]),s._v("：忽略部分文件")]),s._v(" "),n("li",[n("code",[s._v("uglifyjs-webpack-plugin")]),s._v("：不支持 ES6 压缩 (Webpack4 以前)")]),s._v(" "),n("li",[n("code",[s._v("mini-css-extract-plugin")]),s._v(": 分离样式文件，CSS 提取为独立文件，支持按需加载 (替代extract-text-webpack-plugin)")]),s._v(" "),n("li",[n("code",[s._v("speed-measure-webpack-plugin")]),s._v(": 可以看到每个 Loader 和 Plugin 执行耗时 (整个打包耗时、每个 Plugin 和 Loader 耗时)")]),s._v(" "),n("li",[n("code",[s._v("webpack-bundle-analyzer")]),s._v(": 可视化 Webpack 输出文件的体积 (业务组件、依赖第三方模块)")]),s._v(" "),n("li",[n("code",[s._v("terser-webpack-plugin")]),s._v(": 支持压缩 ES6 (Webpack4)")]),s._v(" "),n("li",[n("code",[s._v("webpack-parallel-uglify-plugin")]),s._v(": "),n("strong",[s._v("多进程执行代码压缩，提升构建速度")])]),s._v(" "),n("li",[n("code",[s._v("html-webpack-plugin")]),s._v("：简化 HTML 文件创建 (依赖于 html-loader)")]),s._v(" "),n("li",[n("code",[s._v("web-webpack-plugin")]),s._v("：可方便地为单页应用输出 HTML，比 html-webpack-plugin 好用")]),s._v(" "),n("li",[n("code",[s._v("serviceworker-webpack-plugin")]),s._v("：为网页应用增加离线缓存功能")]),s._v(" "),n("li",[n("code",[s._v("clean-webpack-plugin")]),s._v(": "),n("strong",[s._v("目录清理")])]),s._v(" "),n("li",[n("code",[s._v("ModuleConcatenationPlugin")]),s._v(": 开启 Scope Hoisting")])]),s._v(" "),n("p",[s._v("更多 Plugin 请参考"),n("a",{attrs:{href:"https://webpack.docschina.org/plugins/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),n("OutboundLink")],1)]),s._v(" "),n("h3",{attrs:{id:"自定义loader-plugin【要点】"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义loader-plugin【要点】"}},[s._v("#")]),s._v(" 自定义loader*plugin【要点】")]),s._v(" "),n("h4",{attrs:{id:"是否写过loader-简单描述一下编写loader的思路"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#是否写过loader-简单描述一下编写loader的思路"}},[s._v("#")]),s._v(" 是否写过Loader？简单描述一下编写loader的思路？")]),s._v(" "),n("p",[n("strong",[s._v("Loader 支持链式调用")]),s._v("，所以开发上需要严格遵循“单一职责”，"),n("strong",[s._v("每个 Loader 只负责自己需要负责的事情。")])]),s._v(" "),n("p",[n("a",{attrs:{href:"https://www.webpackjs.com/api/loaders/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Loader的API"),n("OutboundLink")],1),s._v(" 可以去官网查阅")]),s._v(" "),n("p",[s._v('Loader像一个"翻译官"把读到的源文件内容转义成新的文件内容，'),n("strong",[s._v("并且每个Loader通过链式操作，将源文件一步步翻译成想要的样子")]),s._v("。")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("Loader 为模块转换器，"),n("strong",[s._v("用于将模块的原内容按照需求转换成新内容")]),s._v("；")])]),s._v(" "),n("li",[n("p",[s._v("Loader 的"),n("strong",[s._v("职责是单一的，只需要完成一种转换，遵守单一职责原则")]),s._v("；")])]),s._v(" "),n("li",[n("p",[s._v("Webpack 为 Loader 提供了一系列 API 供 Loader 调用，例如：")]),s._v(" "),n("ul",[n("li",[s._v("loader-utils.getOptions( this ) 获取用户传入的 options，")]),s._v(" "),n("li",[s._v("this.callback( ) 自定义返回结果，")]),s._v(" "),n("li",[s._v("this.async( ) 支持异步操作；")]),s._v(" "),n("li",[s._v("this.context 当前文件所在的目录；")]),s._v(" "),n("li",[s._v("this.resource 当前处理文件的完整请求路径；")]),s._v(" "),n("li",[s._v("其它等等")])])]),s._v(" "),n("li",[n("p",[s._v("Loader 运行在 Node.js 中，我们可以调用任意 Node.js 自带的 API 或者安装第三方模块进行调用")])]),s._v(" "),n("li",[n("p",[s._v("Webpack 传给 Loader 的原内容都是 UTF-8 格式编码的字符串，当某些场景下 Loader 处理二进制文件时，需要通过 exports.raw = true 告诉 Webpack 该 Loader 是否需要二进制数据")])]),s._v(" "),n("li",[n("p",[s._v("尽可能的异步化 Loader，如果计算量很小，同步也可以")])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("Loader 是无状态的，我们不应该在 Loader 中保留状态")])])]),s._v(" "),n("li",[n("p",[s._v("使用 loader-utils 和 schema-utils 为我们提供的实用工具")])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("加载本地 Loader 方法")])]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("Npm link")])]),s._v(" "),n("li",[n("strong",[s._v("ResolveLoader")])])])])]),s._v(" "),n("h4",{attrs:{id:"是否写过plugin-简单描述一下编写plugin的思路"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#是否写过plugin-简单描述一下编写plugin的思路"}},[s._v("#")]),s._v(" 是否写过Plugin？简单描述一下编写Plugin的思路？")]),s._v(" "),n("p",[s._v("webpack在运行的生命周期中会广播出许多事件，**Plugin 可以监听这些事件，在特定的阶段钩入想要添加的自定义功能。Webpack 的 Tapable 事件流机制保证了插件的有序性，**使得整个系统扩展性良好。")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://www.webpackjs.com/api/plugins/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Plugin的API"),n("OutboundLink")],1),s._v(" 可以去官网查阅")]),s._v(" "),n("ul",[n("li",[s._v("compiler 暴露了和 Webpack 整个生命周期相关的钩子")]),s._v(" "),n("li",[s._v("compilation 暴露了与模块和依赖有关的粒度更小的事件钩子")]),s._v(" "),n("li",[s._v("插件需要在其原型上绑定apply方法，才能访问 compiler 实例")]),s._v(" "),n("li",[s._v("传给每个插件的 compiler 和 compilation对象都是同一个引用，若在一个插件中修改了它们身上的属性，会影响后面的插件")]),s._v(" "),n("li",[s._v("找出合适的事件点去完成想要的功能\n"),n("ul",[n("li",[s._v("emit 事件发生时，可以读取到最终输出的资源、代码块、模块及其依赖，并进行修改(emit 事件是修改 Webpack 输出资源的最后时机)")]),s._v(" "),n("li",[s._v("watch-run 当依赖的文件发生变化时会触发")])])]),s._v(" "),n("li",[s._v("异步的事件需要在插件处理完任务时调用回调函数通知 Webpack 进入下一个流程，不然会卡住")])]),s._v(" "),n("h4",{attrs:{id:"自定义示范"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义示范"}},[s._v("#")]),s._v(" 自定义示范")]),s._v(" "),n("h5",{attrs:{id:"自定义loader"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义loader"}},[s._v("#")]),s._v(" "),n("strong",[s._v("自定义loader")])]),s._v(" "),n("p",[s._v("注意，"),n("strong",[s._v("第一个 loader 的输入时源文件，之后所有 loader 的输入是上一个 loader 的输出，最后一个 loader 输出给 webpack。")])]),s._v(" "),n("p",[n("strong",[s._v("一个loader是一个导出为函数的 js 模块，这个函数有三个参数：content, map, meta")])]),s._v(" "),n("ul",[n("li",[s._v("content: 表示源文件字符串或者buffer")]),s._v(" "),n("li",[s._v("map: 表示sourcemap对象")]),s._v(" "),n("li",[s._v("meta: 表示元数据，辅助对象")])]),s._v(" "),n("p",[n("strong",[s._v("实现要点")]),s._v("：【3步骤】")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("获取loader配置；"),n("code",[s._v('const { getOptions } = require("loader-utils")')])])]),s._v(" "),n("li",[n("p",[s._v("默认三个参数 ; "),n("code",[s._v("module.exports = function(content, map, meta) {}")])]),s._v(" "),n("p",[s._v("转换后的内容，source-map， AST;")])]),s._v(" "),n("li",[n("p",[s._v("处理content返回及判断即可;")])])]),s._v(" "),n("p",[n("strong",[s._v("示例")]),s._v("：手写一个 loader 源码，其功能是将 /hello/gi 转换成 HELLO")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("convert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("source")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" source "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" source"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("replace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("hello")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-flags"}},[s._v("gi")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'HELLO'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//module.exports = function(content, map, meta) {}")]),s._v("\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("exports")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("content")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("convert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("content"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//custom-loader")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//使用；Npm link 模块注册； npm link custom-loader")]),s._v("\nmodule"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            test"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.js")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            use"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'custom-loader'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            include"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'show'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("h5",{attrs:{id:"自定义plugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义plugin"}},[s._v("#")]),s._v(" "),n("strong",[s._v("自定义plugin")])]),s._v(" "),n("p",[n("strong",[s._v("实现要点")]),s._v("：【3步骤】")]),s._v(" "),n("ul",[n("li",[s._v("是否构造传递初始化函数；")]),s._v(" "),n("li",[s._v("调用插件 "),n("code",[s._v("apply 函数传入 compiler 对象")])]),s._v(" "),n("li",[s._v("通过 "),n("code",[s._v("compiler 对象监听事件")])])]),s._v(" "),n("p",[n("strong",[s._v("示例")]),s._v("：手写一个 plugin 源码，其功能是在 Webpack 编译成功或者失败时输出提示；")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CustomPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("constructor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("doneCallback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" failCallback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 保存在创建插件实例时传入的回调函数")]),s._v("\n     "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("doneCallback "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" doneCallback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n     "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("failCallback "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" failCallback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("apply")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("compiler")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    compiler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("plugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'done'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("stats")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 成功完成一次完整的编译和输出流程时，会触发 done 事件")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("doneCallback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("stats"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    compiler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("plugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'failed'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 在编译和输出的流程中遇到异常时，会触发 failed 事件")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("failCallback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" CustomPlugin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//使用；npm link custom-plugin")]),s._v("\nplugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CustomPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("stats")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'编译成功!'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("error")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'编译失败!'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("h3",{attrs:{id:"在实际工程中-配置文件上百行乃是常事-如何保证各个loader按照预想方式工作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#在实际工程中-配置文件上百行乃是常事-如何保证各个loader按照预想方式工作"}},[s._v("#")]),s._v(" 在实际工程中，配置文件上百行乃是常事，如何保证各个loader按照预想方式工作？")]),s._v(" "),n("p",[s._v("可以使用 "),n("code",[s._v("enforce")]),s._v(" 强制执行 "),n("code",[s._v("loader")]),s._v(" 的作用顺序；")]),s._v(" "),n("p",[n("strong",[s._v("enforce")]),s._v("：用来"),n("strong",[s._v("指定一个 loader 的种类，其默认值为 normal")]),s._v("，可选值为")]),s._v(" "),n("ul",[n("li",[s._v("pre，在 use 配置的"),n("strong",[s._v("所有 loader 之前执行")]),s._v("，比如下面就是保证检测的代码不是其他 loader 更改过来的；")]),s._v(" "),n("li",[s._v("post，在 use 配置的"),n("strong",[s._v("所有 loader 之后执行")]),s._v("；")]),s._v(" "),n("li",[s._v("inline，官方不推荐使用；")])]),s._v(" "),n("p",[s._v("使用示范：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  module"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        use"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        resource"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          test"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.css$")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          exclude"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("node_modules")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        issuer"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          test"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.js$")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          exclude"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/node_modules/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          include"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/src/pages/'")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        test"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.js$")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        enforce"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pre'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        use"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'eslint-loader'")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("h3",{attrs:{id:"使用webpack开发时-你用过哪些可以提高效率的插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用webpack开发时-你用过哪些可以提高效率的插件"}},[s._v("#")]),s._v(" 使用webpack开发时，你用过哪些可以提高效率的插件？")]),s._v(" "),n("p",[s._v("(这道题还蛮注重实际，用户的体验还是要从小抓起的)")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("webpack-dashboard")]),s._v("：可以更友好的展示相关打包信息。")]),s._v(" "),n("li",[n("code",[s._v("webpack-merge")]),s._v("：提取公共配置，减少重复配置代码")]),s._v(" "),n("li",[n("code",[s._v("speed-measure-webpack-plugin")]),s._v("：简称 SMP，分析出 Webpack 打包过程中 Loader 和 Plugin 的耗时，有助于找到构建过程中的性能瓶颈。")]),s._v(" "),n("li",[n("code",[s._v("size-plugin")]),s._v("：监控资源体积变化，尽早发现问题")]),s._v(" "),n("li",[n("code",[s._v("HotModuleReplacementPlugin")]),s._v("：模块热替换")])]),s._v(" "),n("h2",{attrs:{id:"基础"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基础"}},[s._v("#")]),s._v(" 基础")]),s._v(" "),n("h3",{attrs:{id:"source-map是什么-生产环境怎么用-【要点】"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#source-map是什么-生产环境怎么用-【要点】"}},[s._v("#")]),s._v(" source map是什么？生产环境怎么用？【要点】")]),s._v(" "),n("p",[n("strong",[n("code",[s._v("source map")]),s._v(" 是将编译、打包、压缩后的代码映射回源代码的过程")]),s._v("。打包压缩后的代码不具备良好的可读性，想要调试源码就需要 soucre map。")]),s._v(" "),n("p",[s._v("map文件只要不打开开发者工具，浏览器是不会加载的。")]),s._v(" "),n("p",[s._v("线上环境一般有三种处理方案：")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("hidden-source-map")]),s._v("："),n("strong",[s._v("借助第三方错误监控平台 Sentry 使用")]),s._v(";")]),s._v(" "),n("li",[n("code",[s._v("nosources-source-map")]),s._v("：只会显示具体行数以及查看源代码的错误栈。安全性比 sourcemap 高;")]),s._v(" "),n("li",[n("code",[s._v("sourcemap")]),s._v("：通过 nginx 设置将 .map 文件只对白名单开放(公司内网);")])]),s._v(" "),n("p",[s._v("注意："),n("strong",[s._v("避免在生产中使用 "),n("code",[s._v("inline-")]),s._v(" 和 "),n("code",[s._v("eval-")]),s._v("，因为它们会增加 bundle 体积大小，并降低整体性能。")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n    resolve"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    extensions"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.css'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.json'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 文件扩展名，写明以后就不需要每个文件写后缀")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//config.resolve.alias.set('@$', resolve('src')) //vue.config.js的使用方式；")]),s._v("\n    alias"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 路径别名，比如这里可以使用 css 指向 static/css 路径")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'src'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'static/css'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//要点")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//cheap不包含列信息（关于列信息的解释下面会有详细介绍)也不包含loader的sourcemap")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//module包含loader的sourcemap（比如jsx to js ，babel的sourcemap）,否则无法定义源文件")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//eval使用eval包裹模块代码")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//source-map产生.map文件；正式环境不上传.map文件，放到监控平台上处理即可；")]),s._v("\n  devtool"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cheap-module-eval-source-map'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//开发环境")]),s._v("\n  devtool"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cheap-module-source-map'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//正式环境")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("h3",{attrs:{id:"如何对bundle体积进行监控和分析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#如何对bundle体积进行监控和分析"}},[s._v("#")]),s._v(" 如何对bundle体积进行监控和分析？")]),s._v(" "),n("p",[n("code",[s._v("VSCode")]),s._v(" 中有一个插件 "),n("code",[s._v("Import Cost")]),s._v(" 可以帮助我们对引入模块的大小进行实时监测，还可以使用 "),n("code",[s._v("webpack-bundle-analyzer")]),s._v(" 生成 "),n("code",[s._v("bundle")]),s._v(" 的模块组成图，显示所占体积。")]),s._v(" "),n("p",[n("code",[s._v("bundlesize")]),s._v(" 工具包可以进行自动化资源体积监控。")]),s._v(" "),n("h3",{attrs:{id:"文件指纹是什么-怎么用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#文件指纹是什么-怎么用"}},[s._v("#")]),s._v(" 文件指纹是什么？怎么用？")]),s._v(" "),n("p",[s._v("文件指纹是"),n("strong",[s._v("打包后输出的文件名的后缀。")])]),s._v(" "),n("ul",[n("li",[n("code",[s._v("Hash")]),s._v("：和整个项目的构建相关，**只要项目文件有修改，整个项目构建的 hash 值就会更改；**比如：图片处理file-loader；")]),s._v(" "),n("li",[n("code",[s._v("Chunkhash")]),s._v("：和 Webpack 打包的 chunk 有关，不同的 entry 会生出不同的 chunkhash；比如：js处理；")]),s._v(" "),n("li",[n("code",[s._v("Contenthash")]),s._v("：根据文件内容来定义 hash，"),n("strong",[s._v("文件内容不变，则 contenthash 不变")]),s._v("；比如：样式处理；")])]),s._v(" "),n("h4",{attrs:{id:"图片的文件指纹设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#图片的文件指纹设置"}},[s._v("#")]),s._v(" 图片的文件指纹设置")]),s._v(" "),n("p",[s._v("设置file-loader的name，使用hash。")]),s._v(" "),n("p",[s._v("占位符名称及含义")]),s._v(" "),n("ul",[n("li",[s._v("ext     资源后缀名")]),s._v(" "),n("li",[s._v("name    文件名称")]),s._v(" "),n("li",[s._v("path    文件的相对路径")]),s._v(" "),n("li",[s._v("folder  文件所在的文件夹")]),s._v(" "),n("li",[s._v("contenthash   文件的内容hash，默认是md5生成")]),s._v(" "),n("li",[s._v("hash         文件内容的hash，默认是md5生成")]),s._v(" "),n("li",[s._v("emoji        一个随机的指代文件内容的emoji")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" path "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    entry"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./src/index.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    output"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        filename"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bundle.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        path"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dist'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    module"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        rules"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            test"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.(png|svg|jpg|gif)$")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            use"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                loader"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file-loader'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                options"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'img/[name][hash:8].[ext]'")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("h4",{attrs:{id:"js的文件指纹设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#js的文件指纹设置"}},[s._v("#")]),s._v(" JS的文件指纹设置")]),s._v(" "),n("p",[s._v("设置 output 的 filename，用 chunkhash。")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    entry"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        app"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./scr/app.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        search"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./src/search.js'")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    output"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        filename"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[name][chunkhash:8].js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        path"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("__dirname "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/dist'")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h4",{attrs:{id:"css的文件指纹设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#css的文件指纹设置"}},[s._v("#")]),s._v(" CSS的文件指纹设置")]),s._v(" "),n("p",[s._v("设置 MiniCssExtractPlugin 的 filename，使用 contenthash。")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    entry"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        app"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./scr/app.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        search"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./src/search.js'")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    output"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        filename"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[name][chunkhash:8].js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        path"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("__dirname "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/dist'")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    plugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MiniCssExtractPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            filename"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("[name][contenthash:8].css")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h3",{attrs:{id:"你刚才也提到了代码分割-那代码分割的本质是什么-有什么意义呢"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#你刚才也提到了代码分割-那代码分割的本质是什么-有什么意义呢"}},[s._v("#")]),s._v(" 你刚才也提到了代码分割，那代码分割的本质是什么？有什么意义呢？")]),s._v(" "),n("p",[s._v("代码分割的"),n("strong",[s._v("本质其实就是在"),n("code",[s._v("源代码直接上线")]),s._v("和"),n("code",[s._v("打包成唯一脚本main.bundle.js")]),s._v("这两种极端")]),s._v("；方案之间的一种更适合实际场景的中间状态。")]),s._v(" "),n("p",[n("strong",[s._v("「用可接受的服务器性能压力增加来换取更好的用户体验。」")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("源代码直接上线：虽然过程可控，但是http请求多，性能开销大。")])]),s._v(" "),n("li",[n("p",[s._v("打包成唯一脚本：一把梭完自己爽，服务器压力小，但是页面空白期长，用户体验不好。")])])]),s._v(" "),n("h4",{attrs:{id:"分析index-html【要点】"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#分析index-html【要点】"}},[s._v("#")]),s._v(" 分析"),n("code",[s._v("index.html【要点】")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1501),alt:"image-20211003234437464"}})]),s._v(" "),n("p",[s._v("从上面我们可以看到，先用link定义Home.js、app.js、chunk-vendors.js这些资源和web客户端的关系。")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("ref=preload")]),s._v("：告诉浏览器这个资源要给我"),n("strong",[s._v("提前加载")]),s._v("。")]),s._v(" "),n("li",[n("code",[s._v("rel=prefetch")]),s._v("：告诉浏览器这个"),n("strong",[s._v("资源空闲的时候给我加载一下")]),s._v("。")]),s._v(" "),n("li",[n("code",[s._v("as=script")]),s._v("：告诉浏览器这个资源是script，提升加载的优先级。")])]),s._v(" "),n("p",[s._v("然后在body里面加载了chunk-vendors.js、app.js这两个js资源。可以看出web客户端初始化时候就加载了这个两个js资源。")]),s._v(" "),n("h3",{attrs:{id:"配置单页应用及多页应用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置单页应用及多页应用"}},[s._v("#")]),s._v(" 配置单页应用及多页应用")]),s._v(" "),n("p",[s._v("单页应用可以理解为webpack的标准模式，直接在"),n("code",[s._v("entry")]),s._v("中指定单页应用的入口即可，这里不再赘述")]),s._v(" "),n("p",[s._v("多页应用的话，可以使用webpack的 "),n("code",[s._v("AutoWebPlugin")]),s._v("来完成简单自动化的构建，但是前提是项目的目录结构必须遵守他预设的规范。 多页应用中要注意的是：")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("每个页面都有公共的代码，可以将这些代码抽离出来，避免重复的加载")]),s._v("。比如，每个页面都引用了同一套css样式表")]),s._v(" "),n("li",[s._v("随着业务的不断扩展，页面可能会不断的追加，所以一定要让入口的配置足够灵活，避免每次添加新页面还需要修改构建配置")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" pages "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("dir")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dir"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nglob"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sync")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./src/views/**/main.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("forEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("path")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" chunk "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("split")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./src/views/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("split")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/main.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  pages"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("chunk"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    entry"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    template"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'public/index.html'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    title"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" titles"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("chunk"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    chunks"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'chunk-vendors'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'chunk-common'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" chunk"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  runtimeCompiler"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  pages"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("h2",{attrs:{id:"相关原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#相关原理"}},[s._v("#")]),s._v(" 相关原理")]),s._v(" "),n("h3",{attrs:{id:"模块打包原理知道吗-【要点】"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#模块打包原理知道吗-【要点】"}},[s._v("#")]),s._v(" 模块打包原理知道吗？【要点】")]),s._v(" "),n("p",[s._v("Webpack 实际上"),n("strong",[s._v("为每个模块创造了一个可以导出和导入的环境，本质上并没有修改 代码的执行逻辑，代码执行顺序与模块加载顺序也完全一致。")])]),s._v(" "),n("h3",{attrs:{id:"babel-原理【要点】"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#babel-原理【要点】"}},[s._v("#")]),s._v(" babel 原理【要点】")]),s._v(" "),n("p",[n("strong",[s._v("babel的转译过程分为三个阶段："),n("code",[s._v("parsing、transforming、generating")]),s._v("；")])]),s._v(" "),n("p",[s._v("以ES6代码转译为ES5代码为例，babel转译的具体过程如下：")]),s._v(" "),n("ul",[n("li",[s._v("ES6代码输入；")]),s._v(" "),n("li",[s._v("babylon 进行解析得到 AST；")]),s._v(" "),n("li",[s._v("plugin 用 babel-traverse 对 AST 树进行遍历转译,得到新的AST树；")]),s._v(" "),n("li",[s._v("用 babel-generator 通过 AST 树生成 ES5 代码；")])]),s._v(" "),n("p",[s._v("详见【webpack的插件实践】；")]),s._v(" "),n("h3",{attrs:{id:"聊一聊babel原理吧"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#聊一聊babel原理吧"}},[s._v("#")]),s._v(" 聊一聊Babel原理吧")]),s._v(" "),n("p",[s._v("大多数JavaScript Parser遵循 "),n("code",[s._v("estree")]),s._v(" 规范，Babel 最初基于 "),n("code",[s._v("acorn")]),s._v(" 项目(轻量级现代 JavaScript 解析器) Babel大概分为三大部分：")]),s._v(" "),n("ul",[n("li",[s._v("解析："),n("strong",[s._v("将代码转换成 AST")]),s._v("；\n"),n("ul",[n("li",[s._v("词法分析：将代码(字符串)分割为token流，即语法单元成的数组")]),s._v(" "),n("li",[s._v("语法分析：分析token流(上面生成的数组)并生成 AST")])])]),s._v(" "),n("li",[s._v("转换："),n("strong",[s._v("访问 AST 的节点进行变换操作生产新的 AST")]),s._v("；\n"),n("ul",[n("li",[n("a",{attrs:{href:"https://github.com/NervJS/taro/blob/master/packages/taro-transformer-wx/src/index.ts%23L15",target:"_blank",rel:"noopener noreferrer"}},[s._v("Taro"),n("OutboundLink")],1),s._v("就是利用 babel 完成的小程序语法转换")])])]),s._v(" "),n("li",[s._v("生成："),n("strong",[s._v("以新的 AST 为基础生成代码")]),s._v(";")])]),s._v(" "),n("p",[s._v("想了解如何一步一步实现一个编译器的同学可以移步 Babel 官网曾经推荐的开源项目 "),n("a",{attrs:{href:"https://github.com/jamiebuilds/the-super-tiny-compiler",target:"_blank",rel:"noopener noreferrer"}},[s._v("the-super-tiny-compiler"),n("OutboundLink")],1)]),s._v(" "),n("h3",{attrs:{id:"文件监听原理呢"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#文件监听原理呢"}},[s._v("#")]),s._v(" 文件监听原理呢？")]),s._v(" "),n("p",[s._v("在发现源码发生变化时，自动重新构建出新的输出文件。")]),s._v(" "),n("p",[s._v("Webpack开启监听模式，有两种方式：")]),s._v(" "),n("ul",[n("li",[s._v("启动 webpack 命令时，带上 --watch 参数")]),s._v(" "),n("li",[s._v("在配置 webpack.config.js 中设置 watch:true")])]),s._v(" "),n("p",[s._v("缺点：每次需要手动刷新浏览器")]),s._v(" "),n("p",[s._v("原理："),n("strong",[s._v("轮询判断文件的最后编辑时间是否变化，如果某个文件发生了变化，并不会立刻告诉监听者，而是先缓存起来，等 "),n("code",[s._v("aggregateTimeout")]),s._v(" 后再执行。")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("export "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 默认false,也就是不开启")]),s._v("\n    watch"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 只有开启监听模式时，watchOptions才有意义")]),s._v("\n    watchOptions"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 默认为空，不监听的文件或者文件夹，支持正则匹配")]),s._v("\n        ignored"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("node_modules")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 监听到变化发生后会等300ms再去执行，默认300ms")]),s._v("\n        aggregateTimeout"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 判断文件是否发生变化是通过不停询问系统指定文件有没有变化实现的，默认每秒问1000次")]),s._v("\n        poll"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("h3",{attrs:{id:"说一下-webpack-的热更新原理吧【要点】"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#说一下-webpack-的热更新原理吧【要点】"}},[s._v("#")]),s._v(" 说一下 Webpack 的热更新原理吧【要点】")]),s._v(" "),n("p",[s._v("(敲黑板，这道题必考)")]),s._v(" "),n("p",[n("code",[s._v("Webpack")]),s._v(" 的热更新又称热替换（"),n("code",[s._v("Hot Module Replacement")]),s._v("），缩写为 "),n("code",[s._v("HMR")]),s._v("。 "),n("strong",[s._v("这个机制可以做到不用刷新浏览器而将新变更的模块替换掉旧的模块")]),s._v("。")]),s._v(" "),n("p",[s._v("HMR的核心就是**客户端从服务端拉去更新后的文件，准确的说是 chunk diff (chunk 需要更新的部分)，实际上 WDS 与浏览器之间维护了一个 "),n("code",[s._v("Websocket")]),s._v("，**当本地资源发生变化时，WDS 会向浏览器推送更新，并带上构建时的 hash，让客户端与上一次资源进行对比。客户端对比出差异后会向 WDS 发起 "),n("code",[s._v("Ajax")]),s._v(" 请求来获取更改内容(文件列表、hash)，这样客户端就可以再借助这些信息继续向 WDS 发起 "),n("code",[s._v("jsonp")]),s._v(" 请求获取该chunk的增量更新。")]),s._v(" "),n("p",[s._v("后续的部分(拿到增量更新之后如何处理？哪些状态该保留？哪些又需要更新？)由 "),n("code",[s._v("HotModulePlugin")]),s._v(" 来完成，提供了相关 API 以供开发者针对自身场景进行处理，像"),n("code",[s._v("react-hot-loader")]),s._v(" 和 "),n("code",[s._v("vue-loader")]),s._v(" 都是借助这些 API 实现 HMR。")]),s._v(" "),n("p",[s._v("细节请参考"),n("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/30669007",target:"_blank",rel:"noopener noreferrer"}},[s._v("Webpack HMR 原理解析"),n("OutboundLink")],1)]),s._v(" "),n("ol",[n("li",[s._v("Webpack编译期，为需要热更新的 entry "),n("strong",[s._v("注入热更新代码(EventSource通信)")]),s._v(";")]),s._v(" "),n("li",[s._v("页面首次打开后，"),n("strong",[s._v("服务端与客户端通过 EventSource 建立通信渠道")]),s._v("，把下一次的 hash 返回前端;")]),s._v(" "),n("li",[n("strong",[s._v("客户端获取到hash")]),s._v("，这个hash将作为下一次请求服务端 "),n("code",[s._v("hot-update.js")]),s._v(" 和 "),n("code",[s._v("hot-update.json")]),s._v("的hash;")]),s._v(" "),n("li",[s._v("修改页面代码后，Webpack "),n("strong",[s._v("监听到文件修改后")]),s._v("，开始编译，编译完成后，"),n("strong",[s._v("发送 build 消息给客户端;")])]),s._v(" "),n("li",[s._v("客户端获取到hash，"),n("strong",[s._v("成功后客户端构造hot-update.js script链接，然后插入主文档")]),s._v(";")]),s._v(" "),n("li",[s._v("hot-update.js 插入成功后，"),n("strong",[s._v("执行hotAPI 的 createRecord 和 reload方法")]),s._v("，获取到 Vue 组件的 render方法，"),n("strong",[s._v("重新 render 组件， 继而实现 UI 无刷新更新")]),s._v(";")])]),s._v(" "),n("h3",{attrs:{id:"devserver设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#devserver设置"}},[s._v("#")]),s._v(" devServer设置")]),s._v(" "),n("p",[s._v("服务于webpack-dev-server  "),n("strong",[s._v("内部封装了一个express")]),s._v("；")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("devServer"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//服务于webpack-dev-server  内部封装了一个express ")]),s._v("\n    port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'8080'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("before")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("app")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/api/test.json'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("json")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                code"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                message"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Hello World'")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//在本地服务器开启gzip，线上服务器都支持gzip不需要设置")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("before")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("app")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v(".*.(js)$")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("url "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("url "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.gz'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Content-Encoding'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'gzip'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("h3",{attrs:{id:"样式相关"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#样式相关"}},[s._v("#")]),s._v(" 样式相关")]),s._v(" "),n("h4",{attrs:{id:"scoped属性的实现原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#scoped属性的实现原理"}},[s._v("#")]),s._v(" scoped属性的实现原理")]),s._v(" "),n("p",[n("strong",[s._v("scoped属性的实现原理")]),s._v("是给每一个dom元素"),n("strong",[s._v("添加了一个独一无二的动态属性")]),s._v("，给css选择器额外添加一个对应的属性选择器，来选择组件中的dom。")]),s._v(" "),n("p",[n("strong",[s._v("这类似于 Shadow DOM 中的样式封装")]),s._v("。它有一些注意事项，但不需要任何 polyfill。它通过使用 PostCSS 来实现以下转换：")]),s._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("style")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("scoped")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token style"}},[n("span",{pre:!0,attrs:{class:"token language-css"}},[s._v("\n"),n("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".example")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("color")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" red"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("div")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("example"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hi"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n//转换结果\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token style"}},[n("span",{pre:!0,attrs:{class:"token language-css"}},[s._v("\n"),n("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".example[data-v-f3f3eg9]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("color")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" red"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("div")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("example"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("data-v-f3f3eg9")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hi"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("h4",{attrs:{id:"子组件的根元素"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#子组件的根元素"}},[s._v("#")]),s._v(" 子组件的根元素")]),s._v(" "),n("p",[s._v("**使用 "),n("code",[s._v("scoped")]),s._v(" 后，父组件的样式将不会渗透到子组件中。不过一个子组件的根节点会同时受其父组件的 scoped CSS 和子组件的 scoped CSS 的影响。**这样设计是为了让父组件可以从布局的角度出发，调整其子组件根元素的样式。")]),s._v(" "),n("h4",{attrs:{id:"scoped样式穿透"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#scoped样式穿透"}},[s._v("#")]),s._v(" scoped样式穿透")]),s._v(" "),n("p",[s._v("scoped虽然避免了组件间样式污染，"),n("strong",[s._v("但是很多时候我们需要修改组件中的某个样式，但是又不想去除scoped属性")]),s._v("。有以下两种方式实现：")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("使用/deep/")])])]),s._v(" "),n("div",{staticClass:"language-vue line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-vue"}},[n("code",[s._v("//Parent\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("div")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("wrap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("Child")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("style")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("lang")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("scss"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("scoped")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token style"}},[n("span",{pre:!0,attrs:{class:"token language-css"}},[s._v("\n"),n("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".wrap /deep/ .box")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("background")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" red"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n//Child\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("div")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("box"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("ul",[n("li",[s._v("使用两个style标签")])]),s._v(" "),n("div",{staticClass:"language-vue line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-vue"}},[n("code",[s._v("//Parent\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("div")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("wrap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("Child")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("style")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("lang")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("scss"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("scoped")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token style"}},[n("span",{pre:!0,attrs:{class:"token language-css"}},[s._v("\n//其他样式\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("style")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("lang")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("scss"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token style"}},[n("span",{pre:!0,attrs:{class:"token language-css"}},[s._v("\n"),n("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".wrap .box")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("background")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" red"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n//Child\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("div")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("box"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("h2",{attrs:{id:"优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#优化"}},[s._v("#")]),s._v(" 优化")]),s._v(" "),n("h3",{attrs:{id:"如何优化-webpack-的构建速度-【要点】"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#如何优化-webpack-的构建速度-【要点】"}},[s._v("#")]),s._v(" 如何优化 Webpack 的构建速度？【要点】")]),s._v(" "),n("p",[s._v("(这个问题就像能不能说一说**「从URL输入到页面显示发生了什么」**一样）")]),s._v(" "),n("p",[s._v("(我只想说：您希望我讲多长时间呢？)")]),s._v(" "),n("p",[s._v("(面试官：。。。)")]),s._v(" "),n("ul",[n("li",[s._v("使用"),n("code",[s._v("高版本")]),s._v("的 Webpack 和 Node.js")]),s._v(" "),n("li",[n("code",[s._v("多进程/多实例构建")]),s._v("：HappyPack(不维护了)、thread-loader")]),s._v(" "),n("li",[n("code",[s._v("压缩代码")]),s._v(" "),n("ul",[n("li",[s._v("多进程并行压缩\n"),n("ul",[n("li",[s._v("webpack-paralle-uglify-plugin")]),s._v(" "),n("li",[s._v("uglifyjs-webpack-plugin 开启 parallel 参数 (不支持ES6)")]),s._v(" "),n("li",[s._v("terser-webpack-plugin 开启 parallel 参数")])])]),s._v(" "),n("li",[s._v("通过 mini-css-extract-plugin 提取 Chunk 中的 CSS 代码到单独文件，通过 css-loader 的 minimize 选项开启 cssnano 压缩 CSS。")])])]),s._v(" "),n("li",[n("code",[s._v("图片压缩")]),s._v(" "),n("ul",[n("li",[s._v("使用基于 Node 库的 imagemin (很多定制选项、可以处理多种图片格式)")]),s._v(" "),n("li",[s._v("配置 image-webpack-loader")])])]),s._v(" "),n("li",[n("code",[s._v("缩小打包作用域")]),s._v("：\n"),n("ul",[n("li",[s._v("exclude/include (确定 loader 规则范围)")]),s._v(" "),n("li",[s._v("resolve.modules 指明第三方模块的绝对路径 (减少不必要的查找)")]),s._v(" "),n("li",[s._v("resolve.mainFields 只采用 main 字段作为入口文件描述字段 (减少搜索步骤，需要考虑到所有运行时依赖的第三方模块的入口文件描述字段)")]),s._v(" "),n("li",[s._v("resolve.extensions 尽可能减少后缀尝试的可能性")]),s._v(" "),n("li",[s._v("noParse 对完全不需要解析的库进行忽略 (不去解析但仍会打包到 bundle 中，注意被忽略掉的文件里不应该包含 import、require、define 等模块化语句)")]),s._v(" "),n("li",[s._v("IgnorePlugin (完全排除模块)")]),s._v(" "),n("li",[s._v("合理使用alias")])])]),s._v(" "),n("li",[n("code",[s._v("提取页面公共资源")]),s._v("：\n"),n("ul",[n("li",[s._v("基础包分离：\n"),n("ul",[n("li",[s._v("使用 html-webpack-externals-plugin，将基础包通过 CDN 引入，不打入 bundle 中")]),s._v(" "),n("li",[s._v("使用 SplitChunksPlugin 进行(公共脚本、基础包、页面公共文件)分离(Webpack4内置) ，替代了 CommonsChunkPlugin 插件")])])])])]),s._v(" "),n("li",[n("code",[s._v("DLL")]),s._v("：\n"),n("ul",[n("li",[s._v("使用 DllPlugin 进行分包，使用 DllReferencePlugin(索引链接) 对 manifest.json 引用，让一些基本不会改动的代码先打包成静态资源，避免反复编译浪费时间。")]),s._v(" "),n("li",[s._v("HashedModuleIdsPlugin 可以解决模块数字id问题")])])]),s._v(" "),n("li",[n("code",[s._v("充分利用缓存提升二次构建速度")]),s._v("：\n"),n("ul",[n("li",[s._v("babel-loader 开启缓存")]),s._v(" "),n("li",[s._v("terser-webpack-plugin 开启缓存")]),s._v(" "),n("li",[s._v("使用 cache-loader 或者 hard-source-webpack-plugin")])])]),s._v(" "),n("li",[n("code",[s._v("Tree shaking")]),s._v(" "),n("ul",[n("li",[s._v("打包过程中检测工程中没有引用过的模块并进行标记，在资源压缩时将它们从最终的bundle中去掉(只能对ES6 Modlue生效) 开发中尽可能使用ES6 Module的模块，提高tree shaking效率")]),s._v(" "),n("li",[n("strong",[s._v("禁用 babel-loader 的模块依赖解析")]),s._v("，否则 Webpack 接收到的就都是转换过的 CommonJS 形式的模块，无法进行 tree-shaking")]),s._v(" "),n("li",[s._v("使用 PurifyCSS(不在维护) 或者 uncss 去除无用 CSS 代码\n"),n("ul",[n("li",[s._v("purgecss-webpack-plugin 和 mini-css-extract-plugin配合使用(建议)")])])])])]),s._v(" "),n("li",[n("code",[s._v("Scope hoisting")]),s._v(" "),n("ul",[n("li",[s._v("构建后的代码会存在大量闭包，造成体积增大，运行代码时创建的函数作用域变多，内存开销变大**。Scope hoisting 将所有模块的代码按照引用顺序放在一个函数作用域里，然后适当的重命名一些变量以防止变量名冲突**")]),s._v(" "),n("li",[s._v("必须是ES6的语法，因为有很多第三方库仍采用 CommonJS 语法，为了充分发挥 Scope hoisting 的作用，需要配置 mainFields 对第三方模块优先采用 jsnext:main 中指向的ES6模块化语法")])])]),s._v(" "),n("li",[n("code",[s._v("动态Polyfill")]),s._v(" "),n("ul",[n("li",[s._v("建议采用 polyfill-service 只给用户返回需要的polyfill，社区维护。 (部分国内奇葩浏览器UA可能无法识别，但可以降级返回所需全部polyfill)")])])])]),s._v(" "),n("p",[s._v("更多优化请参考"),n("a",{attrs:{href:"https://www.webpackjs.com/guides/build-performance/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网-构建性能"),n("OutboundLink")],1)]),s._v(" "),n("h3",{attrs:{id:"优化总括"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#优化总括"}},[s._v("#")]),s._v(" 优化总括")]),s._v(" "),n("h3",{attrs:{id:"开发环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开发环境"}},[s._v("#")]),s._v(" 开发环境")]),s._v(" "),n("ul",[n("li",[s._v("HRM (热替换)")]),s._v(" "),n("li",[s._v("webpack-dev-server （本地服务器）")]),s._v(" "),n("li",[s._v("soure-map （调试）")]),s._v(" "),n("li",[s._v("webpack-bundle-analyzer（打包生成代码块分析视图）")]),s._v(" "),n("li",[s._v("size-plugin（监控打包资源的体积变量化）")]),s._v(" "),n("li",[s._v("speed-measure-webpack-plugin（分析loader和plugin打包的耗时）")])]),s._v(" "),n("h3",{attrs:{id:"生产环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#生产环境"}},[s._v("#")]),s._v(" 生产环境")]),s._v(" "),n("h4",{attrs:{id:"体积优化【要点】"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#体积优化【要点】"}},[s._v("#")]),s._v(" "),n("strong",[s._v("体积优化")]),s._v("【要点】")]),s._v(" "),n("ul",[n("li",[s._v("html压缩 （html-webpack-plugin ）")]),s._v(" "),n("li",[s._v("js压缩 （production模式自动开启）")]),s._v(" "),n("li",[s._v("css压缩 （optimize-css-assets-webpack-plugin）")]),s._v(" "),n("li",[s._v("css提取（mini-css-extract-plugin）")]),s._v(" "),n("li",[s._v("externals （排除不需要被打包的第三方）")]),s._v(" "),n("li",[s._v("tree-shake ( production模式自动开启("),n("strong",[s._v("webpack4限EsModule;webpack5不限EsModule,CommonJs,优秀得很")]),s._v(") )")]),s._v(" "),n("li",[n("strong",[s._v("import(懒加载，预加载（预加载慎用））")])]),s._v(" "),n("li",[s._v("code-split ( optimization )")])]),s._v(" "),n("h4",{attrs:{id:"打包速度优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#打包速度优化"}},[s._v("#")]),s._v(" "),n("strong",[s._v("打包速度优化")])]),s._v(" "),n("ul",[n("li",[s._v("exclude / exclude (排除一些不需要编译的文件)")]),s._v(" "),n("li",[s._v("module.noParse (排除不需要被loader编译的第三方库)")]),s._v(" "),n("li",[s._v("babel缓存（ 缓存cacheDirectory ）")]),s._v(" "),n("li",[s._v("多线程打包（thread-loader 、happyPack）")]),s._v(" "),n("li",[s._v("动态链 （ DLL ）")])]),s._v(" "),n("h2",{attrs:{id:"相关链接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#相关链接"}},[s._v("#")]),s._v(" 相关链接")]),s._v(" "),n("p",[s._v("https://juejin.cn/post/6844904094281236487")])])}),[],!1,null,null,null);t.default=e.exports}}]);