(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1220:function(s,t,a){s.exports=a.p+"assets/img/1.token.b1d78c50.png"},1221:function(s,t,a){s.exports=a.p+"assets/img/2.token.a534c588.png"},1222:function(s,t,a){s.exports=a.p+"assets/img/3.token.d67f21f5.png"},1223:function(s,t,a){s.exports=a.p+"assets/img/writesccesstoken.a71dc27d.png"},1224:function(s,t,a){s.exports=a.p+"assets/img/setupworkflow.66daea5d.png"},1225:function(s,t,a){s.exports=a.p+"assets/img/buildsuccess.8ce516d5.png"},1226:function(s,t,a){s.exports=a.p+"assets/img/1.addrepo.9eb37e3e.png"},1227:function(s,t,a){s.exports=a.p+"assets/img/2.copytoken.b01c4f12.png"},1228:function(s,t,a){s.exports=a.p+"assets/img/3.COVERALLS_REPO_TOKEN.32b943ac.png"},1229:function(s,t,a){s.exports=a.p+"assets/img/addbadges.d9419c94.png"},1230:function(s,t,a){s.exports=a.p+"assets/img/buildsuccesses.cd19e3a4.png"},2059:function(s,t,a){"use strict";a.r(t);var e=a(14),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"package-发包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#package-发包"}},[s._v("#")]),s._v(" Package 发包")]),s._v(" "),e("ul",[e("li",[s._v("对于需要发布的包，有几个前置知识是需要知道的。")]),s._v(" "),e("li",[s._v("对于dependencies，只要有用户下载你这个包，dependencies里面的包都会进行安装。")]),s._v(" "),e("li",[s._v("对于devDependencies，用户下载你这个包不会安装这些包。")]),s._v(" "),e("li",[s._v("对于peerDependencies，用户下载你这个包后如果用户没安装会进行报警，如果用户已有这个包但版本与你的不匹配会报警。用户下载你这个包不会自动安装peerDependencies。")])]),s._v(" "),e("h3",{attrs:{id:"_1-前期配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-前期配置"}},[s._v("#")]),s._v(" 1.前期配置")]),s._v(" "),e("p",[s._v("目前，这个包还不能用，因为没有编译输出，我们肯定不能用react-scripts来输出。需要自行制作编译N。")]),s._v(" "),e("p",[s._v("由于使用ts，所以我们需要做个tsconfig.build.json作为输出的配置文件。")]),s._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"compilerOptions"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"outDir"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"target"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"es5"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"module"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"esnext"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"declaration"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"jsx"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"react"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"moduleResolution"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"allowSyntheticDefaultImports"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"skipLibCheck"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"esModuleInterop"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"strict"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"forceConsistentCasingInFileNames"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"resolveJsonModule"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"include"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"src"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"exclude"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"src/**/*.stories.tsx"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"src/**/*.test.tsx"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br")])]),e("p",[s._v("修改script配置：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tsc -p tsconfig.build.json"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("之后可以生成dist目录")]),s._v(" "),e("p",[s._v("将dist 添加进gitignore不写入。")]),s._v(" "),e("p",[s._v("package.json对发包目录进行配置：")]),s._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"files"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("对私有进行修改：")]),s._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"private"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("github package目前只支持作用域包，所以我们需要先进行改名，改成作用域+包名。")])]),s._v(" "),e("p",[s._v("githubPackage的包"),e("strong",[s._v("不会显示在npm页面上，虽然都是使用npm进行安装")]),s._v("。所以很多开源项目一般不发github package。")]),s._v(" "),e("h3",{attrs:{id:"_2-修改-package-json"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-修改-package-json"}},[s._v("#")]),s._v(" 2.修改 package.json")]),s._v(" "),e("ul",[e("li",[s._v("name为 @用户名/原包名")]),s._v(" "),e("li",[s._v("把仓库上传到github,并把地址贴到"),e("code",[s._v("repository")]),s._v("里,仓库的名字和包名是一样的")]),s._v(" "),e("li",[s._v("registry为 https://npm.pkg.github.com/用户名")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('"name": "@samyzh/rat-ui",\n"repository":"https://github.com/samyzh/rat-ui",\n"publishConfig": {\n    "registry": "https://npm.pkg.github.com/samyzh"\n},\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("会让你输入密码，"),e("strong",[s._v("这个密码是githubtoken,注意，是githubtoken ,是githubtoken。重要的事说3遍")]),s._v("，因为这个设计有点反人类，它是粘贴并且看不见粘贴上没有。**githubtoken在github的setting里面生成。**参考下面Action中获取token;")]),s._v(" "),e("h3",{attrs:{id:"_3-登录npm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-登录npm"}},[s._v("#")]),s._v(" 3.登录npm")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" login --registry"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://npm.pkg.github.com --scope"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("@samyzh\nusername 为你的github用户名\npassword 为刚才第一步生成的token\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"_4-发包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-发包"}},[s._v("#")]),s._v(" 4. 发包")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"_5-在github上搜索包名"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-在github上搜索包名"}},[s._v("#")]),s._v(" 5.在github上搜索包名")]),s._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/zhufengnodejs/zhufengreactui",target:"_blank",rel:"noopener noreferrer"}},[s._v("github仓库"),e("OutboundLink")],1)]),s._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/zhufengnodejs/zhufengreactui/packages/365183",target:"_blank",rel:"noopener noreferrer"}},[s._v("packages"),e("OutboundLink")],1)])]),s._v(" "),e("h2",{attrs:{id:"actions-持续集成"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#actions-持续集成"}},[s._v("#")]),s._v(" Actions 持续集成")]),s._v(" "),e("h3",{attrs:{id:"_1-生成token"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-生成token"}},[s._v("#")]),s._v(" 1.生成token")]),s._v(" "),e("ul",[e("li",[s._v("1.登录github并访问 "),e("a",{attrs:{href:"https://github.com/settings/tokens",target:"_blank",rel:"noopener noreferrer"}},[s._v("tokens"),e("OutboundLink")],1),s._v("页面")]),s._v(" "),e("li",[e("ol",[e("li",[s._v("生成token并拷贝到剪贴板上")])])])]),s._v(" "),e("h4",{attrs:{id:"访问token页面"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#访问token页面"}},[s._v("#")]),s._v(" 访问token页面")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1220),alt:"img"}})]),s._v(" "),e("h4",{attrs:{id:"创建token-给权限"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建token-给权限"}},[s._v("#")]),s._v(" 创建token,给权限")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1221),alt:"img"}})]),s._v(" "),e("h4",{attrs:{id:"把token拷贝出来"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#把token拷贝出来"}},[s._v("#")]),s._v(" 把token拷贝出来")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1222),alt:"img"}})]),s._v(" "),e("h3",{attrs:{id:"_2-修改命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-修改命令"}},[s._v("#")]),s._v(" 2.修改命令")]),s._v(" "),e("p",[s._v("在package.json中增加修改"),e("code",[s._v("build-storybook")]),s._v("命令")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('  "scripts": {\n    "start": "react-scripts start",\n    "build": "tsc -p tsconfig.build.json",\n    "test": "react-scripts test",\n    "eject": "react-scripts eject",\n    "storybook": "start-storybook -p 6006 -s public",\n+    "build-storybook": "build-storybook --no-dll --quiet",\n    "coverage": "react-scripts test --coverage --watchAll=false",\n    "coverall": "npm run coverage  && cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js && rm -rf ./coverage"\n  },\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("h3",{attrs:{id:"_3-添加access-token"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-添加access-token"}},[s._v("#")]),s._v(" 3.添加ACCESS_TOKEN")]),s._v(" "),e("ul",[e("li",[s._v("在"),e("a",{attrs:{href:"https://github.com/zhufengnodejs/zhufengreactui/settings/secrets",target:"_blank",rel:"noopener noreferrer"}},[s._v("secrets"),e("OutboundLink")],1),s._v("中添加一个Secret")]),s._v(" "),e("li",[s._v("名称为"),e("code",[s._v("ACCESS_TOKEN")]),s._v(", 值为上面第一步生成的"),e("code",[s._v("token")])])]),s._v(" "),e("p",[e("img",{attrs:{src:a(1223),alt:"writesccesstoken"}})]),s._v(" "),e("h3",{attrs:{id:"_4-添加actions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-添加actions"}},[s._v("#")]),s._v(" 4.添加Actions")]),s._v(" "),e("ul",[e("li",[s._v("打开项目的[actions(https://github.com/zhufengnodejs/zhufengreactui/actions)页面")]),s._v(" "),e("li",[s._v("根据向导添加脚本,会自动写到"),e("code",[s._v(".github\\workflows\\blank.yml")]),s._v("目录中")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(1224),alt:"setupworkflow"}})]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("name: Build and Deploy\non: [push]\njobs:\n  build-and-deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout 🛎️\n        uses: actions/checkout@v2 # If you're using actions/checkout@v2 you must set persist-credentials to false in most cases for the deployment to work correctly.\n        with:\n          persist-credentials: false\n\n      - name: Install and Build 🔧 # This example project is built using npm and outputs the result to the 'build' folder. Replace with the commands required to build your project, or remove this step entirely if your site is pre-built.\n        run: |\n          npm install\n          npm run build-storybook\n\n      - name: Deploy 🚀\n        uses: JamesIves/github-pages-deploy-action@releases/v3\n        with:\n          GITHUB_TOKEN: ${{secrets.ACCESS_TOKEN}}\n          BRANCH: gh-pages # The branch the action should deploy to.\n          FOLDER: storybook-static # The folder the action should deploy. \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br")])]),e("h3",{attrs:{id:"_5-拉取action代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-拉取action代码"}},[s._v("#")]),s._v(" 5.拉取Action代码")]),s._v(" "),e("ul",[e("li",[s._v("在本地用"),e("code",[s._v("git pull")]),s._v(" 把服务器端生成的"),e("code",[s._v("blank.yml")]),s._v("代码拉取本地")])]),s._v(" "),e("h3",{attrs:{id:"_6-合并后推送"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-合并后推送"}},[s._v("#")]),s._v(" 6.合并后推送")]),s._v(" "),e("ul",[e("li",[s._v("在"),e("a",{attrs:{href:"https://github.com/zhufengnodejs/zhufengreactui/actions",target:"_blank",rel:"noopener noreferrer"}},[s._v("这里"),e("OutboundLink")],1),s._v("就可以看到构建任务了")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(1225),alt:"buildsuccess"}})]),s._v(" "),e("h2",{attrs:{id:"coveralls-代码覆盖率"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#coveralls-代码覆盖率"}},[s._v("#")]),s._v(" COVERALLS 代码覆盖率")]),s._v(" "),e("p",[s._v("前面我们已经可以通过npm run coverage生成代码覆盖率，这样还要敲个命令麻烦，可以通过coveralls来告诉我们。")]),s._v(" "),e("h3",{attrs:{id:"_1-coveralls注册"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-coveralls注册"}},[s._v("#")]),s._v(" 1.coveralls注册")]),s._v(" "),e("ul",[e("li",[s._v("访问"),e("a",{attrs:{href:"https://coveralls.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("coveralls"),e("OutboundLink")],1)]),s._v(" "),e("li",[s._v("注册并登录，同步后使用add repo添加已上传项目")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(1226),alt:"img"}})]),s._v(" "),e("p",[s._v("点击detail到详情页拷贝出来token")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1227),alt:"img"}})]),s._v(" "),e("h3",{attrs:{id:"_2-添加coveralls-repo-token"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-添加coveralls-repo-token"}},[s._v("#")]),s._v(" 2.添加COVERALLS_REPO_TOKEN")]),s._v(" "),e("ul",[e("li",[s._v("切回"),e("a",{attrs:{href:"https://github.com/zhufengnodejs/zhufengreactui/settings",target:"_blank",rel:"noopener noreferrer"}},[s._v("github仓库"),e("OutboundLink")],1)]),s._v(" "),e("li",[s._v("在"),e("a",{attrs:{href:"https://github.com/zhufengnodejs/zhufengreactui/settings/secrets",target:"_blank",rel:"noopener noreferrer"}},[s._v("secrets"),e("OutboundLink")],1),s._v("中添加一个secret,名称为"),e("code",[s._v("COVERALLS_REPO_TOKEN")]),s._v(",值为第1步拷贝出来的token")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(1228),alt:"img"}})]),s._v(" "),e("h3",{attrs:{id:"_3-安装coveralls"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装coveralls"}},[s._v("#")]),s._v(" 3.安装coveralls")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("yarn add coveralls\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_4-添加命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-添加命令"}},[s._v("#")]),s._v(" 4.添加命令")]),s._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[s._v("  "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"start"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"react-scripts start"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tsc -p tsconfig.build.json"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"react-scripts test"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"eject"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"react-scripts eject"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"storybook"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"start-storybook -p 6006 -s public"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build-storybook"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build-storybook --no-dll --quiet"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"coverage"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"react-scripts test --coverage --watchAll=false"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n+    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"coverall"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm run coverage  && cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js && rm -rf ./coverage"')]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("h3",{attrs:{id:"_5-修改githubactions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-修改githubactions"}},[s._v("#")]),s._v(" 5.修改githubActions")]),s._v(" "),e("p",[s._v(".github\\workflows\\你的名字.yml")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("+  - name: Coveralls\n+        env:\n+          COVERALLS_SERVICE_NAME: 'GitHub CI'\n+          COVERALLS_GIT_BRANCH: master\n+          COVERALLS_REPO_TOKEN : ${{secrets.COVERALLS_REPO_TOKEN}}\n+        run: |\n+          npm run coverall\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("ul",[e("li",[e("h2",{attrs:{id:"_6-添加badges"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-添加badges"}},[s._v("#")]),s._v(" 6.添加badges")]),s._v(" "),e("ul",[e("li",[s._v("把这一段拷贝到自己的"),e("code",[s._v("README.md")]),s._v("里 "),e("img",{attrs:{src:a(1229),alt:"img"}})])]),s._v(" "),e("h2",{attrs:{id:"_7-提交并自动触发构建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-提交并自动触发构建"}},[s._v("#")]),s._v(" 7.提交并自动触发构建")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1230),alt:"img"}})]),s._v(" "),e("ul",[e("li",[s._v("在README.md里就可以看到链接了,点击可以说"),e("a",{attrs:{href:"https://coveralls.io/github/zhufengnodejs/zhufengreactui?branch=master",target:"_blank",rel:"noopener noreferrer"}},[s._v("覆盖率详情页"),e("OutboundLink")],1)])])]),s._v(" "),e("li",[e("p",[s._v("https://coveralls.io/github/zhufengnodejs/zhufengreactui?branch=master)")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);