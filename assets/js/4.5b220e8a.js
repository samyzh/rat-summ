(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1005:function(s,t,a){s.exports=a.p+"assets/img/image-20211118200314205.b3a5db5b.png"},1006:function(s,t,a){s.exports=a.p+"assets/img/image-20211118200757278.4769fd3e.png"},1007:function(s,t,a){s.exports=a.p+"assets/img/1241733-20190806143908501-517034220.3416ac4a.png"},1008:function(s,t,a){s.exports=a.p+"assets/img/image-20211119192422004.aadbd160.png"},1009:function(s,t,a){s.exports=a.p+"assets/img/image-20211119191230573.77adf0a0.png"},1010:function(s,t,a){s.exports=a.p+"assets/img/image-20211118202727040.94d6a25a.png"},1011:function(s,t,a){s.exports=a.p+"assets/img/image-20211118203406006.f2ade282.png"},1012:function(s,t,a){s.exports=a.p+"assets/img/image-20211118205311119.25ebf25f.png"},1013:function(s,t,a){s.exports=a.p+"assets/img/image-20211118205431573.8e609d85.png"},1014:function(s,t,a){s.exports=a.p+"assets/img/image-20211118210404100.c311ea69.png"},1015:function(s,t,a){s.exports=a.p+"assets/img/image-20211118202844742.9845cf30.png"},1016:function(s,t,a){s.exports=a.p+"assets/img/auth-tokens.b7b31db6.jpg"},1017:function(s,t,a){s.exports=a.p+"assets/img/sourcemap.a17ac389.jpg"},1018:function(s,t,a){s.exports=a.p+"assets/img/image-20211125200243591.6cb3004a.png"},1019:function(s,t,a){s.exports=a.p+"assets/img/sourcemap-error.d5e36d5b.jpg"},1020:function(s,t,a){s.exports=a.p+"assets/img/image-20211125202659485.0e94e1e2.png"},1021:function(s,t,a){s.exports=a.p+"assets/img/image-20211126194525075.744daa12.png"},1022:function(s,t,a){s.exports=a.p+"assets/img/breadcrumbs.0cc6ebe0.jpg"},1023:function(s,t,a){s.exports=a.p+"assets/img/pageload.d43632d0.jpg"},1024:function(s,t,a){s.exports=a.p+"assets/img/diagram-transaction-trace.ce3ec06b.jpg"},1025:function(s,t,a){s.exports=a.p+"assets/img/diagram-transaction-spans.61cd53a4.jpg"},1026:function(s,t,a){s.exports=a.p+"assets/img/diagram-transaction-example.848201f8.jpg"},1027:function(s,t,a){s.exports=a.p+"assets/img/breadcrumbs-no-performance.70a16fba.jpg"},1028:function(s,t,a){s.exports=a.p+"assets/img/performance1.6497da18.jpg"},1029:function(s,t,a){s.exports=a.p+"assets/img/performance-card1.6e86546e.jpg"},1030:function(s,t,a){s.exports=a.p+"assets/img/performance-card2.81da4752.jpg"},1031:function(s,t,a){s.exports=a.p+"assets/img/performance-card3.2a8cf5c4.jpg"},1032:function(s,t,a){s.exports=a.p+"assets/img/performance-card4.cc4f1ef6.jpg"},1033:function(s,t,a){s.exports=a.p+"assets/img/p75.48006b7a.jpg"},1034:function(s,t,a){s.exports=a.p+"assets/img/LCP-distribution.40f0b6df.jpg"},1035:function(s,t,a){s.exports=a.p+"assets/img/tpm.3dc4292b.jpg"},1036:function(s,t,a){s.exports=a.p+"assets/img/apdex.3e0179b9.jpg"},1037:function(s,t,a){s.exports=a.p+"assets/img/router.501b8c71.jpg"},1038:function(s,t,a){s.exports=a.p+"assets/img/router-detail.35f5e055.jpg"},1039:function(s,t,a){s.exports=a.p+"assets/img/react-router-1.378c2607.jpg"},1040:function(s,t,a){s.exports=a.p+"assets/img/react-router-2.e2d6a501.jpg"},1041:function(s,t,a){s.exports=a.p+"assets/img/mail-settings.07f5695f.jpg"},1042:function(s,t,a){s.exports=a.p+"assets/img/create-rule.052a2bab.jpg"},1043:function(s,t,a){s.exports=a.p+"assets/img/add-rule-1.693b7955.jpg"},1044:function(s,t,a){s.exports=a.p+"assets/img/add-rule-2.b20069fc.jpg"},1045:function(s,t,a){s.exports=a.p+"assets/img/mail.ff933844.jpg"},1046:function(s,t,a){s.exports=a.p+"assets/img/react-errorBoundary-error.4887404a.jpg"},1047:function(s,t,a){s.exports=a.p+"assets/img/redux.f7aa9f01.jpg"},1048:function(s,t,a){s.exports=a.p+"assets/img/redux-state.225419a1.jpg"},1049:function(s,t,a){s.exports=a.p+"assets/img/sentry-rrweb.fe478062.gif"},2002:function(s,t,a){"use strict";a.r(t);var n=a(14),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"云服务器安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#云服务器安装"}},[s._v("#")]),s._v(" 云服务器安装")]),s._v(" "),n("h3",{attrs:{id:"要点须知"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#要点须知"}},[s._v("#")]),s._v(" 要点须知")]),s._v(" "),n("ul",[n("li",[s._v("买云服务器的话，可以考虑按流量付费使用；")]),s._v(" "),n("li",[s._v("设置etc/hosts墙外；【要点】")]),s._v(" "),n("li",[s._v("记得设置docker加速；【要点】")]),s._v(" "),n("li",[s._v("开放对应的安全组端口；")])]),s._v(" "),n("p",[s._v("购买安装ECS")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://ecs-buy.aliyun.com/wizard/#/prepay/cn-hangzhou",target:"_blank",rel:"noopener noreferrer"}},[s._v("购买地址"),n("OutboundLink")],1)]),s._v(" "),n("li",[s._v("选择按需付费，配配置选择共享标准型s6 4vCPU 8GiB")]),s._v(" "),n("li",[s._v("操作系统选择 CentoOS 8.4 64位")]),s._v(" "),n("li",[s._v("分配公网IPv4地址")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1005),alt:"image-20211118200314205"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(1006),alt:"image-20211118200757278"}})]),s._v(" "),n("h3",{attrs:{id:"安装docker"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装docker"}},[s._v("#")]),s._v(" 安装docker")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("yum remove docker docker-common docker-selinux docker-engine\nyum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y yum-utils   device-mapper-persistent-data   lvm2\nyum-config-manager     --add-repo     https://download.docker.com/linux/centos/docker-ce.repo\nyum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce docker-ce-cli containerd.io -y\nsystemctl start docker\ndocker version\ndocker info\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h3",{attrs:{id:"安装docker-compose"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装docker-compose"}},[s._v("#")]),s._v(" 安装docker-compose")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#sudo curl -L "https://static.zhufengpeixun.com/dockercomposeLinuxx8664_1637129076349" -o /usr/local/bin/docker-compose')]),s._v("\n "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -L "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-'),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -s"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("-"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -m"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v(" -o /usr/local/bin/docker-compose\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加可执行权限")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /usr/local/bin/docker-compose\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看版本信息 ")]),s._v("\ndocker-compose -version\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"sentry原理-作用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sentry原理-作用"}},[s._v("#")]),s._v(" Sentry原理/作用")]),s._v(" "),n("h3",{attrs:{id:"原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[s._v("#")]),s._v(" 原理")]),s._v(" "),n("p",[s._v("Sentry到底是如何实现实时日志监控报警的呢？首先，Sentry是一个C/S架构，我们需要在自己应用中集成Sentry的SDK才能在应用发生错误是将错误信息发送给Sentry服务端。根据语言和框架的不同，我们可以选择自动或自定义设置特殊的错误类型报告给Sentry服务端。")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1007),alt:"img"}})]),s._v(" "),n("p",[s._v("而Sentry的服务端分为web、cron、worker这几个部分，应用（客户端）发生错误后将错误信息上报给web，web处理后放入消息队列或Redis内存队列，worker从队列中消费数据进行处理。")]),s._v(" "),n("h3",{attrs:{id:"作用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#作用"}},[s._v("#")]),s._v(" 作用")]),s._v(" "),n("p",[s._v("Sentry可以帮助我们完成以下工作：例如，线上有一个bug，代码的某处逻辑的NullPointerException造成了这个问题，Sentry会立即发现错误，并通过邮件或其他基于通知规则的集成通知到相关责任人员，这个通知可以把我们引入到一个指示板，这个指示板为我们提供了快速分类问题所需的上下文，"),n("strong",[s._v("如：频率、用户影响、代码那一部分受到影响以及那个团队可能是问题的所有者。")])]),s._v(" "),n("p",[s._v("然后，它会显示帮助我们调试的详细信息，比如堆栈跟踪、堆栈本地信息、前面的事件、可能导致问题的提交以及在错误发生时捕获的定制数据。我们还可以在JIRA等项目管理工具中自动开始跟踪问题。")]),s._v(" "),n("h2",{attrs:{id:"sentry本地部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sentry本地部署"}},[s._v("#")]),s._v(" Sentry本地部署")]),s._v(" "),n("p",[n("code",[s._v("Sentry")]),s._v(" 的管理后台是基于 "),n("code",[s._v("Python Django")]),s._v(" 开发的。这个管理后台由背后的 "),n("code",[s._v("Postgres")]),s._v(" 数据库（管理后台默认的数据库）、"),n("code",[s._v("ClickHouse")]),s._v("（存数据特征的数据库）、"),n("code",[s._v("relay")]),s._v("、"),n("code",[s._v("kafka")]),s._v("、"),n("code",[s._v("redis")]),s._v(" 等一些基础服务或由 "),n("code",[s._v("Sentry")]),s._v(" 官方维护的总共 "),n("code",[s._v("23")]),s._v(" 个服务支撑运行。如果独立的部署和维护这 "),n("code",[s._v("23")]),s._v(" 个服务将是异常复杂和困难的。"),n("strong",[s._v("幸运的是，官方提供了基于 "),n("code",[s._v("docker")]),s._v(" 镜像的一键部署实现: "),n("code",[s._v("getsentry/onpremise")]),s._v("。")])]),s._v(" "),n("h3",{attrs:{id:"硬件要求"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#硬件要求"}},[s._v("#")]),s._v(" 硬件要求")]),s._v(" "),n("ul",[n("li",[s._v("Docker 19.03.6+")]),s._v(" "),n("li",[s._v("Compose 1.28.0+")]),s._v(" "),n("li",[s._v("4 CPU Cores")]),s._v(" "),n("li",[s._v("8 GB RAM")]),s._v(" "),n("li",[s._v("20 GB Free Disk Space")])]),s._v(" "),n("h3",{attrs:{id:"docker化安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker化安装"}},[s._v("#")]),s._v(" docker化安装")]),s._v(" "),n("ul",[n("li",[s._v("1、拉取镜像")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("docker pull sentry       "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###目前最新版本9.1.2")]),s._v("\ndocker pull redis\ndocker pull postgres\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("ul",[n("li",[s._v("2、启动服务")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("docker run -d --name sentry-redis --restart"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always redis   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###保证了，异常自动拉起")]),s._v("\ndocker run -d --name sentry-postgres -e "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("POSTGRES_PASSWORD")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("secret -e "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("POSTGRES_USER")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("sentry --restart"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always postgres\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("3、生成sentry秘钥")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("docker run --rm sentry config generate-secret-key\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxddd  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###打印出secret-keys")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("4、数据库及账户初始化")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意：过程中需要你创建用户和密码")]),s._v("\ndocker run -it --rm -e "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SENTRY_SECRET_KEY")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxxxx'")]),s._v(" --link sentry-postgres:postgres --link sentry-redis:redis sentry upgrade\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("5、启动sentry的web服务")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("docker run -d -p "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9000")]),s._v(":9000 --name my-sentry -e "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SENTRY_SECRET_KEY")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxxxx'")]),s._v(" --link sentry-redis:redis --link sentry-postgres:postgres --restart"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always sentry\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("6、启动sentry-cron/work服务")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("docker run -d --name sentry-cron -e "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SENTRY_SECRET_KEY")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxxx'")]),s._v(" --link sentry-postgres:postgres --link sentry-redis:redis sentry run "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cron")]),s._v("\n\ndocker run -d --name sentry-worker-1 -e "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SENTRY_SECRET_KEY")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxxxx'")]),s._v(" --link sentry-postgres:postgres --link sentry-redis:redis sentry run worker\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("ul",[n("li",[s._v("7、登录测试效果")])]),s._v(" "),n("h3",{attrs:{id:"源码docker安装【推荐】"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#源码docker安装【推荐】"}},[s._v("#")]),s._v(" 源码docker安装【推荐】")]),s._v(" "),n("h4",{attrs:{id:"运行脚本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#运行脚本"}},[s._v("#")]),s._v(" 运行脚本")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" -y\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#git clone https://gitee.com/zhufengpeixun/onpremise")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/getsentry/onpremise\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" onpremise\n./install.sh\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h4",{attrs:{id:"注意点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#注意点"}},[s._v("#")]),s._v(" 注意点")]),s._v(" "),n("h5",{attrs:{id:"mac安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mac安装"}},[s._v("#")]),s._v(" mac安装")]),s._v(" "),n("ul",[n("li",[n("p",[n("code",[s._v("mac")]),s._v(" 如果执行 "),n("code",[s._v("./install.sh")]),s._v(" 报错")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("./install/_lib.sh: line "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(": realpath: "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" not found\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("在这里找到解决方案: https://github.com/getsentry/onpremise/issues/941")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("brew "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" coreutils\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("重新执行"),n("code",[s._v("./install.sh")]),s._v("，如果报docker内存分配不够")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("▶ Parsing "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" line "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n\n▶ Setting up error handling "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n\n▶ Checking minimum requirements "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nFAIL: Required minimum RAM available to Docker is "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3800")]),s._v(" MB, found "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1985")]),s._v(" MB\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("docker内存配大点，否则无法安装")]),s._v(" "),n("p",[n("code",[s._v("Docker")]),s._v(" -> "),n("code",[s._v("Preferences")]),s._v(" -> "),n("code",[s._v("Resources")]),s._v(" -> "),n("code",[s._v("Memory")]),s._v(" 分配"),n("code",[s._v("4G")])])]),s._v(" "),n("li",[n("p",[s._v("重新执行"),n("code",[s._v("./install.sh")]),s._v("，成功")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("-----------------------------------------------------------------\n\nYou're all done"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" Run the following "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" to get Sentry running:\n\n  docker-compose up -d\n\n-----------------------------------------------------------------\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])])])]),s._v(" "),n("h5",{attrs:{id:"安装版本及不创建用户【要点】"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装版本及不创建用户【要点】"}},[s._v("#")]),s._v(" 安装版本及不创建用户【要点】")]),s._v(" "),n("p",[s._v("要开始使用所有默认值，只需克隆 repo 并在本地检出中运行"),n("code",[s._v("./install.sh")]),s._v("。自 2020 年 12 月 4 日起，Sentry 默认使用 Python 3，"),n("strong",[s._v("Sentry 21.1.0 是最后一个支持 Python 2 的版本")]),s._v("。")]),s._v(" "),n("p",[s._v("在安装过程中，会提示您是否要创建用户帐户。"),n("strong",[s._v("如果您要求安装不被提示阻止，请运行 "),n("code",[s._v("./install.sh --no-user-prompt")]),s._v("。")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("Did not prompt "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user creation due to non-interactive shell.\nRun the following "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" to create one yourself "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("recommended"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n\n  docker-compose run --rm web createuser\n\n\n▶ Migrating "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" storage "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nUnable to "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" image "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'alpine:latest'")]),s._v(" locally\nlatest: Pulling from library/alpine\n97518928ae5f: Already exists\nDigest: sha256:635f0aa53d99017b38d1a0aa5b2082f7812b03e3cdb299103fe77b5c8a07f1d2\nStatus: Downloaded newer image "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" alpine:latest\n\n▶ Generating Relay credentials "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nCreating "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/relay/config.yml"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nRelay credentials written to "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/relay/credentials.json\n\n▶ Setting up GeoIP integration "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nSetting up IP address geolocation "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nInstalling "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("empty"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" IP address geolocation database "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". done.\nIP address geolocation is not configured "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" updates.\nSee https://develop.sentry.dev/self-hosted/geolocation/ "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" instructions.\nError setting up IP address geolocation.\n\n\n-----------------------------------------------------------------\n\nYou're all done"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" Run the following "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" to get Sentry running:\n\n  docker compose up -d\n\n-----------------------------------------------------------------\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br")])]),n("h3",{attrs:{id:"启动-停止"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动-停止"}},[s._v("#")]),s._v(" 启动/停止")]),s._v(" "),n("h4",{attrs:{id:"启动"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[s._v("#")]),s._v(" 启动")]),s._v(" "),n("ul",[n("li",[n("p",[n("strong",[s._v("安装过程中会让我们创建 "),n("code",[s._v("sentry")]),s._v(" 后台管理员账号，可以先跳过，后面再创建；")])])]),s._v(" "),n("li",[n("p",[s._v("在 "),n("code",[s._v("onpremise")]),s._v(" 文件中中启动服务；")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("docker-compose up -d\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("浏览器访问 http://localhost:9000/ ，进入 "),n("code",[s._v("sentry")]),s._v(" 管理界面，需要账号密码登录；")])])]),s._v(" "),n("h4",{attrs:{id:"注册超管"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#注册超管"}},[s._v("#")]),s._v(" 注册超管")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("创建超级管理员账号")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("docker-compose run --rm web createuser --superuser\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装完毕后可以用以下指令创建用户：（创建用户，该用户为超级用户，不加 --superuser 则为普通用户，--force-update 可以用来覆盖已经存在的相同账号）")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker-compose run --rm web createuser --superuser --force-update ")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("执行结果")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("Creating sentry_onpremise_web_run "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\nUpdating certificates "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /etc/ssl/certs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" added, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" removed"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" done.\nRunning hooks "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /etc/ca-certificates/update.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\ndone.\n03:02:46 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INFO"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" sentry.plugins.github: apps-not-configured\n* Unknown config option found: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'slack.legacy-app'")]),s._v("\nEmail: test@xxx.tv    \nPassword: \nRepeat "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" confirmation: \nAdded to organization: sentry\nUser created: test@xxx.tv\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("如果还使用上述命令，还可以创建新的账号，但数据是共享的")])]),s._v(" "),n("li",[n("p",[s._v("覆盖原账号："),n("strong",[s._v("如果想修改密码可以使用")])]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("docker-compose run --rm web createuser --superuser --force-update\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])])]),s._v(" "),n("h4",{attrs:{id:"停服"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#停服"}},[s._v("#")]),s._v(" 停服")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("在"),n("code",[s._v("onpremise")]),s._v("目录")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker-compose down\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("如果再次启动，则数据会保留")])])]),s._v(" "),n("h3",{attrs:{id:"相关配置其他"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#相关配置其他"}},[s._v("#")]),s._v(" 相关配置其他")]),s._v(" "),n("h4",{attrs:{id:"中文国际化设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#中文国际化设置"}},[s._v("#")]),s._v(" 中文国际化设置")]),s._v(" "),n("p",[s._v("Sentry 在国际化上提供了简体中文的语言支持，通过以下界面可以通过调整语言和所在时区，十分方便。")]),s._v(" "),n("p",[s._v("设置完成后刷新页面，即可应用设置。虽然仍有部分选项没有汉化完成，但也已经足够友好。")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1008),alt:"image-20211119192422004"}})]),s._v(" "),n("h4",{attrs:{id:"邮箱配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#邮箱配置"}},[s._v("#")]),s._v(" 邮箱配置")]),s._v(" "),n("p",[s._v("修改 /onpremise/sentry/config.yml")]),s._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Mail Server #")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###############")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mail.backend")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'smtp'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mail.host")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'smtp.xxx.com'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mail.port")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mail.username")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'用户名'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mail.password")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'******'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mail.from")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sentry-dev@xxx.com'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 记得打开服务器的端口；")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mail.backend: 'smtp'  # Use dummy if you want to disable email entirely")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mail.backend")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 'django_smtp_ssl.SSLEmailBackend'   // 新的邮件后台\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mail.host")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'smtp.163.com'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mail.port")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 587                                    // 465 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v(" 587（465/587 两个是 163 合法的端口，但是确实只有 587 正常使用，具体 issue里有解释）\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mail.username")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'your@163.com'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mail.password")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 'your smpt sceret'                 // 注意，不是你的邮箱密码\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mail.use-tls")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The email address to send on behalf of")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mail.from")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'your@163.com'")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("ul",[n("li",[s._v("这里host、port需要在邮箱服务提供商查询")]),s._v(" "),n("li",[s._v("username、password就是你邮箱的用户名密码")]),s._v(" "),n("li",[s._v("from是发件人邮箱地址")])]),s._v(" "),n("p",[s._v("直接管理后台页面查看配置；")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1009),alt:"image-20211119191230573"}})]),s._v(" "),n("h2",{attrs:{id:"接入项目监控"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#接入项目监控"}},[s._v("#")]),s._v(" 接入项目监控")]),s._v(" "),n("h3",{attrs:{id:"前端接入-sentry-sdk"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前端接入-sentry-sdk"}},[s._v("#")]),s._v(" 前端接入 "),n("code",[s._v("sentry sdk")])]),s._v(" "),n("h4",{attrs:{id:"react项目"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#react项目"}},[s._v("#")]),s._v(" react项目")]),s._v(" "),n("h5",{attrs:{id:"初始化及接入"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#初始化及接入"}},[s._v("#")]),s._v(" 初始化及接入")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("创建一个前端项目")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("npx create-react-app sentry-sdk-demo\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" sentry-sdk-demo\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("安装 "),n("code",[s._v("SDK")]),s._v(" 依赖")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Using yarn")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" @sentry/react @sentry/tracing\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Using npm")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --save @sentry/react @sentry/tracing\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("代码引入 "),n("code",[s._v("sdk")]),s._v("； 直接拷贝创建项目中配置即可；")]),s._v(" "),n("p",[s._v("修改 "),n("code",[s._v("index.js")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" React "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'react'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" ReactDOM "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'react-dom'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./index.css'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" App "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./App'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" reportWebVitals "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./reportWebVitals'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" Sentry "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@sentry/react"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" Integrations "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@sentry/tracing"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nSentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("init")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  dsn"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://0de84f931de34f92b4faf98c248f524e@159.75.243.xxx:9000/3"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// dsn: "http://4e43b21b99764a3ea782bc6f02b3feeb9e7e2893ffc846b29e499985efa3748b@159.75.243.174:9000/3",')]),s._v("\n  integrations"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integrations"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("BrowserTracing")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Set tracesSampleRate to 1.0 to capture 100%")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// of transactions for performance monitoring.")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// We recommend adjusting this value in production")]),s._v("\n  tracesSampleRate"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n   release"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0.0.1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nReactDOM"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("App "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// If you want to start measuring performance in your app, pass a function")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// to log results (for example: reportWebVitals(console.log))")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("reportWebVitals")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])])])]),s._v(" "),n("h5",{attrs:{id:"故意制造一个前端报错"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#故意制造一个前端报错"}},[s._v("#")]),s._v(" 故意制造一个前端报错")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("App")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("fn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("button onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("fn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Break the world"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("button"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" App"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("ul",[n("li",[n("p",[s._v("点击 "),n("code",[s._v("Break the world")]),s._v(" 按钮，可以看到控制台报错，并且发送了一个上报错误的请求到 "),n("code",[s._v("sentry")]),s._v(": "),n("code",[s._v("http://0.0.0.0:9000/api/3/store/?sentry_key=c96e4ce910524463a4e6a655a7ebxxxx&sentry_version=7")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1010),alt:"image-20211118202727040"}})])])]),s._v(" "),n("p",[s._v("启动"),n("code",[s._v("npm run start")]),s._v("点击主动报错提示；")]),s._v(" "),n("h4",{attrs:{id:"vue项目"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue项目"}},[s._v("#")]),s._v(" vue项目")]),s._v(" "),n("h5",{attrs:{id:"初始化及接入-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#初始化及接入-2"}},[s._v("#")]),s._v(" 初始化及接入")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1011),alt:"image-20211118203406006"}})]),s._v(" "),n("ul",[n("li",[n("p",[s._v("创建一个前端项目")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("vue create sentry-sdk-demo-vue\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" sentry-sdk-demo-vue\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("安装 "),n("code",[s._v("SDK")]),s._v(" 依赖")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Using yarn")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" @sentry/vue @sentry/tracing\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Using npm")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --save @sentry/vue @sentry/tracing\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("代码引入 "),n("code",[s._v("sdk")])]),s._v(" "),n("p",[s._v("修改 "),n("code",[s._v("main.js")])]),s._v(" "),n("p",[s._v("Vue2")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Vue "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Router "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-router"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" Sentry "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@sentry/vue"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" Integrations "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@sentry/tracing"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nVue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Router"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" router "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Router")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nSentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("init")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  dsn"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://08e7e4d7762a43a08aa61ea0a6c9e79f@159.75.243.xx:9000/4"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  integrations"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integrations"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("BrowserTracing")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      routingInstrumentation"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vueRouterInstrumentation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("router"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      tracingOrigins"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my-site-url.com"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("^\\/")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Set tracesSampleRate to 1.0 to capture 100%")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// of transactions for performance monitoring.")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// We recommend adjusting this value in production")]),s._v("\n  tracesSampleRate"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Vue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  router"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("render")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("h")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("h")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("App"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("$mount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"#app"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br")])]),n("p",[s._v("vue3")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" createApp "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" createRouter "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-router"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" Sentry "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@sentry/vue"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" Integrations "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@sentry/tracing"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" app "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("createApp")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" router "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("createRouter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nSentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("init")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  dsn"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://08e7e4d7762a43a08aa61ea0a6c9e79f@159.75.243.xx:9000/4"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  integrations"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integrations"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("BrowserTracing")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      routingInstrumentation"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vueRouterInstrumentation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("router"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      tracingOrigins"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my-site-url.com"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("^\\/")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Set tracesSampleRate to 1.0 to capture 100%")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// of transactions for performance monitoring.")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// We recommend adjusting this value in production")]),s._v("\n  tracesSampleRate"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("router"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"#app"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])])])]),s._v(" "),n("h5",{attrs:{id:"故意制造一个前端报错-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#故意制造一个前端报错-2"}},[s._v("#")]),s._v(" 故意制造一个前端报错")]),s._v(" "),n("p",[s._v("修改"),n("code",[s._v("HelloWorld.vue")])]),s._v(" "),n("div",{staticClass:"language-vue line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-vue"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("div")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("hello"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("h1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("@click")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("handleClick"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("{{ msg }}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("h1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HelloWorld"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  props"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    msg"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" String"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  methods"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("handleClick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('\x3c!-- Add "scoped" attribute to limit CSS to this component only --\x3e')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("style")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("scoped")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token style"}},[n("span",{pre:!0,attrs:{class:"token language-css"}},[s._v("\n"),n("span",{pre:!0,attrs:{class:"token selector"}},[s._v("h3")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("margin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 40px 0 0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token selector"}},[s._v("ul")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("list-style-type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" none"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("padding")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token selector"}},[s._v("li")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("display")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" inline-block"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("margin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 0 10px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token selector"}},[s._v("a")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("color")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" #42b983"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br")])]),n("p",[s._v("启动"),n("code",[s._v("npm run serve")]),s._v("点击主动报错提示；")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1012),alt:"image-20211118205311119"}})]),s._v(" "),n("h4",{attrs:{id:"参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[s._v("#")]),s._v(" 参数")]),s._v(" "),n("h5",{attrs:{id:"参数说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参数说明"}},[s._v("#")]),s._v(" 参数说明")]),s._v(" "),n("p",[n("code",[s._v("Sentry.init")]),s._v(" 参数说明")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("官方文档: https://docs.sentry.io/platforms/javascript/configuration/options/")])]),s._v(" "),n("li",[n("p",[n("code",[s._v("dsn")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("前端通过sentry-sdk上报信息请求的目标地址，其实就是sentry后端地址，拿官方原话就是："),n("code",[s._v("The DSN tells the SDK where to send the events to")])])]),s._v(" "),n("li",[n("p",[s._v("DSN可以安全地公开，因为它们只允许提交新事件和相关事件数据；它们不允许读取任何信息。 虽然存在滥用 DSN 的风险，其中任何用户都可以将事件连同他们想要的任何信息发送到你的组织，但这种情况很少发生。")])]),s._v(" "),n("li",[n("p",[s._v("管理界面在 "),n("code",[s._v("Settings -> Projects -> Client Keys (DSN)")])])]),s._v(" "),n("li",[n("p",[s._v("格式为 "),n("code",[s._v("{PROTOCOL}://{PUBLIC_KEY}:{SECRET_KEY}@{HOST}{PATH}/{PROJECT_ID}")])])]),s._v(" "),n("li",[n("p",[s._v("例子:")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("'http://06b94ee717014df78b9b48c7f9f1xxxx@localhost:9000/2'\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])])])]),s._v(" "),n("li",[n("p",[n("code",[s._v("environment")])]),s._v(" "),n("ul",[n("li",[s._v("环境，这个定义是前端根据自己的开发、测试、预发布、线上环境等定义的，不配置的话默认为 "),n("code",[s._v('"production"')])]),s._v(" "),n("li",[s._v("当错误上报后，"),n("code",[s._v("sentry")]),s._v(" 管理界面的错误详情里会展示这个错误对应的 "),n("code",[s._v("environment")]),s._v("，并且在 "),n("code",[s._v("issues")]),s._v(" 列表页中，会有一个 "),n("code",[s._v("environment")]),s._v(" 筛选对应环境的错误")]),s._v(" "),n("li",[s._v("其实目的是为了区分是哪个前端环境的错误")])])]),s._v(" "),n("li",[n("p",[n("code",[s._v("integrations: [new Integrations.BrowserTracing()]")])]),s._v(" "),n("ul",[n("li",[s._v("BrowserTracing 集成为每个页面加载和导航事件创建一个新"),n("code",[s._v("Transaction")]),s._v("，并为每个 "),n("code",[s._v("XMLHttpRequest")]),s._v(" 或在这些事务打开时发生的获取请求创建一个子"),n("code",[s._v("Span")]),s._v("，"),n("code",[s._v("Transaction")]),s._v("、"),n("code",[s._v("Span")]),s._v("相关术语后续会介绍。")])])]),s._v(" "),n("li",[n("p",[n("code",[s._v("release")]),s._v(": 一般前端每次发布版本，都需要更新下 "),n("code",[s._v("release")]),s._v(" 版本号，"),n("code",[s._v("sentry")]),s._v(" 会根据 "),n("code",[s._v("release")]),s._v(" 做分类，对应 "),n("code",[s._v("release")]),s._v(" 下的信息，会体现在 "),n("code",[s._v("sentry")]),s._v(" 管理界面菜单 "),n("code",[s._v("Releases")]),s._v(" 中")])])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1013),alt:"image-20211118205431573"}})]),s._v(" "),n("p",[s._v("token配置")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1014),alt:"image-20211118210404100"}})]),s._v(" "),n("h5",{attrs:{id:"可以设置线上环境下上报错误"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#可以设置线上环境下上报错误"}},[s._v("#")]),s._v(" 可以设置线上环境下上报错误")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'production'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("init")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  dsn"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://08e7e4d7762a43a08aa61ea0a6c9e79f@159.75.243.xx:9000/4"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  integrations"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integrations"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("BrowserTracing")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      routingInstrumentation"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vueRouterInstrumentation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("router"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      tracingOrigins"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my-site-url.com"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("^\\/")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Set tracesSampleRate to 1.0 to capture 100%")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// of transactions for performance monitoring.")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// We recommend adjusting this value in production")]),s._v("\n  tracesSampleRate"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[s._v("线上调试的话")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" dist\nhttp-server\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"sentry-管理界面查看错误详情"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sentry-管理界面查看错误详情"}},[s._v("#")]),s._v(" "),n("code",[s._v("sentry")]),s._v(" 管理界面查看错误详情")]),s._v(" "),n("ul",[n("li",[s._v("在菜单 "),n("code",[s._v("issues")]),s._v(" 中，可以看到刚才上报的错误，点开可以查看详情：\n"),n("ul",[n("li",[n("code",[s._v("TAGS")]),s._v(": 包括请求IP、浏览器、操作系统等信息")]),s._v(" "),n("li",[n("code",[s._v("EXCEPTION")]),s._v(": 报错的类型、报错内容，错误堆栈信息等")]),s._v(" "),n("li",[n("code",[s._v("BREADCRUMBS")]),s._v(": 错误链路信息")]),s._v(" "),n("li",[s._v("错误发生的页面地址及UA信息")])])])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1015),alt:"image-20211118202844742"}})]),s._v(" "),n("h3",{attrs:{id:"sourcemap处理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sourcemap处理"}},[s._v("#")]),s._v(" sourcemap处理")]),s._v(" "),n("h4",{attrs:{id:"命令行工具上传"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#命令行工具上传"}},[s._v("#")]),s._v(" 命令行工具上传")]),s._v(" "),n("p",[s._v("可参考文档；"),n("a",{attrs:{href:"https://docs.sentry.io/product/cli/",target:"_blank",rel:"noopener noreferrer"}},[s._v("sentry-cli官方文档"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("1.在开发电脑安装"),n("code",[s._v("@sentry/cli")])]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g --unsafe-perm"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true --allow-root @sentry/cli\nsentry-cli -h\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("2.配置 "),n("code",[s._v("sentry-cli")])]),s._v(" "),n("p",[s._v("在上传之前，我们需要配置一下 "),n("code",[s._v("sentry-cli")]),s._v("，主要配置以下几个信息：")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("url")]),s._v(": 要上传的 "),n("code",[s._v("sentry")]),s._v(" 服务的地址，即我们通过 "),n("code",[s._v("docker")]),s._v(" 启动的服务的地址;")]),s._v(" "),n("li",[n("code",[s._v("org")]),s._v(": 组织名称，可以在 "),n("code",[s._v("sentry")]),s._v(" 管理界面的 "),n("code",[s._v("Settings")]),s._v(" 中设置组织;")]),s._v(" "),n("li",[n("code",[s._v("project")]),s._v(": "),n("code",[s._v("sentry")]),s._v(" 项目名，可以在 "),n("code",[s._v("sentry管理界面")]),s._v(" 的"),n("code",[s._v("Projects")]),s._v("中查看、创建、设置项目;")]),s._v(" "),n("li",[n("code",[s._v("token")]),s._v(": "),n("code",[s._v("sentry")]),s._v(" 服务准入 "),n("code",[s._v("sentry-cli")]),s._v(" 上传的鉴权 "),n("code",[s._v("token")]),s._v("，可以在 "),n("code",[s._v("sentry管理界面")]),s._v(" 的 "),n("code",[s._v("Settings -> Account -> API -> Auth Tokens")]),s._v(" 中创建和删除;")])]),s._v(" "),n("p",[s._v("3.执行一下命令创建 "),n("code",[s._v("sentry-cli")]),s._v(" 配置文件")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定本地搭建的地址")]),s._v("\nsentry-cli --url http://127.0.0.1:9000 login\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认sentry.io")]),s._v("\nsentry-cli login\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("4.命令行中弹出选择")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("This helps you signing "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" your sentry-cli with an authentication token.\nIf you "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" not yet have a token ready we can bring up a browser "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" you\nto create a token now.\n\nSentry server: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".8.46\nOpen browser now? "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y/n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" y\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("ul",[n("li",[n("p",[s._v("选择"),n("code",[s._v("n")]),s._v("，则提示输入 "),n("code",[s._v("token")]),s._v("，"),n("code",[s._v("token")]),s._v(" 可以在 "),n("code",[s._v("sentry管理界面")]),s._v(" 的 "),n("code",[s._v("Settings -> Account -> API -> Auth Tokens")]),s._v(" 中创建，然后粘贴到命令行")])]),s._v(" "),n("li",[n("p",[s._v("选择"),n("code",[s._v("y")]),s._v("，则会自动打开浏览器到 "),n("code",[s._v("sentry管理界面")]),s._v(" 的 "),n("code",[s._v("Settings -> Account -> API -> Auth Tokens")]),s._v("，创建或直接复制 "),n("code",[s._v("token")]),s._v(" 来粘贴")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1016),alt:"Auth Tokens"}})])])]),s._v(" "),n("p",[s._v("5.命令执行完成后，会生成文件 "),n("code",[s._v("~/.sentryclirc")]),s._v(";")]),s._v(" "),n("p",[n("code",[s._v("cat /Users/samy/.sentryclirc")]),s._v("; 可以修改添加url, org, project;")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("auth"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ntoken"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3e5")]),s._v("e95abce3541bxxxxxxxxxxxxxxxxxxxx\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("defaults"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n#url"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9000")]),s._v("\nurl"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("sentry.io")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),s._v("\norg"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yessz\nproject"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("sentry"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sdk"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("demo"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("react\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("ul",[n("li",[n("strong",[s._v("这个文件也可以直接写在前端项目根目录中，"),n("code",[s._v("sentry-cli")]),s._v(" 命令会优先读取当前目录下的 "),n("code",[s._v(".sentryclirc")]),s._v(" 文件，如果没有这个文件，才会读取 "),n("code",[s._v("~/.sentryclirc")])])])]),s._v(" "),n("p",[s._v("6.手动上传 "),n("code",[s._v("sourcemap")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("编译前端项目，生成 "),n("code",[s._v("build")]),s._v(" 目录，其中包含 "),n("code",[s._v("sourcemap")]),s._v(" 文件")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("在上传之前，我们先看下 "),n("strong",[n("code",[s._v("sentry")]),s._v(" 管理界面 "),n("code",[s._v("Settings -> sentry -> Projects -> sentry-sdk-demo-react -> Source Maps -> Archive")]),s._v("，会发现列表中有一个 "),n("code",[s._v("0.0.1")]),s._v(" 版本")]),s._v("，这个版本是我们在前端项目里通过 "),n("code",[s._v("sentry.init")]),s._v(" 的 "),n("code",[s._v("release")]),s._v(" 配置的，只要前端上传过报错信息，就会在管理界面生成这个版本。目前列表中应该没有任何文件。")])]),s._v(" "),n("li",[n("p",[s._v("上传命令，会把本地的 "),n("code",[s._v("./build")]),s._v(" 文件夹下的 "),n("code",[s._v("sourcemap")]),s._v(" 文件，上传到 "),n("code",[s._v("sentry")]),s._v(" 服务，并且指定上传到 "),n("code",[s._v("Archive")]),s._v(" 为 "),n("code",[s._v("0.0.1")]),s._v(" 版本中：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("sentry-cli releases files "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".1 upload-sourcemaps --url-prefix "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'~/'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./build'")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("其中 "),n("code",[s._v("--url-prefix")]),s._v(" 是指 "),n("code",[s._v("sentry")]),s._v(" 读取 "),n("code",[s._v("sourcemap")]),s._v(" 文件服务的路径，"),n("strong",[s._v("如果项目没有部署在域名根目录，则需要调整这个参数")]),s._v("【要点】")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 执行结果\n> Found 9 release files\n> Analyzing 9 sources\n> Analyzing completed in 0.051s\n> Rewriting sources\n> Rewriting completed in 0.027s\n> Adding source map references\n> Bundling files for upload... \n> Bundling completed in 0.059s\n> Optimizing completed in 0.002s\n> Uploading completed in 0.194s\n> Uploaded release files to Sentry\n> Processing completed in 0.1s\n> File upload complete (processing pending on server)\n\nSource Map Upload Report\n  Minified Scripts\n    ~/static/js/2.24e90ef4.chunk.js (sourcemap at 2.24e90ef4.chunk.js.map)\n    ~/static/js/3.dcc4df3d.chunk.js (sourcemap at 3.dcc4df3d.chunk.js.map)\n    ~/static/js/main.edf94630.chunk.js (sourcemap at main.edf94630.chunk.js.map)\n    ~/static/js/runtime-main.d690483e.js (sourcemap at runtime-main.d690483e.js.map)\n  Source Maps\n    ~/static/css/main.6dea0f05.chunk.css.map\n    ~/static/js/2.24e90ef4.chunk.js.map\n    ~/static/js/3.dcc4df3d.chunk.js.map\n    ~/static/js/main.edf94630.chunk.js.map\n    ~/static/js/runtime-main.d690483e.js.map\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("回到 "),n("code",[s._v("sentry")]),s._v(" 管理界面 "),n("code",[s._v("Archive")]),s._v("，可以看到 "),n("code",[s._v("sourcemap")]),s._v(" 文件已经上传")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1017),alt:"sourcemap"}})])])]),s._v(" "),n("p",[s._v("7.查看效果")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("通过"),n("code",[s._v("http-server")]),s._v("启动前端服务; "),n("strong",[s._v("【生产环境下本地调试】")])]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" build "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" http-server\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#或者用serve库")]),s._v("\nThe build folder is ready to be deployed.\nYou may serve it with a static server:\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" global "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" serve\n  serve -s build\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("访问 "),n("a",{attrs:{href:"http://127.0.0.1:8080/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://127.0.0.1:8080"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[s._v("点击按钮手动制造并上报错误")])]),s._v(" "),n("li",[n("p",[s._v("回到 "),n("code",[s._v("sentry")]),s._v(" 管理界面，查看对应 "),n("code",[s._v("issue")]),s._v("，可以看到具体信息：哪个文件发生了错误，错误的行列数，错误行附近的源代码")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1018),alt:"image-20211125200243591"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(1019),alt:"sourcemap错误"}})])]),s._v(" "),n("li",[n("p",[s._v("删除 "),n("code",[s._v("sourcemap")])]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("sentry-cli releases files "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".1 delete --all\n\nD ~/static/css/main.6dea0f05.chunk.css.map\nD ~/static/js/2.24e90ef4.chunk.js\nD ~/static/js/2.24e90ef4.chunk.js.map\nD ~/static/js/3.dcc4df3d.chunk.js\nD ~/static/js/3.dcc4df3d.chunk.js.map\nD ~/static/js/main.edf94630.chunk.js\nD ~/static/js/main.edf94630.chunk.js.map\nD ~/static/js/runtime-main.d690483e.js\nD ~/static/js/runtime-main.d690483e.js.map\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])])])]),s._v(" "),n("h4",{attrs:{id:"webpack插件上传【推荐】"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#webpack插件上传【推荐】"}},[s._v("#")]),s._v(" "),n("code",[s._v("webpack")]),s._v("插件上传【推荐】")]),s._v(" "),n("p",[s._v("第二种方式会在 "),n("code",[s._v("npm run build")]),s._v(" 时自动上传 "),n("code",[s._v("sourcemap")]),s._v("，推荐使用这种方式")]),s._v(" "),n("p",[s._v("1.安装 "),n("code",[s._v("@sentry/webpack-plugin")])]),s._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/getsentry/sentry-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[s._v("@sentry/webpack-plugin官方文档"),n("OutboundLink")],1)]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -D @sentry/webpack-plugin react-app-rewired\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("2.配置 "),n("code",[s._v("webpack")])]),s._v(" "),n("ul",[n("li",[n("p",[n("code",[s._v("create-react-app")]),s._v(" 修改 "),n("code",[s._v("webpack")]),s._v(" "),n("a",{attrs:{href:"https://github.com/timarney/react-app-rewired",target:"_blank",rel:"noopener noreferrer"}},[s._v("配置参考"),n("OutboundLink")],1),s._v("; "),n("code",[s._v("config-overrides.js")]),s._v(";")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" SentryCliPlugin "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@sentry/webpack-plugin'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("exports")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("override")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" env")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("devtool "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'source-map'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("plugins"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SentryCliPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//authToken: 'xxxxxxxx',")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//url: 'http://127.0.0.1:9000',//不设置的话默认是官方的；")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//org: 'sentry',")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//project: 'cra-test',")]),s._v("\n      release"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0.0.1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//这里可以通过git动态设置版本号；")]),s._v("\n      urlPrefix"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'~/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      include"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./build'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      ignore"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'node_modules'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("配置中的 "),n("code",[s._v("release")]),s._v("、"),n("code",[s._v("urlPrefix")]),s._v("、"),n("code",[s._v("include")]),s._v(" ，"),n("code",[s._v("authToken")]),s._v("、"),n("code",[s._v("url")]),s._v("、"),n("code",[s._v("org")]),s._v("、"),n("code",[s._v("project")]),s._v("、定义同 "),n("code",[s._v(".sentryclirc")]),s._v("；如不设置的默认用当前本地的，再查询全局的；")])]),s._v(" "),n("li",[n("p",[n("code",[s._v("ignore")]),s._v(": 上传时要忽略的文件夹或文件类型")])])]),s._v(" "),n("p",[s._v("3."),n("code",[s._v("npm run build")]),s._v(" 编译，会产生一下信息：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("Creating an optimized production build"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Found "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" release files\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Analyzing "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" sources\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Analyzing completed "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".065s\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Rewriting sources\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Rewriting completed "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".039s\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Adding "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" map references\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Bundling files "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" upload"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". ~/static/js/2.24e90ef4.chunk.js.map\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Bundling completed "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".072s\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Optimizing completed "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".001s\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Uploading completed "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".146s\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Uploaded release files to Sentry\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Processing completed "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".069s\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" File upload complete "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("processing pending on server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Organization: sentry\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Project: cra-test\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Release: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".1\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Dist: None\n\nSource Map Upload Report\n  Minified Scripts\n    ~/static/js/2.24e90ef4.chunk.js "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sourcemap at "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".24e90ef4.chunk.js.map"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    ~/static/js/3.dcc4df3d.chunk.js "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sourcemap at "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".dcc4df3d.chunk.js.map"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    ~/static/js/main.edf94630.chunk.js "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sourcemap at main.edf94630.chunk.js.map"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    ~/static/js/runtime-main.d690483e.js "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sourcemap at runtime-main.d690483e.js.map"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  Source Maps\n    ~/static/css/main.6dea0f05.chunk.css.map\n    ~/static/js/2.24e90ef4.chunk.js.map\n    ~/static/js/3.dcc4df3d.chunk.js.map\n    ~/static/js/main.edf94630.chunk.js.map\n    ~/static/js/runtime-main.d690483e.js.map\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br")])]),n("p",[s._v("4.回到 "),n("code",[s._v("sentry")]),s._v(" 管理界面 "),n("code",[s._v("Archive")]),s._v("，可以看到 "),n("code",[s._v("sourcemap")]),s._v(" 文件已经上传到 "),n("code",[s._v("sentry")]),s._v(" 服务中;")]),s._v(" "),n("p",[s._v("5."),n("strong",[s._v("在上传完以后，需要删除 "),n("code",[s._v("sourcemap")]),s._v(" 文件")]),s._v("，不要把它们部署到线上去了; "),n("code",[s._v("package.json")])]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"react-app-rewired build && rm -rf build/*.map"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[n("img",{attrs:{src:a(1020),alt:"image-20211125202659485"}})]),s._v(" "),n("h2",{attrs:{id:"常用实践"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#常用实践"}},[s._v("#")]),s._v(" 常用实践")]),s._v(" "),n("h3",{attrs:{id:"设置变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设置变量"}},[s._v("#")]),s._v(" 设置变量")]),s._v(" "),n("p",[s._v("在 Sentry 中，可以使用 "),n("code",[s._v("set")]),s._v(" + "),n("code",[s._v("tags")]),s._v("，"),n("code",[s._v("extra")]),s._v("，"),n("code",[s._v("contexts")]),s._v("，"),n("code",[s._v("user")]),s._v("，"),n("code",[s._v("level")]),s._v("，"),n("code",[s._v("fingerprint")]),s._v(" 形式，设置变量。下面将简单介绍几种方式，详情使用方法可见"),n("a",{attrs:{href:"https://docs.sentry.io/platforms/javascript/enriching-events/context/#clearing-context",target:"_blank",rel:"noopener noreferrer"}},[s._v("文档"),n("OutboundLink")],1),s._v("。")]),s._v(" "),n("h4",{attrs:{id:"通过-setuser-设置全局变量用户信息示例-不建议使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#通过-setuser-设置全局变量用户信息示例-不建议使用"}},[s._v("#")]),s._v(" 通过 setUser 设置全局变量用户信息示例（不建议使用）")]),s._v(" "),n("p",[s._v("捕捉异常还需要采集用户信息，在用户登录后需要通过 "),n("code",[s._v("setUser")]),s._v(" 设置一下用户信息全局变量，如下所示。**注意，通过这种方式设置的全局变量在页面刷新后会消失。**设置用户信息代码：")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[s._v("Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setUser")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    tenant"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        code"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12345")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'测试公司'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        _id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12345")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    orgAccount"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        _id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("54321")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        orgName"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'是机构啦'")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    user"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        _id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'8910JQ'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        loginName"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'测试人员小Q'")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[s._v("设置全局变量后触发的 issue 中，可看到上传的用户数据。")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1021),alt:"image-20211126194525075"}})]),s._v(" "),n("h4",{attrs:{id:"通过-beforesnd-插入用户信息"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#通过-beforesnd-插入用户信息"}},[s._v("#")]),s._v(" 通过 beforeSnd 插入用户信息")]),s._v(" "),n("p",[s._v("通过 Sentry 机制设置的全局变量在页面刷新后会消失，这边我建议通过 "),n("code",[s._v("beforeSend")]),s._v(" 函数，修改 event 中的数据来插入需要的全局变量。")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[s._v("Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("init")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n \t  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 钩子函数，在每次发送 event 前触发")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("beforeSend")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("event")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 在这里可根据业务情况发送用户信息")]),s._v("\n        event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            userNick"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xiaohu'")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h4",{attrs:{id:"设置全局变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设置全局变量"}},[s._v("#")]),s._v(" 设置全局变量")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 以下是 Sentry 定义的全局变量，可以直接使用 Sentry api 设置")]),s._v("\nSentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setUser")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nSentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tags")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nSentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("extra")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nSentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("level")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nSentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("fingerprint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通过 setContext，设置 key 值，可自定义随事件传递的变量名")]),s._v("\nSentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setContext")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h4",{attrs:{id:"设置局部变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设置局部变量"}},[s._v("#")]),s._v(" 设置局部变量")]),s._v(" "),n("p",[n("code",[s._v("captureException")]),s._v(" 是我常用的一种设置局部变量并上传报错的方式，"),n("code",[s._v("Sentry.captureException(err[, obj])")]),s._v(" 第一个参数为抛出的异常，第二个参数可附加错误信息。 第二个参数为对象，key 值可为 "),n("code",[s._v("tags")]),s._v("，"),n("code",[s._v("extra")]),s._v("，"),n("code",[s._v("contexts")]),s._v("，"),n("code",[s._v("user")]),s._v("，"),n("code",[s._v("level")]),s._v("，"),n("code",[s._v("fingerprint")]),s._v(" 这 6 种。")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[s._v("Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("captureException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  contexts"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    message"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      a"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      b"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" b"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h4",{attrs:{id:"设置局部变量网络报错信息示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设置局部变量网络报错信息示例"}},[s._v("#")]),s._v(" 设置局部变量网络报错信息示例")]),s._v(" "),n("p",[s._v("根据目前前端框架所用的 axios，对网络请求出错的局部数据进行收集，代码示例：")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[s._v("Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("captureException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  contexts"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    message"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      url"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("baseURL "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      data"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      method"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("method"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      status"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("status"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      statusText"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("statusText"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      responseData"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("stringify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h4",{attrs:{id:"清除全局变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#清除全局变量"}},[s._v("#")]),s._v(" 清除全局变量")]),s._v(" "),n("p",[s._v("在用户退出登录后需要清除该用户的用户信息，有以下两种方式。")]),s._v(" "),n("ol",[n("li",[s._v("通过设置为空，可以清除设置过的数据。")])]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[s._v("Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setUser")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",[n("li",[s._v("通过 "),n("code",[s._v("scope.clear()")]),s._v(" 清除全局变量。")])]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[s._v("Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("configureScope")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("scope")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" scope"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("clear")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 清除所有全局变量")]),s._v("\nSentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("configureScope")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("scope")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" scope"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setUser")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 清除 user 变量")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"添加钉钉通知"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#添加钉钉通知"}},[s._v("#")]),s._v(" 添加钉钉通知")]),s._v(" "),n("p",[s._v("参考之前文章【02.sentry集成钉钉】")]),s._v(" "),n("h2",{attrs:{id:"实践详细分析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实践详细分析"}},[s._v("#")]),s._v(" 实践详细分析")]),s._v(" "),n("h3",{attrs:{id:"面包屑-breadcrumbs"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#面包屑-breadcrumbs"}},[s._v("#")]),s._v(" 面包屑 Breadcrumbs")]),s._v(" "),n("p",[s._v("在错误详情页中，有 "),n("code",[s._v("Breadcrumbs")]),s._v(" 信息，它非常有用，可以追踪错误发生之前的一些事件，例如点击、页面导航等。")]),s._v(" "),n("ul",[n("li",[n("p",[n("code",[s._v("Breadcrumbs")]),s._v(" 是一连串的事件跟踪，展示了发生问题之前的一系列操作。这些事件与传统日志非常相似，但可以记录更丰富的结构化数据。"),n("a",{attrs:{href:"https://docs.sentry.io/platforms/javascript/enriching-events/breadcrumbs/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Breadcrumbs 官方文档"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[s._v("我们在 "),n("code",[s._v("Sentry")]),s._v(" 管理界面，点击开之前的一个 "),n("code",[s._v("issue")]),s._v(" 详情，可以看到 "),n("code",[s._v("Breadcrumbs")]),s._v(" 相关信息：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1022),alt:"Breadcrumbs"}})])]),s._v(" "),n("li",[n("p",[s._v("最后一行记录了发生的错误，而在此之前的前面两行记录了在这个错误发生之前的一些操作：先发生了一次"),n("strong",[s._v("页面加载")]),s._v("的"),n("strong",[s._v("事务")]),s._v("，接着在点击了 "),n("code",[s._v("body > div#root > button")]),s._v(" 的UI。")])]),s._v(" "),n("li",[n("p",[s._v("面包屑可以通过两种方式生成：")]),s._v(" "),n("ol",[n("li",[s._v("自动生成: 通过 "),n("code",[s._v("SDK")]),s._v(" 及其相关的集成将自动记录多种类型的面包屑。例如，浏览器 "),n("code",[s._v("JavaScript SDK")]),s._v(" 将自动记录 "),n("code",[s._v("DOM")]),s._v(" 元素上的点击和按键、"),n("code",[s._v("XHR")]),s._v(" 请求、控制台 "),n("code",[s._v("API")]),s._v(" 调用以及所有导航变更。")]),s._v(" "),n("li",[s._v("手动生成: "),n("a",{attrs:{href:"https://getsentry.github.io/sentry-javascript/modules/minimal.html#addbreadcrumb",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),n("OutboundLink")],1)])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("addBreadcrumb")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  category"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"auth"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  message"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Authenticated user "')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("email"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  level"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Severity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Info"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])])]),s._v(" "),n("h3",{attrs:{id:"traces-transactions-和-spans"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#traces-transactions-和-spans"}},[s._v("#")]),s._v(" "),n("code",[s._v("Traces")]),s._v(", "),n("code",[s._v("Transactions")]),s._v(" 和 "),n("code",[s._v("Spans")])]),s._v(" "),n("p",[n("a",{attrs:{href:"https://docs.sentry.io/product/sentry-basics/tracing/distributed-tracing/",target:"_blank",rel:"noopener noreferrer"}},[s._v("相关官方文档"),n("OutboundLink")],1)]),s._v(" "),n("ul",[n("li",[n("p",[s._v("上面 "),n("code",[s._v("Breadcrumbs")]),s._v(" 中第一行，被称为 "),n("code",[s._v("Transaction")]),s._v(" ，我们先点击开这个连接，进入这个 "),n("code",[s._v("Transaction")]),s._v(" 详情页；")])]),s._v(" "),n("li",[n("p",[s._v("可以看到原来这是一个页面加载的过程的记录；")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1023),alt:"pageload"}})])]),s._v(" "),n("li",[n("p",[s._v("这个页面加载的整个过程，被称为一个"),n("code",[s._v("Transaction")])])]),s._v(" "),n("li",[n("p",[s._v("这个"),n("code",[s._v("Transaction")]),s._v("是一个树状结构，根节点是"),n("code",[s._v("pageload")]),s._v("，表示页面加载，根节点下有浏览器的缓存读取、DNS解析、请求、响应、卸载事件、dom内容加载事件等过程，还有各种资源加载过程")])]),s._v(" "),n("li",[n("p",[s._v("点击开任意一个节点，可以看到：")]),s._v(" "),n("ul",[n("li",[s._v("每个节点都有一个"),n("code",[s._v("id")]),s._v(": "),n("code",[s._v("Span ID")])]),s._v(" "),n("li",[n("code",[s._v("Trace ID")]),s._v(": 追踪Id")]),s._v(" "),n("li",[s._v("这个节点过程花费的时间等信息")])])]),s._v(" "),n("li",[n("p",[n("code",[s._v("Sentry")]),s._v(" 把这些树状结构的节点称为 "),n("code",[s._v("Span")]),s._v("，他们归属于某一个 "),n("code",[s._v("Transaction")])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("一般来讲，页面加载是一个 "),n("code",[s._v("Transaction")]),s._v("，后端API接口逻辑是一个 "),n("code",[s._v("Transaction")]),s._v("，操作数据库逻辑是一个 "),n("code",[s._v("Transaction")]),s._v("，它们共同组成了一个 "),n("code",[s._v("Trace")]),s._v("；")])])])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1024),alt:"transaction-example"}}),s._v(" "),n("img",{attrs:{src:a(1025),alt:"transaction-example"}}),s._v(" "),n("img",{attrs:{src:a(1026),alt:"transaction-example"}})]),s._v(" "),n("h3",{attrs:{id:"页面加载及performance"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#页面加载及performance"}},[s._v("#")]),s._v(" 页面加载及Performance")]),s._v(" "),n("h4",{attrs:{id:"性能指标说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#性能指标说明"}},[s._v("#")]),s._v(" 性能指标说明")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("在上面的分析中，我们看到了一个页面加载（指刷新页面，不是单页面应用的路由变化）的 "),n("code",[s._v("Transaction")]),s._v("，如果我们在 "),n("code",[s._v("SDK")]),s._v(" 的"),n("code",[s._v("Sentry.init()")]),s._v("中，将 "),n("code",[s._v("new Integrations.BrowserTracing()")]),s._v(" 去掉，那么 "),n("code",[s._v("Breadcrumbs")]),s._v(" 不会显示 "),n("code",[s._v("pageload")]),s._v(" 信息：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1027),alt:"breadcrumbs-no-performance"}})])]),s._v(" "),n("li",[n("p",[s._v("所以 "),n("code",[s._v("SDK")]),s._v(" 的 "),n("code",[s._v("BrowserTracing")]),s._v(" 功能，就是用来将浏览器页面加载/导航操作检测为事务，并捕获请求、指标和错误作为跨度。")])]),s._v(" "),n("li",[n("p",[s._v("在页面加载的 "),n("code",[s._v("Transaction")]),s._v(" 中，我们"),n("strong",[s._v("可以看到页面加过程中不同阶段的所花费的时间，例如 "),n("code",[s._v("FCP")]),s._v("、"),n("code",[s._v("FP")]),s._v("、"),n("code",[s._v("LCP")]),s._v("、"),n("code",[s._v("FID")]),s._v("等重要的性能指标信息")])])]),s._v(" "),n("li",[n("p",[s._v("同一个 "),n("code",[s._v("url")]),s._v(" 下会收集每一次上报的页面加载 "),n("code",[s._v("Transaction")])])]),s._v(" "),n("li",[n("p",[s._v("在 "),n("code",[s._v("Sentry管理界面 -> Performance菜单")]),s._v(" 页中，可以查看每个 "),n("code",[s._v("url")]),s._v(" 下收集的综合性能指标信息")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1028),alt:"performance1"}})]),s._v(" "),n("ul",[n("li",[n("code",[s._v("TPM")]),s._v(": 平均每分钟事务数")]),s._v(" "),n("li",[n("code",[s._v("FCP")]),s._v(": (First Contentful Paint) 首次内容绘制，标记浏览器渲染来自 DOM 第一位内容的时间点，该内容可能是文本、图像、SVG 甚至 元素.")]),s._v(" "),n("li",[n("code",[s._v("LCP")]),s._v(": (Largest Contentful Paint) 最大内容渲染，代表在viewport中最大的页面元素加载的时间. LCP的数据会通过PerformanceEntry对象记录, 每次出现更大的内容渲染, 则会产生一个新的PerformanceEntry对象")]),s._v(" "),n("li",[n("code",[s._v("FID")]),s._v(": (First Input Delay) 首次输入延迟，指标衡量的是从用户首次与您的网站进行交互（即当他们单击链接，点击按钮等）到浏览器实际能够访问之间的时间")]),s._v(" "),n("li",[n("code",[s._v("CLS")]),s._v(": (Cumulative Layout Shift) 累积布局偏移，总结起来就是一个元素初始时和其hidden之间的任何时间如果元素偏移了, 则会被计算进去, 具体的计算方法可看这篇文章 https://web.dev/cls/")]),s._v(" "),n("li",[n("code",[s._v("FP")]),s._v(": First Paint (FP) 首次绘制，测量第一个像素出现在视口中所花费的时间，呈现与先前显示内容相比的任何视觉变化。这可以是来自文档对象模型 (DOM) 的任何形式，例如 background color 、canvas 或 image。FP 可帮助开发人员了解渲染页面是否发生了任何意外。")]),s._v(" "),n("li",[n("code",[s._v("TTFB")]),s._v(": Time To First Byte (TTFB) 首字节时间，测量用户浏览器接收页面内容的第一个字节所需的时间。TTFB 帮助开发人员了解他们的缓慢是由初始响应(initial response)引起的还是由于渲染阻塞内容(render-blocking content)引起的")]),s._v(" "),n("li",[n("code",[s._v("USERS")]),s._v(": UV数")]),s._v(" "),n("li",[n("code",[s._v("USER MISERY")]),s._v(": 对响应时间难以容忍度的用户数，"),n("code",[s._v("User Misery")]),s._v(" 是一个用户加权的性能指标，用于评估应用程序性能的相对大小。虽然可以使用 "),n("code",[s._v("Apdex")]),s._v(" 检查各种响应时间阈值级别的比率，但 User Misery 会根据满意响应时间阈值 (ms) 的四倍计算感到失望的唯一用户数。User Misery 突出显示对用户影响最大的事务。可以使用自定义阈值为每个项目设置令人满意的阈值。阈值设置在"),n("code",[s._v("Settings -> sentry -> cra-test -> Performance")])])])])]),s._v(" "),n("h4",{attrs:{id:"面板细说"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#面板细说"}},[s._v("#")]),s._v(" 面板细说")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1029),alt:"Performance面板卡片1"}})]),s._v(" "),n("p",[s._v("在 "),n("code",[s._v("Performance")]),s._v(" 面板中，可以根据一些条件查询某一批 "),n("code",[s._v("Transaction")]),s._v("的：")]),s._v(" "),n("h5",{attrs:{id:"fcp、lcp、fid、cls等信息"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fcp、lcp、fid、cls等信息"}},[s._v("#")]),s._v(" "),n("code",[s._v("FCP")]),s._v("、"),n("code",[s._v("LCP")]),s._v("、"),n("code",[s._v("FID")]),s._v("、"),n("code",[s._v("CLS")]),s._v("等信息")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("图片中筛选出了27个 "),n("code",[s._v("transaction")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1030),alt:"performance-card2"}})])]),s._v(" "),n("li",[n("p",[n("code",[s._v("FCP")]),s._v("、"),n("code",[s._v("LCP")]),s._v("、"),n("code",[s._v("FID")]),s._v("、"),n("code",[s._v("CLS")]),s._v("卡片中展示了27个 "),n("code",[s._v("transaction")]),s._v(" 的平均值")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1031),alt:"performance-card2"}})])]),s._v(" "),n("li",[n("p",[s._v("每个卡片上还有绿色、黄色、红色的百分比，分别表示好、一般和差，通过该性能指标的阈值作区分")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1032),alt:"performance-card2"}})]),s._v(" "),n("ul",[n("li",[n("p",[n("code",[s._v("sentry")]),s._v(" 性能指标阈值定义")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("Web Vital")]),s._v(" "),n("th",[s._v("Good(绿色)")]),s._v(" "),n("th",[s._v("Meh(黄色)")]),s._v(" "),n("th",[s._v("Poor(红色)")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("最大内容绘制 (LCP)")]),s._v(" "),n("td",[s._v("<= 2.5s")]),s._v(" "),n("td",[s._v("<= 4s")]),s._v(" "),n("td",[s._v("> 4s")])]),s._v(" "),n("tr",[n("td",[s._v("首次输入延迟 (FID)")]),s._v(" "),n("td",[s._v("<= 100ms")]),s._v(" "),n("td",[s._v("<= 300ms")]),s._v(" "),n("td",[s._v("> 300ms")])]),s._v(" "),n("tr",[n("td",[s._v("累积布局偏移 (CLS)")]),s._v(" "),n("td",[s._v("<= 0.11s")]),s._v(" "),n("td",[s._v("<= 0.25")]),s._v(" "),n("td",[s._v("> 0.25")])]),s._v(" "),n("tr",[n("td",[s._v("首次绘制 (FP)")]),s._v(" "),n("td",[s._v("<= 1s")]),s._v(" "),n("td",[s._v("<= 3s")]),s._v(" "),n("td",[s._v("> 3s")])]),s._v(" "),n("tr",[n("td",[s._v("最大内容绘制 (LCP)")]),s._v(" "),n("td",[s._v("<= 0.1s")]),s._v(" "),n("td",[s._v("<= 3s")]),s._v(" "),n("td",[s._v("> 3s")])]),s._v(" "),n("tr",[n("td",[s._v("首字节时间 (TTFB)")]),s._v(" "),n("td",[s._v("<= 100ms")]),s._v(" "),n("td",[s._v("<= 200ms")]),s._v(" "),n("td",[s._v("> 600ms")])])])])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://docs.sentry.io/product/performance/web-vitals/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),n("OutboundLink")],1)])])])])]),s._v(" "),n("h5",{attrs:{id:"lcp-p75、lcp-distribution、tpm"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#lcp-p75、lcp-distribution、tpm"}},[s._v("#")]),s._v(" "),n("code",[s._v("LCP p75、")]),s._v("LCP Distribution、"),n("code",[s._v("TPM")])]),s._v(" "),n("ul",[n("li",[n("p",[n("code",[s._v("LCP p75面积图")]),s._v(": "),n("code",[s._v("p50")]),s._v("、"),n("code",[s._v("p75")]),s._v("、"),n("code",[s._v("p95")]),s._v("都对应一个时间长度的值(例如 "),n("code",[s._v("277.20ms")]),s._v(")，表示在某一段时间内(例如"),n("code",[s._v("2021-10-19 2:35 PM")]),s._v(" 到 "),n("code",[s._v("2021-10-19 2:40 PM")]),s._v(")，采集的所有"),n("code",[s._v("transaction")]),s._v("中(例如采集到了11个 "),n("code",[s._v("transaction")]),s._v(")，超过"),n("code",[s._v("25%")]),s._v("的 "),n("code",[s._v("transaction")]),s._v(" 样本的"),n("code",[s._v("LCP")]),s._v("值超过了"),n("code",[s._v("277.20ms")]),s._v("。"),n("a",{attrs:{href:"https://docs.sentry.io/product/performance/metrics/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("img",{attrs:{src:a(1033),alt:"Performance面板卡片1"}})])]),s._v(" "),n("li",[n("p",[n("code",[s._v("LCP Distribution数量柱状图")]),s._v(": 横坐标是LCP时间(单位s)，纵坐标是数量(单位个)。一个柱子，表示某个LCP时间的 "),n("code",[s._v("transaction")]),s._v(" 数量")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1034),alt:"LCP-distribution"}})])]),s._v(" "),n("li",[n("p",[n("code",[s._v("TPM面积图")]),s._v(": 平均每分钟的 "),n("code",[s._v("transaction")]),s._v(" 数量。例如，在 "),n("code",[s._v("4:00 PM")]),s._v(" 到 "),n("code",[s._v("8:00 PM")]),s._v("时间段内，平均每分钟的 "),n("code",[s._v("transaction")]),s._v(" 数量是0.213个")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1035),alt:"tpm"}})])])]),s._v(" "),n("h5",{attrs:{id:"某个url路径下的性能信息表格"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#某个url路径下的性能信息表格"}},[s._v("#")]),s._v(" 某个url路径下的性能信息表格")]),s._v(" "),n("p",[s._v("我们应该已经可以读懂表格中的信息的含义了，接下来点开某个url维度下的详情页，还需要介绍两个指标 "),n("code",[s._v("Apdex")]),s._v(" 和 "),n("code",[s._v("Failure Rate")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1036),alt:"apdex"}})]),s._v(" "),n("h6",{attrs:{id:"apdex"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#apdex"}},[s._v("#")]),s._v(" Apdex")]),s._v(" "),n("p",[n("code",[s._v("Apdex")]),s._v(" 是一种行业标准指标，用于根据应用程序响应时间("),n("code",[s._v("response time")]),s._v(")跟踪和衡量用户满意度("),n("code",[s._v("satisfaction")]),s._v(")"),n("code",[s._v("。Apdex")]),s._v(" 分数提供特定 "),n("code",[s._v("transaction")]),s._v(" 或端点中满意("),n("code",[s._v("satisfactory")]),s._v(")、可容忍("),n("code",[s._v("tolerable")]),s._v(")和失败("),n("code",[s._v("frustrated")]),s._v(")请求的比率。该指标提供了一个标准来比较 "),n("code",[s._v("transaction")]),s._v(" 性能，了解哪些可能需要额外优化或排查，并为性能设定目标。"),n("a",{attrs:{href:"https://docs.sentry.io/product/performance/metrics/#apdex",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),n("OutboundLink")],1)]),s._v(" "),n("ul",[n("li",[s._v("以下是 Apdex 的组成部分及其公式：\n"),n("ul",[n("li",[n("code",[s._v("T")]),s._v("：目标响应时间的阈值。")]),s._v(" "),n("li",[n("code",[s._v("Satisfactory(满意度)")]),s._v("：当页面加载时间小于或等于 T 时，用户对使用该应用感到满意。")]),s._v(" "),n("li",[n("code",[s._v("Tolerable(可容忍度)")]),s._v("：当页面加载时间在 T 到 4T 之间时，用户认为该应用程序可以容忍使用。")]),s._v(" "),n("li",[n("code",[s._v("Frustrated(失败)")]),s._v("：当用户的页面加载时间大于 4T 时，他们对应用程序感到失望。")]),s._v(" "),n("li",[n("code",[s._v("Apdex")]),s._v("：(满意请求数 +（可容忍请求数/2））/（总请求数）")])])]),s._v(" "),n("li",[s._v("在 "),n("code",[s._v("sentry管理界面 -> Performance")]),s._v(" 页面中可以为每个项目设置自定义阈值")])]),s._v(" "),n("h6",{attrs:{id:"failure-rate-失败率"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#failure-rate-失败率"}},[s._v("#")]),s._v(" Failure Rate 失败率")]),s._v(" "),n("p",[n("code",[s._v("failure_rate()")]),s._v(" 表示不成功 "),n("code",[s._v("transaction")]),s._v(" 的百分比。"),n("code",[s._v("Sentry")]),s._v(" 将状态为 "),n("code",[s._v("“ok”")]),s._v("、"),n("code",[s._v("“canceled”")]),s._v(" 和 "),n("code",[s._v("“unknown”")]),s._v(" 以外的 "),n("code",[s._v("transaction")]),s._v(" 视为失败。更多状态可以参考 "),n("a",{attrs:{href:"https://develop.sentry.dev/sdk/event-payloads/span/",target:"_blank",rel:"noopener noreferrer"}},[s._v("文档"),n("OutboundLink")],1),s._v("。")]),s._v(" "),n("blockquote",[n("h5",{attrs:{id:"如何现在就产生good-绿色-、meh-黄色-、poor-红色-的数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#如何现在就产生good-绿色-、meh-黄色-、poor-红色-的数据"}},[s._v("#")]),s._v(" 如何现在就产生Good(绿色)、Meh(黄色)、Poor(红色)的数据")])]),s._v(" "),n("p",[s._v("很简单，在"),n("code",[s._v("Chrome dev tools")]),s._v("的"),n("code",[s._v("Network")]),s._v("中，将模拟网速调整为"),n("code",[s._v("fast 3G")]),s._v("、"),n("code",[s._v("slow 3G")]),s._v("，然后刷新几次页面即可。")]),s._v(" "),n("h3",{attrs:{id:"导航操作检测"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#导航操作检测"}},[s._v("#")]),s._v(" 导航操作检测")]),s._v(" "),n("p",[s._v("在前面"),n("strong",[s._v("页面加载与性能指标")]),s._v("的介绍中，我们了解到性能信息都是有 "),n("code",[s._v("SDK")]),s._v(" 的 "),n("code",[s._v("BrowserTracing")]),s._v(" 功能采集的，"),n("strong",[s._v("而 "),n("code",[s._v("BrowserTracing")]),s._v(" 除了采集页面加载性能指标外，还可以采集路由导航时的相关信息")]),s._v("，这在单页面应用中非常有用")]),s._v(" "),n("h4",{attrs:{id:"react-router设置检测"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#react-router设置检测"}},[s._v("#")]),s._v(" react-router设置检测")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("首先我们在前端项目中加上前端路由")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装React路由")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -S react-router-dom@5\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// App.js")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" BrowserRouter "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" Router"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Switch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Link "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'react-router-dom'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("App")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("fn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Router"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("nav"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ul"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("li"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n              "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Link to"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Home"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Link"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("li"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("li"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n              "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Link to"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/about"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("About"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Link"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("li"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ul"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nav"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Switch"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Router path"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/about"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            about\n          "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Router"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Router path"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("button onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("fn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Break the world"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("button"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Router"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Switch"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Router"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" App"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("接下来我们打开页面 "),n("code",[s._v("localhost:9000")]),s._v("，点击"),n("code",[s._v("About")]),s._v("，跳转到"),n("code",[s._v("/about")]),s._v("页，可以看到此时 "),n("code",[s._v("SDK")]),s._v(" 多上报了一条 "),n("code",[s._v("transaction")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1037),alt:"router"}})])]),s._v(" "),n("li",[n("p",[s._v("过一会儿，在 "),n("code",[s._v("Sentry管理界面")]),s._v(" -> "),n("code",[s._v("Discover菜单 -> All Events")]),s._v("中，我们可以看到刚才上报的 "),n("code",[s._v("transaction")]),s._v(": "),n("code",[s._v("/about")]),s._v("，点击打开详情")])]),s._v(" "),n("li",[n("p",[s._v("在 "),n("code",[s._v("Breadcrumbs")]),s._v(" 中，我们可以看到这是一个 "),n("code",[s._v("TYPE")]),s._v(" 为 "),n("code",[s._v("navigation")]),s._v("，"),n("code",[s._v("CATEGORY")]),s._v(" 为 "),n("code",[s._v("navigation")]),s._v(" 的 "),n("code",[s._v("transaction")]),s._v("，并告诉了我们 "),n("code",[s._v("from")]),s._v("，从 "),n("code",[s._v("/")]),s._v(" 路由，"),n("code",[s._v("to")]),s._v("，跳转到了 "),n("code",[s._v("/about")]),s._v(" 路由。")])]),s._v(" "),n("li",[n("p",[s._v("在跳转之前，经历了 "),n("code",[s._v("pageload")]),s._v("，和 "),n("code",[s._v("ui.click")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1038),alt:"router-detail"}})])])]),s._v(" "),n("h4",{attrs:{id:"history配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#history配置"}},[s._v("#")]),s._v(" history配置")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("安装history")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -S history@4\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("配置 "),n("code",[s._v("React router")]),s._v(" 集成")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// index.js")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" React "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'react'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" ReactDOM "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'react-dom'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" Router"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Route"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Switch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Link"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" matchPath "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'react-router-dom'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" createBrowserHistory "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'history'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" Sentry "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@sentry/react'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" Integrations "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@sentry/tracing'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" history "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("createBrowserHistory")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" routes "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" path"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/about'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" path"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/user/:id'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" path"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nSentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("init")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  dsn"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://xxxxxxxxxxxxxxxx@127.0.0.1:9000/3"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  environment"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  integrations"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integrations"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("BrowserTracing")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    routingInstrumentation"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("reactRouterV5Instrumentation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("history"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" routes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" matchPath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  tracesSampleRate"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  release"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0.0.1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("App")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("fn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Router history"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("history"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("nav"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ul"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("li"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n              "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Link to"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Home"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Link"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("li"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("li"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n              "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Link to"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/about"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("About"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Link"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("li"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("li"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n              "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Link to"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/user/1"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("User1"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Link"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("li"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("li"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n              "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Link to"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/user/2"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("User2"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Link"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("li"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ul"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nav"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Switch"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Route path"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/about"')]),s._v(" children"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("about"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Route path"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/user/:id"')]),s._v(" children"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("user"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Route exact path"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/"')]),s._v(" children"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("button onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("fn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Break the world"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("button"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Switch"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Router"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nReactDOM"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("StrictMode"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("App "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("StrictMode"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("目前为止，对于 "),n("code",[s._v("/user/:id")]),s._v(" 的路由，不同的 "),n("code",[s._v("id")]),s._v("，上报的 "),n("code",[s._v("transaction")]),s._v(" 名称是不同的，例如 "),n("code",[s._v("/user/1")]),s._v("、"),n("code",[s._v("/user/2")]),s._v("。")])]),s._v(" "),n("li",[n("p",[s._v("我们可以分别在 "),n("code",[s._v("/user/1")]),s._v("、"),n("code",[s._v("/user/2")]),s._v(" 路由下刷新页面，然后在Sentry管理界面的Performance菜单里查看效果，会看到两条不同的 "),n("code",[s._v("TRANSACTION")]),s._v(": "),n("code",[s._v("/user/1")]),s._v("、"),n("code",[s._v("/user/2")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1039),alt:"react-router-1"}})])]),s._v(" "),n("li",[n("p",[s._v("实际上我们希望他们是一条，预期应该显示: "),n("code",[s._v("/user/:id")]),s._v("，在 "),n("code",[s._v("React")]),s._v(" 项目中，我们可以通过 "),n("code",[s._v("Sentry.reactRouterV5Instrumentation")]),s._v("配置。")])]),s._v(" "),n("li",[n("p",[s._v("然后我们再在"),n("code",[s._v("/user/1")]),s._v("、"),n("code",[s._v("/user/2")]),s._v("路由下刷新页面，查看上报的"),n("code",[s._v("transaction")]),s._v("，已经变成了一种: "),n("code",[s._v("/user/:id")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1040),alt:"react-router-2"}})])]),s._v(" "),n("li",[n("p",[s._v("还有一种方式可以也达到这个目的：使用 "),n("code",[s._v("Sentry.withSentryRouting")]),s._v(" 高阶组件包裹 "),n("code",[s._v("Route")]),s._v("，具体可以参考 "),n("a",{attrs:{href:"https://docs.sentry.io/platforms/javascript/guides/react/configuration/integrations/react-router/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),n("OutboundLink")],1)])])]),s._v(" "),n("h3",{attrs:{id:"alert-报警"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#alert-报警"}},[s._v("#")]),s._v(" "),n("code",[s._v("Alert")]),s._v(" 报警")]),s._v(" "),n("p",[s._v("在前面的探索中，我们看到了如何在Sentry管理界面中查看性能、错误等信息。但如果我们手动在页面查看发生了哪些错误，会非常耗时耗力，因此可以配置报警功能"),n("code",[s._v("Alert")])]),s._v(" "),n("h4",{attrs:{id:"配置邮箱"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置邮箱"}},[s._v("#")]),s._v(" 配置邮箱")]),s._v(" "),n("p",[s._v("首先我们配置一个可以通过 "),n("code",[s._v("Sentry")]),s._v(" 服务发送邮件的邮箱配置")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("大部分的 "),n("code",[s._v("Sentry配置")]),s._v(" 可以通过 "),n("code",[s._v("Sentry管理界面")]),s._v(" 配置，但是有些默认配置，比如"),n("code",[s._v("代表Sentry服务的邮箱")]),s._v("，我们不希望通过 "),n("code",[s._v("Sentry管理界面")]),s._v(" 修改，但可以通过下面文件修改")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" onpremise\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" ./sentry/config.yml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("选择一个邮箱账号作为 "),n("code",[s._v("Sentry服务邮箱账号")]),s._v("，比如我选择的是我的阿里企业邮箱，找到他们的")]),s._v(" "),n("ul",[n("li",[s._v("发件服务地址：例如阿里云企业邮箱是 "),n("code",[s._v("smtp.mxhichina.com")])]),s._v(" "),n("li",[s._v("该邮箱账号")]),s._v(" "),n("li",[s._v("该邮箱密码")])])]),s._v(" "),n("li",[n("p",[s._v("将这些信息填写到 "),n("code",[s._v("onpremise/sentry/config.yml")]),s._v(" 文件中")]),s._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mail.backend: 'smtp'  # Use dummy if you want to disable email entirely")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mail.host")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'smtp.mxhichina.com'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mail.port: 465")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mail.username")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxx@xxx.com'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mail.password")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxxxxx'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mail.use-tls: false")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mail.use-ssl: true")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# NOTE: The following 2 configs (mail.from and mail.list-namespace) are set")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#       through SENTRY_MAIL_HOST in sentry.conf.py so remove those first if")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#       you want your values in this file to be effective!")]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The email address to send on behalf of")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mail.from")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxx@xxx.com'")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("停止 "),n("code",[s._v("Sentry")]),s._v(" 服务")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("docker-compose down\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("启动 "),n("code",[s._v("Sentry")]),s._v(" 服务")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("docker-compose up -d\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("测试 "),n("code",[s._v("Sentry")]),s._v(" 服务能否发送邮件")]),s._v(" "),n("ul",[n("li",[s._v("点击"),n("code",[s._v("Sentry管理界面左上角头像图标")]),s._v("，在下拉框中选择 "),n("code",[s._v("Admin")]),s._v("，在接下来的菜单中选择 "),n("code",[s._v("Mail")])]),s._v(" "),n("li",[s._v("可以看到刚才配置的邮箱信息")]),s._v(" "),n("li",[s._v("在页面最底部点击 "),n("code",[s._v("Send a test email to xxx@xxx.xxx")])]),s._v(" "),n("li",[s._v("在"),n("code",[s._v("xxx@xxx.xxx")]),s._v("邮箱中查看是否收到 "),n("code",[s._v("Sentry")]),s._v(" 发送的邮件")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1041),alt:"mail-settings"}})])])]),s._v(" "),n("h4",{attrs:{id:"设置报警规则"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设置报警规则"}},[s._v("#")]),s._v(" 设置报警规则")]),s._v(" "),n("p",[s._v("我们可以设置一些报警规则，"),n("strong",[s._v("比如性能、错误，和对应的阈值。当触发报警规则后，会发送一封邮件到指定的邮箱，然后可以点击查看报警详情")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("在 "),n("code",[s._v("Sentry管理界面 -> Alerts")]),s._v(" 页，可以查看、新增、编辑、删除报警规则")])]),s._v(" "),n("li",[n("p",[s._v("点击 "),n("code",[s._v("Create Alert Rule")]),s._v(" 按钮")])]),s._v(" "),n("li",[n("p",[s._v("在新建报警规则页，选择一个监控的内容，分为"),n("code",[s._v("Errors")]),s._v("、"),n("code",[s._v("Performance")]),s._v("、"),n("code",[s._v("Other")])])]),s._v(" "),n("li",[n("p",[s._v("以 "),n("code",[s._v("Performance")]),s._v(" 的 "),n("code",[s._v("LCP")]),s._v(" 为例，选择之，并点击 "),n("code",[s._v("Set Conditions")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1042),alt:"create-rule"}})])]),s._v(" "),n("li",[n("p",[s._v("在 "),n("code",[s._v("Filter events")]),s._v(" 条件设置中，可以对 "),n("code",[s._v("evironment")]),s._v(" 筛选，选择 "),n("code",[s._v("All")])])]),s._v(" "),n("li",[n("p",[s._v("在 "),n("code",[s._v("2. Select function and time interval")]),s._v(" ，可以设置报警程序定时任务的间隔时间，以及在间隔时间内监控的内容，选择 "),n("code",[s._v("P50 over 1 minute")]),s._v("，表示每1分钟总结一次，如果超过 "),n("code",[s._v("50%")]),s._v(" 的 "),n("code",[s._v("transaction")]),s._v(" 超过了阈值，则报警")])]),s._v(" "),n("li",[n("p",[s._v("接下来设置"),n("code",[s._v("阈值")]),s._v("，在 "),n("code",[s._v("3. Set thresholds to trigger alert")]),s._v(" 中，分别设置 "),n("code",[s._v("Critical(危急)")]),s._v("、"),n("code",[s._v("Warning(警告)")]),s._v("、"),n("code",[s._v("Resolved(满足)")]),s._v("的阈值，为了容易看到效果，我们分别设置 "),n("code",[s._v("500")]),s._v("、"),n("code",[s._v("400")]),s._v("、"),n("code",[s._v("300")]),s._v("，单位毫秒")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1043),alt:"add-rule-1"}})])]),s._v(" "),n("li",[n("p",[s._v("在 "),n("code",[s._v("4. Perform actions")]),s._v(" 中设置报警后发送的邮件接收人")])]),s._v(" "),n("li",[n("p",[s._v("在 "),n("code",[s._v("5. Add a rule name and team")]),s._v(" 设置本条报警规则的名称（例如，“Sentry监控到：超过50%的样本的LCP超过了 500ms ！”）和可以编辑这条报警规则的人，名称会体现在邮件内容中")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1044),alt:"add-rule-1"}})])])]),s._v(" "),n("h4",{attrs:{id:"制造一些很慢的访问"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#制造一些很慢的访问"}},[s._v("#")]),s._v(" 制造一些很慢的访问")]),s._v(" "),n("p",[s._v("打开浏览器cra-test页面，在 "),n("code",[s._v("devtools -> network -> 节流模式")]),s._v(" 中选择 "),n("code",[s._v("slow 3G")]),s._v("，多刷新几次页面，这些页面加载速度很慢，便会触发报警，很快我们会收到邮件，点击可以查看详情")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1045),alt:"报警邮件"}})]),s._v(" "),n("h3",{attrs:{id:"手动上报错误"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#手动上报错误"}},[s._v("#")]),s._v(" 手动上报错误")]),s._v(" "),n("ul",[n("li",[n("p",[n("code",[s._v("Sentry")]),s._v(" 的 "),n("code",[s._v("SDK")]),s._v(" 会自动上报错误、未捕获的异常和 "),n("code",[s._v("unhandled rejections")]),s._v(" 以及其他类型的错误。")])]),s._v(" "),n("li",[n("p",[s._v("对于未捕获的异常，我们可以手动上报。 "),n("a",{attrs:{href:"https://docs.sentry.io/platforms/javascript/guides/react/usage/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),n("OutboundLink")],1)]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" Sentry "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@sentry/react"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("aFunctionThatMightFail")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("captureException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("我们同样可以在 "),n("code",[s._v("Sentry管理界面 -> Issues")]),s._v(" 中查看手动上报的异常")])]),s._v(" "),n("li",[n("p",[s._v("另外我们还可以手动上报一些纯文本信息")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("captureMessage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Something went wrong"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])])]),s._v(" "),n("h4",{attrs:{id:"设置上报等级"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设置上报等级"}},[s._v("#")]),s._v(" 设置上报等级")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("我们可以对上报的信息定义等级，主要包括:")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" declare "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("enum")]),s._v(" Severity "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  Fatal "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fatal"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  Error "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"error"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  Warning "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"warning"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  Log "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"log"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  Info "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"info"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  Debug "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"debug"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  Critical "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"critical"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("手动上报错误定义 "),n("code",[s._v("level")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("aFunctionThatMightFail")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("captureException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    level"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Severity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Warning"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("手动上报纯文本定义 "),n("code",[s._v("level")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("captureMessage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"this is a debug message"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Severity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Warning"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("定义一个范围，在范围内容统一定义 "),n("code",[s._v("level")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("configureScope")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("scope")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  scope"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setLevel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Severity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Warning"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("aFunctionThatMightFail")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("bFunctionThatMightFail")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])])]),s._v(" "),n("h4",{attrs:{id:"sentry错误边界组件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sentry错误边界组件"}},[s._v("#")]),s._v(" "),n("code",[s._v("Sentry")]),s._v("错误边界组件")]),s._v(" "),n("p",[n("code",[s._v("Sentry")]),s._v("提供了错误边界组件，当 "),n("code",[s._v("react")]),s._v(" 组件发生错误，可以上报相关信息")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("使用 "),n("code",[s._v("Sentry.ErrorBoundary")]),s._v(" 组件")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// index.js")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("App")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" error "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Error")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'error'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("button onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setError")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" error"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("button"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("WithSentryErrorBoundaryApp")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ErrorBoundary fallback"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("error boundary error"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" showDialog"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("App "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ErrorBoundary"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nReactDOM"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("WithSentryApp "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("ul",[n("li",[n("p",[s._v("点击按钮，页面会展示 "),n("code",[s._v("fallback")]),s._v(" 内容，并且弹出反馈弹窗，向 "),n("code",[s._v("Sentry")]),s._v(" 提交反馈，反馈内容可以在 "),n("code",[s._v("Sentry管理界面")]),s._v(" 的 "),n("code",[s._v("User Feedback")]),s._v(" 中查看")])]),s._v(" "),n("li",[n("p",[s._v("而在 "),n("code",[s._v("Sentry管理界面")]),s._v(" 的 "),n("code",[s._v("Issues")]),s._v(" 中，我们"),n("strong",[s._v("可以看到上报了名称为 "),n("code",[s._v("Error")]),s._v(" 错误，他的描述是以 "),n("code",[s._v("React ErrorBoundary Error")]),s._v(" 开头的")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1046),alt:"react-errorBoundary-error"}})])])])]),s._v(" "),n("li",[n("p",[s._v("也可以使用Sentry提供的高阶组件 "),n("code",[s._v("withErrorBoundary")]),s._v(" 实现同样效果")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" WithSentryApp "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("withErrorBoundary")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("App"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" fallback"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("p"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("an error has occurred"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("p"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" showDialog"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("更多信息参考: "),n("a",{attrs:{href:"https://docs.sentry.io/platforms/javascript/guides/react/components/errorboundary/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),n("OutboundLink")],1)])])]),s._v(" "),n("h3",{attrs:{id:"集成-redux"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#集成-redux"}},[s._v("#")]),s._v(" 集成 "),n("code",[s._v("redux")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("安装 "),n("code",[s._v("redux")])]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i redux -S\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("集成 "),n("code",[s._v("redux")])]),s._v(" "),n("p",[s._v("通过 "),n("code",[s._v("sentryReduxEnhancer")]),s._v(" 中的 "),n("code",[s._v("actionTransformer")]),s._v(" 和 "),n("code",[s._v("stateTransformer")]),s._v(" 过滤不需要在sentry管理界面中展示的 "),n("code",[s._v("action")]),s._v(" 和 "),n("code",[s._v("state")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// index.js")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" React "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'react'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" ReactDOM "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'react-dom'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" Sentry "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@sentry/react'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" Integrations "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@sentry/tracing'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" createStore "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'redux'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nSentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("init")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  dsn"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://xxx@10.10.8.46:9000/3"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  environment"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  integrations"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integrations"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("BrowserTracing")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  tracesSampleRate"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  release"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0.0.1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" initialState "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  a"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'init'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  b"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'init'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  c"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'init'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("rootReducer")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("state "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" initialState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" action")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("action"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("type "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SET_A'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      a"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a_changed'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("action"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("type "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SET_B'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      b"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'b_changed'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("action"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("type "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SET_C'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      c"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'c_changed'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" sentryReduxEnhancer "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Sentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("createReduxEnhancer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("actionTransformer")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("action")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("action"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("type "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SET_B'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" action"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("stateTransformer")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("state")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      c"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" store "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("createStore")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  rootReducer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  sentryReduxEnhancer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("App")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("fn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// axios.get('/dddd').catch(() => {});")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("button onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dispatch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" type"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SET_A'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("dispatch "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SET_A")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("button"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("button onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dispatch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" type"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SET_B'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("dispatch "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SET_B")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("button"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("button onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dispatch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" type"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SET_C'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("dispatch "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SET_C")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("button"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("button onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("fn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Break the world"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("button"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nReactDOM"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("App "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("访问 "),n("code",[s._v("localhost:9000")]),s._v("，"),n("strong",[s._v("有4个按钮 "),n("code",[s._v("dispatch SET_A")]),s._v("、"),n("code",[s._v("dispatch SET_B")]),s._v("、"),n("code",[s._v("dispatch SET_C")]),s._v("、"),n("code",[s._v("Break the world")]),s._v("，依次点击，则报错")])])]),s._v(" "),n("li",[n("p",[s._v("在 "),n("code",[s._v("Sentry管理界面 -> issues")]),s._v("菜单中找到刚才错误上报详情")])]),s._v(" "),n("li",[n("p",[s._v("在 "),n("code",[s._v("BREADCRUMBS")]),s._v(" 中，可以看到有三条 "),n("code",[s._v("redux")]),s._v(" 相关的 "),n("code",[s._v("CATEGORY")]),s._v("，分别表示 "),n("code",[s._v("redux init")]),s._v("、"),n("code",[s._v("dispatch SET_A")]),s._v("、"),n("code",[s._v("dispatch SET_C")]),s._v("。"),n("code",[s._v("dispatch SET_B")]),s._v("没有，是因为在 "),n("code",[s._v("actionTransformer")]),s._v(" 中将其过滤掉了")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1047),alt:"redux"}})])]),s._v(" "),n("li",[n("p",[s._v("页面往下翻，可以看到 "),n("code",[s._v("REDIX.STATE")]),s._v(" 中记录了报错前最后的 "),n("code",[s._v("state")]),s._v("，有 "),n("code",[s._v("a")]),s._v("、"),n("code",[s._v("b")]),s._v(" 值，但没有 "),n("code",[s._v("c")]),s._v(" 的值，是因为在 "),n("code",[s._v("stateTransformer")]),s._v(" 中过滤了 "),n("code",[s._v("c")]),s._v(" 的值")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1048),alt:"redux-state"}})])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://docs.sentry.io/platforms/javascript/guides/react/configuration/integrations/redux/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),n("OutboundLink")],1)])])]),s._v(" "),n("h3",{attrs:{id:"rrweb-重播"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rrweb-重播"}},[s._v("#")]),s._v(" "),n("code",[s._v("rrweb")]),s._v(" 重播")]),s._v(" "),n("p",[n("code",[s._v("rrweb")]),s._v(" 是一个开源的 "),n("code",[s._v("Web")]),s._v(" 会话回放库，它提供易于使用的 "),n("code",[s._v("API")]),s._v(" 来记录用户的交互并远程回放。")]),s._v(" "),n("p",[s._v("可以记录鼠标移动轨迹、交互动作和页面变化，并播放。")]),s._v(" "),n("p",[n("code",[s._v("@sentry/rrweb")]),s._v(" 是 "),n("code",[s._v("rrweb")]),s._v(" 的 "),n("code",[s._v("sentry")]),s._v(" 插件。")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("安装")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -S @sentry/rrweb rrweb\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("使用")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" SentryRRWeb "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@sentry/rrweb'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nSentry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("init")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  integrations"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SentryRRWeb")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      checkoutEveryNms"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 每10秒重新制作快照")]),s._v("\n      checkoutEveryNth"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 每 200 个 event 重新制作快照")]),s._v("\n      maskAllInputs"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将所有输入内容记录为 *")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("在页面中点击各个按钮，直到报错，在 "),n("code",[s._v("Sentry管理界面 -> Isseues")]),s._v(" 中找到相关错误详情，在页面最底部有一个 "),n("code",[s._v("REPLAY")]),s._v(" 模块，点击播放可以回放错误发生前的一系列操作")])]),s._v(" "),n("li",[n("p",[s._v("查看效果")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1049),alt:"rrweb"}})])])]),s._v(" "),n("h2",{attrs:{id:"相关链接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#相关链接"}},[s._v("#")]),s._v(" 相关链接")]),s._v(" "),n("p",[s._v("https://github.com/getsentry/onpremise")])])}),[],!1,null,null,null);t.default=e.exports}}]);