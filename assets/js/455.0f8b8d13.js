(window.webpackJsonp=window.webpackJsonp||[]).push([[455],{2164:function(s,a,t){"use strict";t.r(a);var e=t(14),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"导入-导出-mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#导入-导出-mysql"}},[s._v("#")]),s._v(" 导入/导出 MySQL")]),s._v(" "),t("h3",{attrs:{id:"导出数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#导出数据库"}},[s._v("#")]),s._v(" 导出数据库")]),s._v(" "),t("h4",{attrs:{id:"导出完整数据-表结构-数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#导出完整数据-表结构-数据"}},[s._v("#")]),s._v(" 导出完整数据：表结构+数据")]),s._v(" "),t("p",[s._v("Linux 下可以使用 "),t("strong",[s._v("mysqldump")]),s._v(" 命令来导出数据库，语法格式如下：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("mysqldump -u用户名 -p 数据库名 > 数据库名.sql\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("以下命令可以导出 "),t("strong",[s._v("abc")]),s._v(" 数据库的数据和表结构：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# /usr/local/mysql/bin/mysqldump -uroot -p abc > abc.sql\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("按下回车键后会提示输入密码，输入即可。")]),s._v(" "),t("p",[s._v("**注意：**mysqldump 命令路径是根据你 MySQL 安装路径决定的。")]),s._v(" "),t("h4",{attrs:{id:"只导出表结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#只导出表结构"}},[s._v("#")]),s._v(" 只导出表结构")]),s._v(" "),t("p",[s._v("如果你只需要导出 MySQL 的数据表结构，可以使用 "),t("strong",[s._v("-d")]),s._v(" 选项，格式如下：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("mysqldump -u用户名 -p -d 数据库名 > 数据库名.sql\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("以下命令可以导出 "),t("strong",[s._v("abc")]),s._v(" 数据库的表结构：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("#/usr/local/mysql/bin/mysqldump -uroot -p -d abc > abc.sql\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("hr"),s._v(" "),t("h4",{attrs:{id:"mysqldump选项说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysqldump选项说明"}},[s._v("#")]),s._v(" mysqldump选项说明")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("参数名")]),s._v(" "),t("th",[s._v("缩写")]),s._v(" "),t("th",[s._v("含义")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("--host")]),s._v(" "),t("td",[s._v("-h")]),s._v(" "),t("td",[s._v("服务器IP地址")])]),s._v(" "),t("tr",[t("td",[s._v("--port")]),s._v(" "),t("td",[s._v("-P")]),s._v(" "),t("td",[s._v("服务器端口号")])]),s._v(" "),t("tr",[t("td",[s._v("--user")]),s._v(" "),t("td",[s._v("-u")]),s._v(" "),t("td",[s._v("MySQL 用户名")])]),s._v(" "),t("tr",[t("td",[s._v("--pasword")]),s._v(" "),t("td",[s._v("-p")]),s._v(" "),t("td",[s._v("MySQL 密码")])]),s._v(" "),t("tr",[t("td",[s._v("--databases")]),s._v(" "),t("td"),s._v(" "),t("td",[s._v("指定要备份的数据库")])]),s._v(" "),t("tr",[t("td",[s._v("--all-databases")]),s._v(" "),t("td"),s._v(" "),t("td",[s._v("备份mysql服务器上的所有数据库")])]),s._v(" "),t("tr",[t("td",[s._v("--compact")]),s._v(" "),t("td"),s._v(" "),t("td",[s._v("压缩模式，产生更少的输出")])]),s._v(" "),t("tr",[t("td",[s._v("--comments")]),s._v(" "),t("td"),s._v(" "),t("td",[s._v("添加注释信息")])]),s._v(" "),t("tr",[t("td",[s._v("--complete-insert")]),s._v(" "),t("td"),s._v(" "),t("td",[s._v("输出完成的插入语句")])]),s._v(" "),t("tr",[t("td",[s._v("--lock-tables")]),s._v(" "),t("td"),s._v(" "),t("td",[s._v("备份前，锁定所有数据库表")])]),s._v(" "),t("tr",[t("td",[s._v("--no-create-db/--no-create-info")]),s._v(" "),t("td"),s._v(" "),t("td",[s._v("禁止生成创建数据库语句")])]),s._v(" "),t("tr",[t("td",[s._v("--force")]),s._v(" "),t("td"),s._v(" "),t("td",[s._v("当出现错误时仍然继续备份操作")])]),s._v(" "),t("tr",[t("td",[s._v("--default-character-set")]),s._v(" "),t("td"),s._v(" "),t("td",[s._v("指定默认字符集")])]),s._v(" "),t("tr",[t("td",[s._v("--add-locks")]),s._v(" "),t("td"),s._v(" "),t("td",[s._v("备份数据库表时锁定数据库表")])])])]),s._v(" "),t("h3",{attrs:{id:"导入数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#导入数据库"}},[s._v("#")]),s._v(" 导入数据库")]),s._v(" "),t("h4",{attrs:{id:"使用-mysql-命令导入"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-mysql-命令导入"}},[s._v("#")]),s._v(" 使用 mysql 命令导入")]),s._v(" "),t("p",[s._v("使用 mysql 命令导入数据库格式如下：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("mysql -u用户名 -p 数据库名 < 数据库名.sql\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("以下实例将备份的数据库 abc.sql 导入到数据库中：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# mysql -uroot -p123456 < abc.sql\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("涉及到密码相关的，要")]),s._v(" "),t("h4",{attrs:{id:"使用-source-命令导入"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-source-命令导入"}},[s._v("#")]),s._v(" 使用 source 命令导入")]),s._v(" "),t("p",[s._v("使用 source 命令需要我们先登录到 mysql 中，并创建一个空的数据库：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("mysql> create database abc;      # 创建数据库\nmysql> use abc;                  # 使用已创建的数据库 \nmysql> set names utf8;           # 设置编码\nmysql> source /home/abc/abc.sql  # 导入备份数据库\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("注意你备份的 sql 文件路径。")]),s._v(" "),t("h4",{attrs:{id:"e参数导入【特殊】"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#e参数导入【特殊】"}},[s._v("#")]),s._v(" -e参数导入【特殊】")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#方式二")]),s._v("\nmysql -uroot -pPxxx mysql "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" /srv/app/portal/dataportal.sql\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#方式一")]),s._v("\nmysql -uroot -pxxxx -e "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\nsource /srv/app/dataportal/dataportal.sql;\nquit\n"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h4",{attrs:{id:"使用-load-data-导入数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-load-data-导入数据"}},[s._v("#")]),s._v(" 使用 LOAD DATA 导入数据")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("mysql> LOAD DATA LOCAL INFILE 'dump.txt' INTO TABLE mytbl\n  -> FIELDS TERMINATED BY ':'\n  -> LINES TERMINATED BY '\\r\\n';\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h4",{attrs:{id:"使用-mysqlimport-导入数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-mysqlimport-导入数据"}},[s._v("#")]),s._v(" 使用 mysqlimport 导入数据")]),s._v(" "),t("p",[s._v("mysqlimport 客户端提供了 LOAD DATA INFILEQL 语句的一个命令行接口。mysqlimport 的大多数选项直接对应 LOAD DATA INFILE 子句。")]),s._v(" "),t("p",[s._v("从文件 dump.txt 中将数据导入到 mytbl 数据表中, 可以使用以下命令：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ mysqlimport -u root -p --local mytbl dump.txt\npassword *****\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"总括"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总括"}},[s._v("#")]),s._v(" 总括")]),s._v(" "),t("p",[t("strong",[s._v("备份实例")])]),s._v(" "),t("p",[s._v("备份所有数据库：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("mysqldump -uroot -p --all-databases "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /backup/mysqldump/all.db\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("备份指定数据库：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("mysqldump -uroot -p "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /backup/mysqldump/test.db\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("备份指定数据库指定表(多个表以空格间隔)")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("mysqldump -uroot -p  mysql db event "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /backup/mysqldump/2table.db\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("备份指定数据库排除某些表")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("mysqldump -uroot -p "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" --ignore-table"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test.t1 --ignore-table"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test.t2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /backup/mysqldump/test2.db\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"还原命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#还原命令"}},[s._v("#")]),s._v(" 还原命令")]),s._v(" "),t("p",[t("strong",[s._v("系统行命令")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("mysqladmin -uroot -p create db_name \nmysql -uroot -p  db_name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" /backup/mysqldump/db_name.db\n\n注：在导入备份数据库前，db_name如果没有，是需要创建的； 而且与db_name.db中数据库名是一样的才可以导入。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("strong",[s._v("soure 方法")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("mysql "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" use db_name\nmysql "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /backup/mysqldump/db_name.db\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"参考链接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[s._v("#")]),s._v(" 参考链接")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.runoob.com/mysql/mysql-database-export.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("MySQL 导出数据"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://www.runoob.com/mysql/mysql-database-import.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("MySQL 导入数据"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=r.exports}}]);