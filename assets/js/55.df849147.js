(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{1166:function(a,t,s){a.exports=s.p+"assets/img/image-20220113203727583.f76cdc31.png"},1167:function(a,t,s){a.exports=s.p+"assets/img/image-20220113203812278.c00bf5a8.png"},1168:function(a,t,s){a.exports=s.p+"assets/img/image-20220113203842401.44f91e6c.png"},1169:function(a,t,s){a.exports=s.p+"assets/img/image-20220113203930701.1cc2d13f.png"},1170:function(a,t,s){a.exports=s.p+"assets/img/image-20220113203950818.81391fa4.png"},1171:function(a,t,s){a.exports=s.p+"assets/img/image-20220113204006121.24b22bbd.png"},1172:function(a,t,s){a.exports=s.p+"assets/img/image-20220113204019712.80ff8640.png"},2051:function(a,t,s){"use strict";s.r(t);var e=s(14),i=Object(e.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h2",{attrs:{id:"patch和diff的区别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#patch和diff的区别"}},[a._v("#")]),a._v(" patch和diff的区别")]),a._v(" "),e("p",[a._v("Git 提供了两种补丁方案，一是用git diff生成的UNIX标准补丁.diff文件，二是git format-patch生成的Git专用.patch 文件。")]),a._v(" "),e("ul",[e("li",[a._v(".diff文件只是记录文件改变的内容，不带有commit记录信息,"),e("strong",[a._v("多个commit可以合并成一个diff文件")]),a._v("。")]),a._v(" "),e("li",[a._v(".patch文件带有记录文件改变的内容，也带有commit记录信息,每个commit对应一个patch文件。")])]),a._v(" "),e("p",[a._v("在Git下，我们可以使用.diff文件也可以使用.patch 文件来打补丁，主要应用场景有：CodeReview、代码迁移等。")]),a._v(" "),e("h2",{attrs:{id:"创建patch和diff"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建patch和diff"}},[a._v("#")]),a._v(" 创建patch和diff")]),a._v(" "),e("h3",{attrs:{id:"创建patch-文件的常用命令行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建patch-文件的常用命令行"}},[a._v("#")]),a._v(" 创建patch 文件的常用命令行")]),a._v(" "),e("p",[e("strong",[a._v("某次提交（含）之前的几次提交：")])]),a._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" format-patch 【commit sha1 id】-n\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("n指从sha1 id对应的commit开始算起n个提交。\neg："),e("code",[a._v("git format-patch 2a2fb4539925bfa4a141fe492d9828d030f7c8a8 -2")])]),a._v(" "),e("p",[e("strong",[a._v("某个提交的patch：")])]),a._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" format-patch 【commit sha1 id】 -1\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("eg："),e("code",[a._v("git format-patch 2a2fb4539925bfa4a141fe492d9828d030f7c8a8 -1")])]),a._v(" "),e("p",[e("strong",[a._v("某两次提交之间的所有patch:")])]),a._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" format-patch 【commit sha1 id】"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("【commit sha1 id】 \n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("eg："),e("code",[a._v("git format-patch 2a2fb4539925bfa4a141fe492d9828d030f7c8a8..89aebfcc73bdac8054be1a242598610d8ed5f3c8")])]),a._v(" "),e("h3",{attrs:{id:"创建diff文件的常用方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建diff文件的常用方法"}},[a._v("#")]),a._v(" 创建diff文件的常用方法")]),a._v(" "),e("h4",{attrs:{id:"使用命令行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用命令行"}},[a._v("#")]),a._v(" 使用命令行")]),a._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("diff")]),a._v("  【commit sha1 id】 【commit sha1 id】 "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("  【diff文件名】\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("eg："),e("code",[a._v("git diff 2a2fb4539925bfa4a141fe492d9828d030f7c8a8 89aebfcc73bdac8054be1a242598610d8ed5f3c8 > patch.diff")])]),a._v(" "),e("h4",{attrs:{id:"使用sourcetree【推荐】"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用sourcetree【推荐】"}},[a._v("#")]),a._v(" 使用SourceTree【推荐】")]),a._v(" "),e("p",[a._v("选中要目标commit ,右击，选择create patch")]),a._v(" "),e("p",[e("img",{attrs:{src:s(1166),alt:"image-20220113203727583"}})]),a._v(" "),e("h4",{attrs:{id:"如何获取commit-sha1-id"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何获取commit-sha1-id"}},[a._v("#")]),a._v(" 如何获取commit sha1 id")]),a._v(" "),e("p",[a._v("git 中的每个commit都有对应的一个sha1 id，我们可以通过在终端输入"),e("code",[a._v("git log")]),a._v("，然后找到对应的commit  sha1 id:")]),a._v(" "),e("p",[e("img",{attrs:{src:s(1167),alt:"image-20220113203812278"}}),a._v("\n如图中"),e("code",[a._v("2a2fb4539925bfa4a141fe492d9828d030f7c8a8")]),a._v("便是sha1 id")]),a._v(" "),e("p",[a._v("如果用Sourcetree的话也很方便，右击对应的commit，选择copy SHA-1 toclipboard便复制sha1 id到剪切板中：")]),a._v(" "),e("p",[e("img",{attrs:{src:s(1168),alt:"image-20220113203842401"}})]),a._v(" "),e("h2",{attrs:{id:"应用patch和diff"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#应用patch和diff"}},[a._v("#")]),a._v(" 应用patch和diff")]),a._v(" "),e("h3",{attrs:{id:"相关命令行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#相关命令行"}},[a._v("#")]),a._v(" 相关命令行")]),a._v(" "),e("p",[e("strong",[a._v("检查patch/diff是否能正常打入")])]),a._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" apply --check 【path/to/xxx.patch】\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" apply --check 【path/to/xxx.diff】\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("p",[e("strong",[a._v("打入patch/diff")])]),a._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" apply 【path/to/xxx.patch】\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" apply 【path/to/xxx.diff】\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("p",[a._v("或者")]),a._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v("  am 【path/to/xxx.patch】\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h3",{attrs:{id:"使用sourcetree【推荐】-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用sourcetree【推荐】-2"}},[a._v("#")]),a._v(" 使用SourceTree【推荐】")]),a._v(" "),e("p",[a._v("选择SourceTree，在屏幕顶部选择Aciotn-Apply patch")]),a._v(" "),e("p",[e("img",{attrs:{src:s(1169),alt:"image-20220113203930701"}})]),a._v(" "),e("p",[a._v("选择patch或者diff的路径，然后点OK")]),a._v(" "),e("p",[e("img",{attrs:{src:s(1170),alt:"image-20220113203950818"}})]),a._v(" "),e("h3",{attrs:{id:"冲突解决【要点】"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#冲突解决【要点】"}},[a._v("#")]),a._v(" 冲突解决【要点】")]),a._v(" "),e("p",[a._v("在打补丁过程中有时候会出现冲突的情况，有冲突时会打入失败，如图：")]),a._v(" "),e("p",[e("img",{attrs:{src:s(1171),alt:"image-20220113204006121"}})]),a._v(" "),e("p",[e("strong",[a._v("此时需要解决冲突：")])]),a._v(" "),e("p",[a._v("1、首先使用 以下命令行，自动合入 patch 中不冲突的代码改动，同时保留冲突的部分：")]),a._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v("  apply --reject  xxxx.patch\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("可以在终端中显示出冲突的大致代码：")]),a._v(" "),e("p",[e("img",{attrs:{src:s(1172),alt:"image-20220113204019712"}})]),a._v(" "),e("p",[a._v("同时会生成后缀为 .rej 的文件，保存没有合并进去的部分的内容，可以参考这个进行冲突解决。")]),a._v(" "),e("p",[a._v("2、解决完冲突后删除后缀为 .rej  的文件，并执行"),e("code",[a._v("git add.")]),a._v("添加改动到暂存区;")]),a._v(" "),e("p",[a._v("3、接着执行"),e("code",[a._v("git am --resolved")]),a._v("或者"),e("code",[a._v("git am --continue")])]),a._v(" "),e("p",[a._v("说明：在打入patch冲突时，可以执行"),e("code",[a._v("git am --skip")]),a._v("跳过此次冲突，也可以执行"),e("code",[a._v("git am --abort")]),a._v("回退打入patch的动作，还原到操作前的状态。")]),a._v(" "),e("p",[a._v("关于冲突解决详情可以参考"),e("a",{attrs:{href:"https://blog.csdn.net/Qidi_Huang/article/details/61920472",target:"_blank",rel:"noopener noreferrer"}},[a._v("git am冲突解决"),e("OutboundLink")],1)]),a._v(" "),e("h2",{attrs:{id:"参考链接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[a._v("#")]),a._v(" 参考链接")]),a._v(" "),e("p",[a._v("https://www.jianshu.com/p/ec04de3f95cc")])])}),[],!1,null,null,null);t.default=i.exports}}]);