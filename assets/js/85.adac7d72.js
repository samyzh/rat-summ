(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{1886:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"简介"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),n("p",[t._v("大家所熟悉的 Vue API "),n("code",[t._v("Vue.nextTick")]),t._v(" 全局方法和 "),n("code",[t._v("vm.$nextTick")]),t._v(" 实例方法的内部都是调用 "),n("code",[t._v("nextTick")]),t._v(" 函数，该函数的作用可以理解为异步执行传入的函数。")]),t._v(" "),n("p",[n("strong",[t._v("nextTick中的回调是在下次 DOM 更新循环结束之后执行的延迟回调")]),t._v("。在修改数据之后立即使用这个方法，获取更新后的 DOM。"),n("strong",[t._v("原理就是异步方法(promise,mutationObserver,setImmediate,setTimeout)经常与事件环一起来问(宏任务和微任务)")])]),t._v(" "),n("blockquote",[n("p",[n("strong",[t._v("vue多次更新数据，最终会进行批处理更新。内部调用的就是nextTick实现了延迟更新")]),t._v("，用户自定义的nextTick中的回调会被延迟到更新完成后调用，从而可以获取更新后的DOM。")])]),t._v(" "),n("h2",{attrs:{id:"原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[t._v("#")]),t._v(" 原理")]),t._v(" "),n("p",[n("strong",[n("code",[t._v("nextTick")]),t._v("方法主要使用了宏任务和微任务，定义了一个异步方法。多次调用"),n("code",[t._v("nextTick")]),t._v("会将方法存入队列中，通过这个异步方法清空当前队列")]),t._v("。所以这个"),n("code",[t._v("nextTick")]),t._v("方法就是异步方法；")]),t._v(" "),n("p",[n("img",{attrs:{src:a(684),alt:"image-20210205221822523"}})]),t._v(" "),n("blockquote",[n("p",[n("strong",[t._v("Vue.nextTick 内部逻辑")]),t._v("; 源码位置:"),n("strong",[n("code",[t._v("src/core/global-api/index.js:45")])])])]),t._v(" "),n("p",[t._v("在执行 "),n("code",[t._v("initGlobalAPI(Vue)")]),t._v(" 初始化 Vue 全局 API 中，这么定义 "),n("code",[t._v("Vue.nextTick")]),t._v("。")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("initGlobalAPI")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("Vue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n    Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nextTick "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" nextTick"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("p",[t._v("可以看出是直接把 "),n("code",[t._v("nextTick")]),t._v(" 函数赋值给 "),n("code",[t._v("Vue.nextTick")]),t._v("，就可以了，非常简单。")]),t._v(" "),n("blockquote",[n("p",[n("strong",[t._v("vm.$nextTick 内部逻辑")]),t._v("; 源码位置:"),n("strong",[n("code",[t._v("src/core/observer/watcher.js:179")])])])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("$nextTick")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("fn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("p",[t._v("源码位置:"),n("strong",[n("code",[t._v("src/core/util/env.js:78")])])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" nextTick "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*存放异步执行的回调*/")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" callbacks "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*一个标记位，如果已经有timerFunc被推送到任务队列中去则不需要重复推送*/")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" pending "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*一个函数指针，指向函数将被推送到任务队列中，等到主线程任务执行完时，任务队列中的timerFunc被调用*/")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" timerFunc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*下一个tick时的回调*/")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTickHandler")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*一个标记位，标记等待状态（即函数已经被推入任务队列或者主线程，已经在等待当前栈执行完毕去执行），这样就不需要在push多个回调到callbacks时将timerFunc多次推入任务队列或者主线程*/")]),t._v("\n    pending "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*执行所有callback*/")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" copies "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" callbacks"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    callbacks"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" copies"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      copies"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// the nextTick behavior leverages the microtask queue, which can be accessed")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// via either native Promise.then or MutationObserver.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// MutationObserver has wider support, however it is seriously bugged in")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// UIWebView in iOS >= 9.3.3 when triggered in touch event handlers. It")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// completely stops working after triggering a few times... so, if native")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Promise is available, we will use it:")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* istanbul ignore if */")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n    这里解释一下，一共有Promise、MutationObserver以及setTimeout三种尝试得到timerFunc的方法。\n    优先使用Promise，在Promise不存在的情况下使用MutationObserver，这两个方法的回调函数都会在microtask中执行，它们会比setTimeout更早执行，所以优先使用。\n    如果上述两种方法都不支持的环境则会使用setTimeout，在task尾部推入这个函数，等待调用执行。\n  */")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" Promise "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"undefined"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isNative")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Promise"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*使用Promise*/")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" p "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Promise"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("logError")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("timerFunc")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      p"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextTickHandler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("logError"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// in problematic UIWebViews, Promise.then doesn't completely break, but")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// it can get stuck in a weird state where callbacks are pushed into the")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// microtask queue but the queue isn't being flushed, until the browser")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// needs to do some other work, e.g. handle a timer. Therefore we can")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "force" the microtask queue to be flushed by adding an empty timer.')]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isIOS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("noop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" MutationObserver "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"undefined"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isNative")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MutationObserver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// PhantomJS and iOS 7.x")]),t._v("\n      MutationObserver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[object MutationObserverConstructor]"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// use MutationObserver where native Promise is not available,")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// e.g. PhantomJS IE11, iOS7, Android 4.4")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*新建一个textNode的DOM对象，用MutationObserver绑定该DOM并指定回调函数，在DOM变化的时候则会触发回调,该回调会进入主线程（比任务队列优先执行），即textNode.data = String(counter)时便会加入该回调*/")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" counter "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" observer "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MutationObserver")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextTickHandler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" textNode "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createTextNode")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("counter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    observer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("textNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      characterData"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("timerFunc")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      counter "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("counter "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      textNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("counter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// fallback to setTimeout")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*使用setTimeout将回调推入任务队列尾部*/")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("timerFunc")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextTickHandler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br"),n("span",{staticClass:"line-number"},[t._v("44")]),n("br"),n("span",{staticClass:"line-number"},[t._v("45")]),n("br"),n("span",{staticClass:"line-number"},[t._v("46")]),n("br"),n("span",{staticClass:"line-number"},[t._v("47")]),n("br"),n("span",{staticClass:"line-number"},[t._v("48")]),n("br"),n("span",{staticClass:"line-number"},[t._v("49")]),n("br"),n("span",{staticClass:"line-number"},[t._v("50")]),n("br"),n("span",{staticClass:"line-number"},[t._v("51")]),n("br"),n("span",{staticClass:"line-number"},[t._v("52")]),n("br"),n("span",{staticClass:"line-number"},[t._v("53")]),n("br"),n("span",{staticClass:"line-number"},[t._v("54")]),n("br"),n("span",{staticClass:"line-number"},[t._v("55")]),n("br"),n("span",{staticClass:"line-number"},[t._v("56")]),n("br"),n("span",{staticClass:"line-number"},[t._v("57")]),n("br"),n("span",{staticClass:"line-number"},[t._v("58")]),n("br"),n("span",{staticClass:"line-number"},[t._v("59")]),n("br"),n("span",{staticClass:"line-number"},[t._v("60")]),n("br"),n("span",{staticClass:"line-number"},[t._v("61")]),n("br"),n("span",{staticClass:"line-number"},[t._v("62")]),n("br"),n("span",{staticClass:"line-number"},[t._v("63")]),n("br"),n("span",{staticClass:"line-number"},[t._v("64")]),n("br"),n("span",{staticClass:"line-number"},[t._v("65")]),n("br"),n("span",{staticClass:"line-number"},[t._v("66")]),n("br"),n("span",{staticClass:"line-number"},[t._v("67")]),n("br"),n("span",{staticClass:"line-number"},[t._v("68")]),n("br"),n("span",{staticClass:"line-number"},[t._v("69")]),n("br"),n("span",{staticClass:"line-number"},[t._v("70")]),n("br"),n("span",{staticClass:"line-number"},[t._v("71")]),n("br"),n("span",{staticClass:"line-number"},[t._v("72")]),n("br"),n("span",{staticClass:"line-number"},[t._v("73")]),n("br"),n("span",{staticClass:"line-number"},[t._v("74")]),n("br")])]),n("h2",{attrs:{id:"分析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#分析"}},[t._v("#")]),t._v(" 分析")]),t._v(" "),n("h3",{attrs:{id:"promise-创建异步执行函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#promise-创建异步执行函数"}},[t._v("#")]),t._v(" Promise 创建异步执行函数")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" Promise "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'undefined'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isNative")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Promise"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" p "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Promise"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("timerFunc")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        p"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("flushCallbacks"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isIOS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("noop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    isUsingMicroTask "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br")])]),n("p",[t._v("执行 "),n("code",[t._v("if (typeof Promise !== 'undefined' && isNative(Promise))")]),t._v(" 判断浏览器是否支持 Promise，")]),t._v(" "),n("p",[t._v("其中 "),n("code",[t._v("typeof Promise")]),t._v(" 支持的话为 function ，不是 undefined，故该条件满足，这个条件好理解。")]),t._v(" "),n("p",[t._v("来看另一个条件，其中 "),n("code",[t._v("isNative")]),t._v(" 方法是如何定义，代码如下。")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isNative")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("Ctor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" Ctor "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'function'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("native code")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Ctor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("p",[t._v("当 "),n("code",[t._v("Ctor")]),t._v(" 是函数类型时，执行 "),n("code",[t._v("/native code/.test(Ctor.toString())")]),t._v("，检测函数 toString 之后的字符串中是否带有 native code 片段，那为什么要这么监测。这是因为这里的 toString 是 Function 的一个实例方法，如果是浏览器内置函数调用实例方法 toString 返回的结果是"),n("code",[t._v("function Promise() { [native code] }")]),t._v("。")]),t._v(" "),n("p",[t._v("若浏览器支持，执行 "),n("code",[t._v("var p = Promise.resolve()")]),t._v("，"),n("code",[t._v("Promise.resolve()")]),t._v(" 方法允许调用时不带参数，直接返回一个resolved状态的 Promise 对象。")]),t._v(" "),n("p",[t._v("那么在 "),n("code",[t._v("timerFunc")]),t._v(" 函数中执行 "),n("code",[t._v("p.then(flushCallbacks)")]),t._v(" 会直接执行 "),n("code",[t._v("flushCallbacks")]),t._v(" 函数，在其中会遍历去执行每个 "),n("code",[t._v("nextTick")]),t._v(" 传入的函数，因 Promise 是个微任务 （micro task）类型，故这些函数就变成异步执行了。")]),t._v(" "),n("p",[t._v("执行 "),n("code",[t._v("if (isIOS) { setTimeout(noop)}")]),t._v(" 来在 IOS 浏览器下添加空的计时器强制刷新微任务队列。")]),t._v(" "),n("h3",{attrs:{id:"mutationobserver-创建异步执行函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mutationobserver-创建异步执行函数"}},[t._v("#")]),t._v(" MutationObserver 创建异步执行函数")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("isIE "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" MutationObserver "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'undefined'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isNative")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MutationObserver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("\n    MutationObserver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[object MutationObserverConstructor]'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" counter "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" observer "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MutationObserver")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("flushCallbacks"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" textNode "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createTextNode")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("counter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    observer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("textNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        characterData"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("timerFunc")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        counter "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("counter "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        textNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("counter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    isUsingMicroTask "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br")])]),n("p",[t._v("MutationObserver() 创建并返回一个新的 MutationObserver 它会在指定的 DOM 发生变化时被调用，IE11浏览器才兼容，故干脆执行 "),n("code",[t._v("!isIE")]),t._v(" 排除 IE浏览器。执行 "),n("code",[t._v("typeof MutationObserver !== 'undefined' && (isNative(MutationObserver)")]),t._v(" 判断，其原理在上面已介绍过了。执行 "),n("code",[t._v("MutationObserver.toString() === '[object MutationObserverConstructor]')")]),t._v(" 这是对 PhantomJS 浏览器 和 iOS 7.x版本浏览器的支持情况进行判断。")]),t._v(" "),n("p",[t._v("执行 "),n("code",[t._v("var observer = new MutationObserver(flushCallbacks)")]),t._v("，创建一个新的 MutationObserver 赋值给常量 "),n("code",[t._v("observer")]),t._v(", 并且把 "),n("code",[t._v("flushCallbacks")]),t._v(" 作为回到函数传入，当 "),n("code",[t._v("observer")]),t._v(" 指定的 DOM 要监听的属性发生变化时会调用 "),n("code",[t._v("flushCallbacks")]),t._v(" 函数。")]),t._v(" "),n("p",[t._v("执行 "),n("code",[t._v("var textNode = document.createTextNode(String(counter))")]),t._v(" 创建一个文本节点。")]),t._v(" "),n("p",[t._v("执行 "),n("code",[t._v("var counter = 1")]),t._v("，"),n("code",[t._v("counter")]),t._v(" 做文本节点的内容。")]),t._v(" "),n("p",[t._v("执行 "),n("code",[t._v("observer.observe(textNode, { characterData: true })")]),t._v("，调用 MutationObserver 的实例方法 "),n("code",[t._v("observe")]),t._v(" 去监听 "),n("code",[t._v("textNode")]),t._v(" 文本节点的内容。")]),t._v(" "),n("p",[t._v("这里很巧妙利用 "),n("code",[t._v("counter = (counter + 1) % 2")]),t._v(" ，让 "),n("code",[t._v("counter")]),t._v(" 在 1 和 0 之间变化。再执行 "),n("code",[t._v("textNode.data = String(counter)")]),t._v(" 把变化的 "),n("code",[t._v("counter")]),t._v(" 设置为文本节点的内容。"),n("strong",[t._v("这样 "),n("code",[t._v("observer")]),t._v(" 会监测到它所观察的文本节点的内容发生变化，就会调用 "),n("code",[t._v("flushCallbacks")]),t._v(" 函数，在其中会遍历去执行每个 "),n("code",[t._v("nextTick")]),t._v(" 传入的函数")]),t._v("，因 MutationObserver 是个微任务 （micro task）类型，故这些函数就变成异步执行了。")]),t._v(" "),n("h3",{attrs:{id:"setimmediate-创建异步执行函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#setimmediate-创建异步执行函数"}},[t._v("#")]),t._v(" setImmediate 创建异步执行函数")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" setImmediate "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'undefined'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isNative")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("setImmediate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("timerFunc")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setImmediate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("flushCallbacks"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("p",[n("code",[t._v("setImmediate")]),t._v(" 只兼容 IE10 以上浏览器，其他浏览器均不兼容。其是个宏任务 (macro task)，消耗的资源比较小")]),t._v(" "),n("h3",{attrs:{id:"settimeout-创建异步执行函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#settimeout-创建异步执行函数"}},[t._v("#")]),t._v(" setTimeout 创建异步执行函数")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("timerFunc")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("flushCallbacks"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("p",[t._v("兼容 IE10 以下的浏览器，创建异步任务，"),n("strong",[t._v("其是个宏任务 (macro task)，消耗资源较大")]),t._v("。")]),t._v(" "),n("h3",{attrs:{id:"创建异步执行函数的顺序"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建异步执行函数的顺序"}},[t._v("#")]),t._v(" 创建异步执行函数的顺序")]),t._v(" "),n("p",[t._v("Vue 历来版本中在 "),n("code",[t._v("nextTick")]),t._v(" 函数中实现 "),n("code",[t._v("timerFunc")]),t._v(" 的顺序时做了几次调整，直到 2.6+ 版本才稳定下来")]),t._v(" "),n("p",[t._v("第一版的 "),n("code",[t._v("nextTick")]),t._v(" 函数中实现 "),n("code",[t._v("timerFunc")]),t._v(" 的顺序为 "),n("code",[t._v("Promise")]),t._v("，"),n("code",[t._v("MutationObserver")]),t._v("，"),n("code",[t._v("setTimeout")]),t._v("。")]),t._v(" "),n("p",[t._v("在2.5.0版本中实现 "),n("code",[t._v("timerFunc")]),t._v(" 的顺序改为 "),n("code",[t._v("setImmediate")]),t._v("，"),n("code",[t._v("MessageChannel")]),t._v("，"),n("code",[t._v("setTimeout")]),t._v("。 在这个版本把创建微任务的方法都移除，原因是微任务优先级太高了，其中一个 issues 编号为 #6566, 情况如下:")]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("header"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("expand"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" // block 1\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("i")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("expand = false;"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Expand is True"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("i")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" // element 1\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("expand"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("!expand"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("expand = true;"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" // block 2\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("i")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Expand is False"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("i")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" // element 2\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])]),n("p",[t._v("按正常逻辑 点击 element 1 时，会把 "),n("code",[t._v("expand")]),t._v(" 置为 "),n("code",[t._v("false")]),t._v("，block 1 不会显示，而 block 2 会显示，在点击 block 2 ，会把 "),n("code",[t._v("expand")]),t._v(" 置为 "),n("code",[t._v("false")]),t._v("，那么 block 1 会显示。")]),t._v(" "),n("p",[t._v("当时实际情况是 点击 element 1 ，只会显示 block 1。这是为什么，什么原因引起这个BUG。Vue 官方是这么解释的")]),t._v(" "),n("blockquote",[n("p",[t._v("点击事件是宏任务，"),n("code",[t._v("<i>")]),t._v("上的点击事件触发 nextTick（微任务）上的第一次更新。在事件冒泡到外部div之前处理微任务。在更新过程中，将向外部div添加一个click侦听器。因为DOM结构相同，所以外部div和内部元素都被重用。事件最终到达外部div，触发由第一次更新添加的侦听器，进而触发第二次更新。为了解决这个问题，您可以简单地给两个外部div不同的键，以强制在更新期间替换它们。这将阻止接收冒泡事件。")])]),t._v(" "),n("p",[t._v("当然当时官方还是给出了解决方案，把 "),n("code",[t._v("timerFunc")]),t._v(" 都改为用创建宏任务的方法实现，其顺序是 "),n("code",[t._v("setImmediate")]),t._v("，"),n("code",[t._v("MessageChannel")]),t._v("，"),n("code",[t._v("setTimeout")]),t._v("，这样 nextTick 是个宏任务。")]),t._v(" "),n("p",[t._v("点击事件是个宏任务，当点击事件执行完后触发的 nextTick（宏任务）上的更新，只会在下一个事件循环中进行，这样其事件冒泡早已执行完毕。就不会出现 BUG 中的情况。")]),t._v(" "),n("p",[t._v("但是过不久，实现 "),n("code",[t._v("timerFunc")]),t._v(" 的顺序又改为 "),n("code",[t._v("Promise")]),t._v("，"),n("code",[t._v("MutationObserver")]),t._v("，"),n("code",[t._v("setImmediate")]),t._v("，"),n("code",[t._v("setTimeout")]),t._v("，在任何地方都使用宏任务会产生一些很奇妙的问题，其中代表 issue 编号为 #6813，代码就打出来，可以看"),n("a",{attrs:{href:"https://codepen.io/ericcirone/pen/pWOrMB",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),n("OutboundLink")],1),t._v("。 这里有两个关键的控制")]),t._v(" "),n("ul",[n("li",[t._v("媒体查询，当页面宽度大于 1000px 时，li 显示类型为行内框，小于1000px时，显示类型为块级元素。")]),t._v(" "),n("li",[t._v("监听页面缩放，当页面宽度小于 1000px 时，ul 用 "),n("code",[t._v('v-show="showList"')]),t._v(" 控制隐藏。")])]),t._v(" "),n("p",[t._v("初始状态：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(685),alt:"img"}})]),t._v(" "),n("p",[t._v("当快速拖动网页边框缩小页面宽度时，会先显示下面第一张图，然后快速的隐藏，而不是直接隐藏。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(686),alt:"img"}})]),t._v(" "),n("p",[n("img",{attrs:{src:a(687),alt:"img"}})]),t._v(" "),n("p",[t._v("那为出现这种BUG，首先要了解一个概念，UI Render （UI渲染）的执行时机，如下所示：")]),t._v(" "),n("ol",[n("li",[t._v("macro 取一个宏任务。")]),t._v(" "),n("li",[t._v("micro 清空微任务队列。")]),t._v(" "),n("li",[t._v("判断当前帧是否值得更新，否则重新进入1步骤")]),t._v(" "),n("li",[t._v("一帧欲绘制前，执行requestAnimationFrame队列任务。")]),t._v(" "),n("li",[t._v("UI更新，执行 UI Render。")]),t._v(" "),n("li",[t._v("如果宏任务队列不为空，重新进入步骤")])]),t._v(" "),n("p",[t._v("这个过程也比较好理解，之前执行监听窗口缩放是个宏任务，当窗口大小小于 1000px 时，"),n("code",[t._v("showList")]),t._v(" 会变为 "),n("code",[t._v("flase")]),t._v(" ，会触发一个 nextTick 执行，而其是个宏任务。在两个宏任务之间，会进行 UI Render ,这时，li 的行内框设置失效，展示为块级框，在之后的 nextTick 这个宏任务执行了，再一次 UI Render 时，ul 的 display 的值切换为 none，列表隐藏。")]),t._v(" "),n("p",[t._v("所以 Vue 觉得用微任务创建的 nextTick 可控性还可以，不像用宏任务创建的 nextTick 会出现不可控场景。")]),t._v(" "),n("p",[t._v("在 2.6 + 版本中采用一个时间戳来解决 #6566 这个BUG，设置一个变量 "),n("code",[t._v("attachedTimestamp")]),t._v("，在执行传入 "),n("code",[t._v("nextTick")]),t._v(" 函数中的 "),n("code",[t._v("flushSchedulerQueue")]),t._v(" 函数时，执行 "),n("code",[t._v("currentFlushTimestamp = getNow()")]),t._v(" 获取一个时间戳赋值给变量 "),n("code",[t._v("currentFlushTimestamp")]),t._v("，然后再监听 DOM 上事件前做个劫持。其在 "),n("code",[t._v("add")]),t._v(" 函数中实现。")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" capture"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" passive")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("useMicrotaskFix"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" attachedTimestamp "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentFlushTimestamp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" original "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" handler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        handler "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" original"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("_wrapper")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currentTarget "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("\n                e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timeStamp "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" attachedTimestamp "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("\n                e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timeStamp "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("\n                e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ownerDocument "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" document\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("original")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arguments"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    target"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        handler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        supportsPassive "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            capture"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" capture"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            passive"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" passive\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" capture\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br")])]),n("p",[t._v("执行 "),n("code",[t._v("if (useMicrotaskFix)")]),t._v("，"),n("code",[t._v("useMicrotaskFix")]),t._v(" 在用微任务创建异步执行函数时置为 "),n("code",[t._v("true")]),t._v("。")]),t._v(" "),n("p",[t._v("执行 "),n("code",[t._v("var attachedTimestamp = currentFlushTimestamp")]),t._v(" 把 nextTick 回调函数执行时的时间戳赋值给变量 "),n("code",[t._v("attachedTimestamp")]),t._v("，然后执行 "),n("code",[t._v("if(e.timeStamp >= attachedTimestamp)")]),t._v("，其中 "),n("code",[t._v("e.timeStamp")]),t._v(" DOM 上的事件被触发时的时间戳大于 "),n("code",[t._v("attachedTimestamp")]),t._v("，这个事件才会被执行。")]),t._v(" "),n("p",[t._v("为什么呢，回到 #6566 BUG 中。由于micro task的执行优先级非常高,在 #6566 BUG 中比事件冒泡还要快,就会导致此 BUG 出现。当点击 "),n("code",[t._v("i")]),t._v("标签时触发冒泡事件比 nextTick 的执行还早，那么 "),n("code",[t._v("e.timeStamp")]),t._v(" 比 "),n("code",[t._v("attachedTimestamp")]),t._v(" 小，如果让冒泡事件执行，就会导致 #6566 BUG，所以只有冒泡事件的触发比 nextTick 的执行晚才会避免此 BUG，故 "),n("code",[t._v("e.timeStamp")]),t._v(" 比 "),n("code",[t._v("attachedTimestamp")]),t._v(" 大才能执行冒泡事件。")]),t._v(" "),n("h2",{attrs:{id:"自定义"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义"}},[t._v("#")]),t._v(" 自定义")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" cbs "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" pending "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("flushCallbacks")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    cbs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("fn")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("fn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    cbs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("pending"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        pending "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("flushCallbacks")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rerender'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("render"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("render"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("render"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sync...'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br")])])])}),[],!1,null,null,null);s.default=e.exports},684:function(t,s,a){t.exports=a.p+"assets/img/image-20210205221822523.1424a0b4.png"},685:function(t,s){t.exports="data:image/png;base64,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"},686:function(t,s){t.exports="data:image/png;base64,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76rph2pKoy9IM1qWyqfuKrInR3olv6ne1MQ0QQ8Ae6yd1fLtIWt59dr0+ZhWWRp9VpLGL6gpTUzLXYvzd7u3yRE1pImfD3sWAICtdDqdTqfdaXeGTvnGlbVKPBt5y35GIyYzNaTKmSFm2S83hz0FAMA23N3du92hUn5G7zdVObnNVuOmelPlu55pP1oe4hQAAHclf1TU1t99zbrtfXk9eVUaWz+rsjdpcrGveB/tuxLbWJak56p3vESSVEtVkeYqO34fAIBNJJaYmZnlVf2dJJdc8/mPaX3jGnf31KeUr5+q961e3VgueS3N189uuQcGg8FgDDsGmXv72tw7H8y984G5+6afA70HwwIA7l8DIlz/u/aXbIE7HABAQMViKV842PMAAOyHYqkkyUl5AAgpS3mR8gAQUrFYcrlIeQAIKSkUsgVSHgACSpL861CkPAAEZJZILp7uDQCRObU8AITUzb8uRcoDQEDdTidbIOUBIKBum5QHgLg6LVIeAOLqtNomyYyUB4CAuivt7Hl+pDwABNRpdywxs4SUB4CAvNOVJyp0SXkACCh/5J8b330FgIiyp74mpDwARGQFsySxhL48AESUFApWSJICKQ8AESXFQlJIjJQHgJAKpQIdGwAIKylmKc+3ogAgoqRYsMSM774CQEhJsZDNpRyY8u738nwAAHspKSSSmXFPSgCIyJJEEikPADGZmSSR8gAQUhbyEldfASAmankAuLe63e7t27e/+OKLZrP5gx/84MiRI81ms9vtHjt2TNK333775ZdfPvnkkx999NHhw4effvppSZ999tnjjz9eKpWSJLl58+bRo0c7nc6RI0eSJPnzn//8l7/85fDhw8eOHTt58uQjjzyy7mB5LU/KA8B++vzzz//+978///zzjz/++K9//esnnnii3W7/7ne/e/XVV5944omFhYWHH37466+/fvnll7/99tvf/va3L7300sLCwo9+9KOHH37422+/ff/992/cuLGysvLzn//8gw8+OHTo0DPPPPPJJ59MTk7+4Q9/OHHiRLlcrtVqL7300qAT4J6UALBfbt68ef369du3b7/55pufffbZY489ZmbHjh17+OGHjx8//o9//GN8fPzzzz//9NNP2+32I4888s9//nNlZeXJJ588fPhwoVB4++23//SnPz3xxBOvvPLK4cOHjx8/fuPGjWvXrr333nudTqdUKv3whz9cXl7+yU9+cvTo0UHnQMoDwH65devWN9988/zzz9+6davb7X7xxRe3b9+WdOTIkTRNn3766b/+9a//+te/fvrTnz7zzDOdTsfdx8fHv/rqqxMnThw5cuSbb7556qmnTpw48dlnn7Xb7aWlpUcfffT73//+q6++WiqVfvzjH7/77rvu/t3vfvebb74ZdA50bABgvxw9evStt976zW9+88gjjzz66KPXr19/8skn33rrraWlpdOnT7/zzju///3vn3vuuV/96lff+973Pv7444ceeujNN98cGRlZXFx86qmnjh071u12H3rooSRJ3P2hhx76+OOP//a3v926devs2bNff/11o9F47LHHbty4kSTJyy+/vOk5mPMlVwAI5+3Gl9kCtTwABOTybJYNKQ8AMWWNGlIeACLqNeNJeQAIKY95Uh4AAlqdV8N8eQCIjFoeAALq3cZG/x8imliu5oeVSgAAAABJRU5ErkJggg=="},687:function(t,s){t.exports="data:image/png;base64,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"}}]);